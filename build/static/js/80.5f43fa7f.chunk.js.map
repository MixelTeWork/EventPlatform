{"version":3,"file":"static/js/80.5f43fa7f.chunk.js","mappings":"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","sources":["api/dataTypes.ts","utils/fetch.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","utils/displayError.tsx","utils/classNames.ts","webpack://event_platform/./src/components/MessageFromBackend/styles.module.css?70b3","components/MessageFromBackend/index.tsx","utils/getCookies.ts","webpack://event_platform/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","webpack://event_platform/./src/components/Header/styles.module.css?07e3","api/auth.ts","webpack://event_platform/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","webpack://event_platform/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://event_platform/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://event_platform/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","pages/IndexPage/index.tsx","webpack://event_platform/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/DebugPage/index.tsx","webpack://event_platform/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","api/log.ts","utils/nums.ts","utils/dates.ts","webpack://event_platform/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","webpack://event_platform/./src/pages/ProfilePage/styles.module.css?79a0","pages/ProfilePage/index.tsx","App.tsx"],"sourcesContent":["export class ApiError extends Error { }\n\nexport type Modify<T, R> = Omit<T, keyof R> & R;\nexport interface ResponseMsg\n{\n\tmsg: string,\n}\n\nexport interface User\n{\n\tauth: boolean,\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\toperations: string[],\n}\n\nexport interface UserFull\n{\n\tid: number,\n\tname: string,\n\tlogin: string,\n\troles: string[],\n\tbossId: number | null,\n\tdeleted: boolean,\n\taccess: string[],\n\toperations: string[],\n}\n\nexport interface UserWithPwd extends User\n{\n\tpassword: string,\n}\n\n","export function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetch(input, {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n}\n\nexport function fetchDelete(input: RequestInfo | URL)\n{\n\treturn fetch(input, {\n\t\tmethod: \"DELETE\",\n\t});\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError, ResponseMsg, User, UserFull } from \"./dataTypes\";\nimport { fetchPost } from \"../utils/fetch\";\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser);\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return { auth: false, id: -1, login: \"\", roles: [], name: \"\", operations: [] };\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", getUsers);\n}\n\nasync function getUsers(): Promise<UserFull[]>\n{\n\tconst res = await fetch(\"/api/users\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\treturn data as UserFull[];\n}\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangePassword,\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\nasync function postChangePassword(data: ChangePasswordData)\n{\n\tconst res = await fetchPost(\"/api/user/change_password\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n}\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postChangeName,\n\t\tonSuccess: (data: ChangeName) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\nasync function postChangeName(data: ChangeName)\n{\n\tconst res = await fetchPost(\"/api/user/change_name\", data);\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn data;\n}\n\ninterface ChangeName\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./dataTypes\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_debug: \"page_debug\",\n\tpage_users: \"page_users\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn hasPermission(user, operation);\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport { ApiError } from \"../api/dataTypes\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode, messageFormater?: (error: string) => string)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\tconst msg = messageFormater ? messageFormater(error) : error;\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(msg);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__hzHjz\",\"visible\":\"styles_visible__6aD-n\",\"close\":\"styles_close__3L8iW\",\"message\":\"styles_message__oF8zk\"};","import { useEffect, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport getCookie from \"../../utils/getCookies\";\n\nlet msg = \"\";\nexport default function MessageFromBackend()\n{\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() =>\n\t{\n\t\tconst timer = setInterval(() =>\n\t\t{\n\t\t\tconst msgCur = getMsg();\n\t\t\tif (msgCur != msg)\n\t\t\t{\n\t\t\t\tmsg = msgCur || \"\";\n\t\t\t\tsetMessage(msg);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () =>\n\t\t{\n\t\t\tclearInterval(timer);\n\t\t}\n\t}, [setMessage])\n\n\treturn (\n\t\t<div className={classNames(styles.root, message != \"\" && styles.visible)}>\n\t\t\t<button\n\t\t\t\tclassName={styles.close}\n\t\t\t\tonClick={() => setMessage(\"\")}\n\t\t\t></button>\n\t\t\t<div className={styles.message}>{trimQuotes(message)}</div>\n\t\t</div>\n\t);\n}\n\nfunction trimQuotes(str: string)\n{\n\tif (str.at(0) == '\"') str = str.slice(1);\n\tif (str.at(-1) == '\"') str = str.slice(0, -1);\n\treturn str;\n}\n\nfunction getMsg()\n{\n\treturn getCookie(\"MESSAGE_TO_FRONTEND\");\n}\n","export default function getCookie(name: string)\n{\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","import { useMutation, useQueryClient } from \"react-query\";\nimport { fetchPost } from \"../utils/fetch\"\nimport { ApiError, ResponseMsg, User } from \"./dataTypes\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postAuth,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\nasync function postAuth(authData: AuthData)\n{\n\tconst res = await fetchPost(\"/api/auth\", authData);\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport async function postLogout()\n{\n\tawait fetchPost(\"/api/logout\");\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\nexport function useMutationLogout()\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postLogout,\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.invalidateQueries(\"user\");\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo64.png\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Header({ backLink }: HeaderProps)\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst location = useLocation();\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout();\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<Link to=\"/\" className={styles.home}>\n\t\t\t\t\t<img src={logo} alt=\"На главную\" />\n\t\t\t\t</Link>\n\t\t\t\t{backLink && <Link to={backLink}><button className=\"button button_light\">Назад</button></Link>}\n\t\t\t\t{location.pathname != \"/\" && !backLink && <button onClick={() => backLink ? navigate(backLink) : navigate(-1)} className=\"button button_light\">Назад</button>}\n\t\t\t</span>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<button onClick={() => user.data?.auth ? setMenuOpen(v => !v) : navigate(\"/auth\")} className=\"button button_light\">\n\t\t\t\t\t<span>{user.data?.auth ? user.data?.name : \"Войти\"}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")} className=\"button button_light\">\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"} className=\"button button_light\">\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status != \"idle\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface HeaderProps\n{\n\tbackLink?: string,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, backLink, centered = false, centeredPage = false, height100 = false, gap = 0, header }: LayoutProps)\n{\n\tif (header === undefined) header = <Header backLink={backLink} />\n\t\n\treturn (\n\t\t<div className={styles.root} style={{ maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tbackLink?: string,\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Мероприятие\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<h1>Билетная Система</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t\t<div>\n\t\t\t\t<div>Для сканирования билетов получите ссылку у управляющего.</div>\n\t\t\t\t<div>Если вы попали сюда, перейдите по полученной ссылке ещё раз.</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Link } from \"react-router-dom\";\nimport hasPermission from \"../../api/operations\";\nimport useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\n\nexport default function IndexPage()\n{\n\tconst user = useUser();\n\n\treturn (\n\t\t<Layout centered gap=\"1em\">\n\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\">{`</>`}</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\" }: CustomPopupProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}>✖</button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n}\n\ninterface CustomPopupProps extends PopupProps, React.PropsWithChildren\n{\n\ttitle?: string,\n}","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<Link to=\"/users\">Users</Link>\n\t\t\t<Link to=\"/log\">Log</Link>\n\t\t\t<button onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { useQuery } from \"react-query\";\nimport { ApiError, Modify, ResponseMsg } from \"./dataTypes\";\n\nexport function useLog()\n{\n\treturn useQuery(\"log\", getLog);\n}\n\nasync function getLog(): Promise<LogItem[]>\n{\n\tconst res = await fetch(\"/api/debug/log\");\n\tconst data = await res.json();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\treturn (data as LogItemResponse[]).map(parseLogResponse);\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false)\n{\n\tif (!date) return \"\";\n\tif (reverse)\n\t\treturn `${date.getFullYear()}.${padNum(date.getMonth() + 1, 2)}.${padNum(date.getDate(), 2)}`;\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"styles_table__QLr-h\",\"changesCell\":\"styles_changesCell__0wQDJ\",\"changes\":\"styles_changes__EyS9f\",\"btn\":\"styles_btn__H7b72\"};","import { LogItem, useLog } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst log = useLog();\n\n\treturn <Layout centeredPage>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t{displayError(log)}\n\t\t{!log.isFetching && <button className={styles.btn} onClick={() => log.refetch()}>Update</button>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ minWidth: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changesCell}>\n\t\t\t\t\t\t<div className={styles.changes}>\n\t\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.changes.map(v => <div key={v[0]}>{v[0]}: {JSON.stringify(v[1])} {\"->\"} {JSON.stringify(v[2])}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t\t<label className={styles.btn} htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роли</h3>\n\t\t\t\t\t{user.data?.roles.map((v, i) => <div key={i}>{v}</div>)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\nimport displayError from \"./utils/displayError\";\nimport MessageFromBackend from \"./components/MessageFromBackend\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport DebugPage from \"./pages/DebugPage\";\nimport UsersPage from \"./pages/UsersPage\";\nimport LogPage from \"./pages/LogPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\t\t<MessageFromBackend />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/\" element={<IndexPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/debug\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_users\", \"/users\", <UsersPage />)}\n\t\t\t\t{/* {ProtectedRoute(null, \"/:id\", <IndexPage />)} */}\n\t\t\t\t<Route path=\"*\" element={<NotFoundPage />} />\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","Error","fetchPost","input","body","fetch","method","headers","undefined","JSON","stringify","useUser","useQuery","getUser","async","res","data","json","status","auth","id","login","roles","name","operations","ok","msg","user","getUsers","postChangeName","hasPermission","operation","_user$data","_user$data2","includes","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","displayError","requestRes","render","messageFormater","isError","error","message","defaultRender","_jsx","style","color","textAlign","children","classNames","_len","arguments","length","names","Array","_key","filter","v","join","MessageFromBackend","setMessage","useState","timer","setInterval","msgCur","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookie","clearInterval","_jsxs","className","styles","root","visible","close","onClick","trimQuotes","str","at","slice","HeaderBack","navigate","useNavigate","postAuth","authData","postLogout","Spinner","_ref","zIndex","spinner","Header","_user$data3","backLink","menuOpen","setMenuOpen","location","mutation","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","invalidateQueries","useMutationLogout","block","Link","to","home","src","logo","alt","menu","menuVisible","mutate","disabled","Layout","centered","centeredPage","height100","gap","header","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","t","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","setError","inp_login","useRef","inp_password","onError","setQueryData","useMutationAuth","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","IndexPage","Popup","open","popup","DebugPage","logErrors","setLogErrors","log","setLog","refLogErrors","refLog","text","setTimeout","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","x","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","UsersPage","_users$data","users","map","toggleInp","concat","htmlFor","deleted","_Fragment","toggle","userInfo","o","i","colorizeOperation","colors","page","add","get","change","delete","prefix","startsWith","getLog","parseLogResponse","responseLog","date","Date","padNum","num","len","padStart","datetimeToString","seconds","getFullYear","getMonth","getDate","dateToString","dateStr","getHours","getMinutes","getSeconds","timeToString","LogPage","_log$data","isFetching","btn","refetch","table","minWidth","width","item","colorizeAction","actionCode","tableName","recordId","userName","userId","changesCell","changes","action","added","updated","restored","ProfilePage","_user$data4","nameRef","userNameEditing","setUserNameEditing","nameMutation","_queryClient$getQuery","getQueryState","useMutationChangeName","defaultValue","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","isSuccess","Routes"],"sourceRoot":""}