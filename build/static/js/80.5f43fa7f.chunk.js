"use strict";(self.webpackChunkevent_platform=self.webpackChunkevent_platform||[]).push([[80],{80:(e,t,n)=>{n.r(t),n.d(t,{default:()=>oe});var s=n(689),l=n(933);class o extends Error{}function i(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:void 0===t?null:JSON.stringify(t)})}function r(){return(0,l.useQuery)("user",c)}async function c(){const e=await fetch("/api/user"),t=await e.json();if(401==e.status)return{auth:!1,id:-1,login:"",roles:[],name:"",operations:[]};if(!e.ok)throw new o(t.msg);const n=t;return n.auth=!0,n}async function a(){const e=await fetch("/api/users"),t=await e.json();if(!e.ok)throw new o(t.msg);return t}async function d(e){const t=await i("/api/user/change_name",e);if(!t.ok)throw new o((await t.json()).msg);return e}function u(e,t){var n,s;return!(null===(n=e.data)||void 0===n||!n.auth||null===(s=e.data)||void 0===s||!s.operations.includes(t))}var h=n(86),x=n(791);function j(){const{pathname:e}=(0,s.TH)();return(0,x.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null}var m=n(184);function g(e,t,n){if(!e.isError)return null;const s=e.error instanceof o?e.error.message:"\u041e\u0448\u0438\u0431\u043a\u0430";return(t||v)(n?n(s):s)}function v(e){return(0,m.jsx)("h3",{style:{color:"tomato",textAlign:"center"},children:e})}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>!!e)).join(" ")}const p={root:"styles_root__hzHjz",visible:"styles_visible__6aD-n",close:"styles_close__3L8iW",message:"styles_message__oF8zk"};let b="";function _(){const[e,t]=(0,x.useState)("");return(0,x.useEffect)((()=>{const e=setInterval((()=>{const e=function(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}("MESSAGE_TO_FRONTEND");e!=b&&(b=e||"",t(b))}),1e3);return()=>{clearInterval(e)}}),[t]),(0,m.jsxs)("div",{className:f(p.root,""!=e&&p.visible),children:[(0,m.jsx)("button",{className:p.close,onClick:()=>t("")}),(0,m.jsx)("div",{className:p.message,children:y(e)})]})}function y(e){return'"'==e.at(0)&&(e=e.slice(1)),'"'==e.at(-1)&&(e=e.slice(0,-1)),e}const A={root:"styles_root__4DGhY"};function N(){const e=(0,s.s0)();return(0,m.jsx)("div",{className:A.root,children:(0,m.jsx)("button",{onClick:()=>e(-1),className:"button button_light",children:"\u041d\u0430\u0437\u0430\u0434"})})}var w=n(87);const S={root:"styles_root__Zvl9c",home:"styles_home__o+-s7",block:"styles_block__a1SM7",menu:"styles_menu__WWgPh",menuVisible:"styles_menuVisible__mMGZn"},C="data:image/png;base64,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";async function E(e){const t=await i("/api/auth",e),n=await t.json();if(!t.ok)throw new o(n.msg);const s=n;return s.auth=!0,s}async function I(){await i("/api/logout")}const k={root:"styles_root__BdzzK",spinner:"styles_spinner__rlI86","lds-ring":"styles_lds-ring__jnLuB"};function F(e){let{color:t,zIndex:n}=e;return(0,m.jsx)("div",{className:k.root,children:(0,m.jsxs)("div",{className:k.spinner,style:{"--color":t,zIndex:n},children:[(0,m.jsx)("div",{}),(0,m.jsx)("div",{}),(0,m.jsx)("div",{}),(0,m.jsx)("div",{})]})})}function Q(e){var t,n;let{backLink:o}=e;const[i,c]=(0,x.useState)(!1),a=(0,s.TH)(),d=(0,s.s0)(),u=function(){const e=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:I,onSuccess:()=>{e.invalidateQueries("user")}})}(),h=r();return(0,m.jsxs)("div",{className:S.root,children:[(0,m.jsxs)("span",{className:S.block,children:[(0,m.jsx)(w.rU,{to:"/",className:S.home,children:(0,m.jsx)("img",{src:C,alt:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})}),o&&(0,m.jsx)(w.rU,{to:o,children:(0,m.jsx)("button",{className:"button button_light",children:"\u041d\u0430\u0437\u0430\u0434"})}),"/"!=a.pathname&&!o&&(0,m.jsx)("button",{onClick:()=>d(o||-1),className:"button button_light",children:"\u041d\u0430\u0437\u0430\u0434"})]}),(0,m.jsxs)("span",{className:S.block,children:[(0,m.jsx)("button",{onClick:()=>{var e;return null!==(e=h.data)&&void 0!==e&&e.auth?c((e=>!e)):d("/auth")},className:"button button_light",children:(0,m.jsx)("span",{children:null!==(t=h.data)&&void 0!==t&&t.auth?null===(n=h.data)||void 0===n?void 0:n.name:"\u0412\u043e\u0439\u0442\u0438"})}),(0,m.jsxs)("div",{className:f(S.menu,i&&S.menuVisible),children:[(0,m.jsx)("button",{onClick:()=>d("/profile"),className:"button button_light",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,m.jsx)("button",{onClick:()=>u.mutate(),disabled:"idle"!=u.status,className:"button button_light",children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),"idle"!=u.status&&(0,m.jsx)(F,{})]})}const L={root:"styles_root__xvR2N",body:"styles_body__S-p4X",body_centered:"styles_body_centered__NzRPU",body_centeredPage:"styles_body_centeredPage__R-EzO"};function R(e){let{children:t,className:n,backLink:s,centered:l=!1,centeredPage:o=!1,height100:i=!1,gap:r=0,header:c}=e;return void 0===c&&(c=(0,m.jsx)(Q,{backLink:s})),(0,m.jsxs)("div",{className:L.root,style:{maxHeight:i?"100dvh":""},children:[c||(0,m.jsx)("div",{}),(0,m.jsx)("div",{className:f(L.body,n,l&&L.body_centered,o&&L.body_centeredPage),style:{gap:r,maxHeight:i?"100%":""},children:t})]})}function T(){return(0,m.jsx)(R,{centered:!0,header:(0,m.jsx)(N,{}),children:"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442"})}function B(){return(0,m.jsx)(R,{centered:!0,header:(0,m.jsx)(N,{}),children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})}const G={form:"styles_form__n7Rcu"};function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435";(0,x.useEffect)((()=>{const n=document.title,s="object"!=typeof e?[e]:e;return document.title=[t,...s].filter((e=>!!e)).join(" | "),()=>{document.title=n}}),[e,t])}const Y={form:"styles_form__cFFCH",field:"styles_field__5rpBk"};function D(e){let{className:t,style:n,onSubmit:s,children:l}=e;return(0,m.jsx)("form",{className:f(Y.form,t),style:n,onSubmit:e=>{e.preventDefault(),s()},children:l})}function P(e){let{label:t,className:n,style:s,children:l}=e;return(0,m.jsxs)("label",{className:f(Y.field,n),style:s,children:[(0,m.jsx)("span",{children:t}),l]})}function Z(){O("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f");const[e,t]=(0,x.useState)(""),n=(0,x.useRef)(null),s=(0,x.useRef)(null),i=function(e){const t=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:E,onSuccess:e=>{t.setQueryData("user",(()=>e))},onError:t=>{null===e||void 0===e||e(t instanceof o?t.message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}})}(t);return(0,m.jsxs)(R,{header:null,centered:!0,centeredPage:!0,gap:"2em",children:[(0,m.jsx)("h1",{children:"\u0411\u0438\u043b\u0435\u0442\u043d\u0430\u044f \u0421\u0438\u0441\u0442\u0435\u043c\u0430"}),e&&(0,m.jsx)("h3",{children:e}),i.isLoading&&(0,m.jsx)(F,{}),(0,m.jsxs)(D,{className:G.form,onSubmit:function(){var e,t;const l=(null===(e=n.current)||void 0===e?void 0:e.value)||"",o=(null===(t=s.current)||void 0===t?void 0:t.value)||"";i.mutate({login:l,password:o})},children:[(0,m.jsx)(P,{label:"\u041b\u043e\u0433\u0438\u043d",children:(0,m.jsx)("input",{ref:n,type:"text",name:"login",required:!0})}),(0,m.jsx)(P,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",children:(0,m.jsx)("input",{ref:s,type:"password",name:"password",required:!0})}),(0,m.jsx)("button",{type:"submit",className:"button button_light button_small",disabled:"loading"==i.status,children:"\u0412\u043e\u0439\u0442\u0438"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:"\u0414\u043b\u044f \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u0443 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u0433\u043e."}),(0,m.jsx)("div",{children:"\u0415\u0441\u043b\u0438 \u0432\u044b \u043f\u043e\u043f\u0430\u043b\u0438 \u0441\u044e\u0434\u0430, \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043f\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})]})}function H(){const e=r();return(0,m.jsx)(R,{centered:!0,gap:"1em",children:u(e,"page_debug")&&(0,m.jsx)(w.rU,{to:"/debug",children:"</>"})})}const J={root:"styles_root__O0923",open:"styles_open__35Vcu",popup:"styles_popup__L-0H0",header:"styles_header__o87wG",close:"styles_close__w0Yhz",body:"styles_body__t75Nd"};function M(e){let{children:t,open:n=!1,close:s,title:l=""}=e;return(0,m.jsx)("div",{className:f(J.root,n&&J.open),children:(0,m.jsxs)("div",{className:J.popup,children:[(l||s)&&(0,m.jsxs)("div",{className:J.header,children:[(0,m.jsx)("h3",{children:l}),s&&(0,m.jsx)("button",{className:J.close,onClick:s,children:"\u2716"})]}),(0,m.jsx)("div",{className:J.body,children:t})]})})}function U(){const[e,t]=(0,x.useState)(""),[n,s]=(0,x.useState)(""),l=(0,x.useRef)(null),o=(0,x.useRef)(null);return(0,m.jsxs)(R,{centered:!0,gap:"1rem",children:[(0,m.jsx)(w.rU,{to:"/users",children:"Users"}),(0,m.jsx)(w.rU,{to:"/log",children:"Log"}),(0,m.jsx)("button",{onClick:async()=>{t("Loading");try{const e=await fetch("/api/debug/log_errors"),n=await e.text();t(n),setTimeout((()=>{var e,t,n,s;return null===(e=l.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.scrollTo(0,null===(n=l.current)||void 0===n||null===(s=n.parentElement)||void 0===s?void 0:s.scrollHeight)}),150)}catch(e){t(JSON.stringify(e))}},children:"Log errors"}),(0,m.jsx)("button",{onClick:async()=>{s("Loading");try{const e=await fetch("/api/debug/log_info"),t=await e.text();s(t),setTimeout((()=>{var e,t,n,s;return null===(e=o.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.scrollTo(0,null===(n=o.current)||void 0===n||null===(s=n.parentElement)||void 0===s?void 0:s.scrollHeight)}),150)}catch(e){s(JSON.stringify(e))}},children:"Log requests"}),(0,m.jsx)(M,{title:"logErrors",open:""!=e,close:()=>t(""),children:(0,m.jsx)("pre",{ref:l,children:e})}),(0,m.jsx)(M,{title:"log",open:""!=n,close:()=>s(""),children:(0,m.jsx)("pre",{ref:o,children:n})})]})}const W={user:"styles_user__WUZvf",title:"styles_title__Gd1jL",toggle:"styles_toggle__qlIwC",toggleInp:"styles_toggleInp__fGE-7",userInfo:"styles_userInfo__vgBlw",operations:"styles_operations__MGBbv"};function z(){var e;O("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438");const t=(0,l.useQuery)("users",a);return(0,m.jsxs)(R,{centeredPage:!0,gap:8,children:[t.isLoading&&(0,m.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),g(t),null===(e=t.data)||void 0===e?void 0:e.map((e=>(0,m.jsxs)("div",{className:W.user,children:[(0,m.jsx)("input",{type:"checkbox",className:W.toggleInp,id:"user".concat(e.id)}),(0,m.jsxs)("label",{className:W.title,htmlFor:"user".concat(e.id),children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{children:e.login}),(0,m.jsx)("div",{style:{color:"blue"},children:e.id}),(0,m.jsx)("div",{children:"|"}),(0,m.jsx)("div",{children:e.name})]}),(0,m.jsxs)("div",{children:[e.deleted&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:{color:"tomato"},children:"deleted"}),(0,m.jsx)("div",{children:"|"})]}),(0,m.jsx)("span",{children:e.roles.join(", ")}),(0,m.jsx)("div",{className:W.toggle})]})]}),(0,m.jsx)("div",{className:W.userInfo,children:(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:"Operations"}),(0,m.jsx)("div",{className:W.operations,children:e.operations.map(((e,t)=>(0,m.jsx)("div",{children:V(e)},t)))})]})})]},e.id)))]})}function V(e){const t={page:"#990099",add:"#008000",get:"#008000",change:"#006fb3",delete:"#b30000"};for(const n in t)if(e.startsWith(n))return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{style:{color:t[n]},children:n}),(0,m.jsx)("span",{children:e.slice(n.length)})]});return(0,m.jsx)("span",{children:e})}async function q(){const e=await fetch("/api/debug/log"),t=await e.json();if(!e.ok)throw new o(t.msg);return t.map(K)}function K(e){const t=e;return t.date=new Date(e.date),t}function X(e,t){return"".concat(e).padStart(t,"0")}function $(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"".concat(e.getFullYear(),".").concat(X(e.getMonth()+1,2),".").concat(X(e.getDate(),2)):"".concat(X(e.getDate(),2),".").concat(X(e.getMonth()+1,2),".").concat(e.getFullYear()):""}(e,arguments.length>2&&void 0!==arguments[2]&&arguments[2])+" "+function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="".concat(X(e.getHours(),2),":").concat(X(e.getMinutes(),2));return t?n+":".concat(X(e.getSeconds(),2)):n}(e,t)}const ee={table:"styles_table__QLr-h",changesCell:"styles_changesCell__0wQDJ",changes:"styles_changes__EyS9f",btn:"styles_btn__H7b72"};function te(){var e;O("Log");const t=(0,l.useQuery)("log",q);return(0,m.jsxs)(R,{centeredPage:!0,children:[t.isFetching&&(0,m.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),g(t),!t.isFetching&&(0,m.jsx)("button",{className:ee.btn,onClick:()=>t.refetch(),children:"Update"}),(0,m.jsxs)("table",{className:ee.table,children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{style:{minWidth:"9.5em"},children:"Date"}),(0,m.jsx)("th",{style:{minWidth:"4em"},children:"Action"}),(0,m.jsx)("th",{style:{minWidth:"9.5em"},children:"Table[id]"}),(0,m.jsx)("th",{children:"User[id]"}),(0,m.jsx)("th",{style:{width:"18em"},children:"Changes"})]})}),(0,m.jsx)("tbody",{children:null===(e=t.data)||void 0===e?void 0:e.map((e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:$(e.date,!0,!0)}),(0,m.jsx)("td",{children:ne(e.actionCode)}),(0,m.jsxs)("td",{children:[e.tableName,"[",e.recordId,"]"]}),(0,m.jsxs)("td",{children:[e.userName," [",e.userId,"]"]}),(0,m.jsx)("td",{className:ee.changesCell,children:(0,m.jsxs)("div",{className:ee.changes,children:[(0,m.jsx)("input",{type:"checkbox",className:ee.toggleInp,id:"item".concat(e.id)}),(0,m.jsx)("div",{children:e.changes.map((e=>(0,m.jsxs)("div",{children:[e[0],": ",JSON.stringify(e[1])," ","->"," ",JSON.stringify(e[2])]},e[0])))}),e.changes.length>0&&(0,m.jsx)("label",{className:ee.btn,htmlFor:"item".concat(e.id),children:e.changes.length})]})})]},e.id)))})]})]})}function ne(e){return(0,m.jsx)("span",{style:{color:{added:"#008000",deleted:"#b30000",updated:"#006fb3",restored:"#990099"}[e]},children:e})}const se={root:"styles_root__Rm-tG",input:"styles_input__2tNlg",password:"styles_password__Om-1z"};function le(){var e,t,n;const s=r(),o=(0,x.useRef)(null),[i,c]=(0,x.useState)(!1),a=function(e){const t=(0,l.useQueryClient)();return(0,l.useMutation)({mutationFn:d,onSuccess:n=>{var s;"success"==(null===(s=t.getQueryState("user"))||void 0===s?void 0:s.status)&&t.setQueryData("user",(e=>({...e,name:n.name}))),null===e||void 0===e||e()}})}();return(0,m.jsx)(R,{centered:!0,gap:"1rem",children:(0,m.jsxs)("div",{className:se.root,children:[g(a),a.isLoading&&(0,m.jsx)(F,{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"\u0418\u043c\u044f"}),(0,m.jsx)("div",{children:(0,m.jsx)("input",{type:"text",ref:o,defaultValue:null===(e=s.data)||void 0===e?void 0:e.name,disabled:!i,className:se.input})}),(0,m.jsxs)("div",{children:[!i&&(0,m.jsx)("button",{onClick:()=>c(!0),className:"button button_small",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),i&&(0,m.jsx)("button",{onClick:()=>{var e;c(!1),o.current&&(o.current.value=(null===(e=s.data)||void 0===e?void 0:e.name)||"")},className:"button button_small",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),i&&(0,m.jsx)("button",{onClick:()=>{c(!1),o.current&&a.mutate({name:o.current.value})},className:"button button_small",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"\u041b\u043e\u0433\u0438\u043d"}),null===(t=s.data)||void 0===t?void 0:t.login]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{children:"\u0420\u043e\u043b\u0438"}),null===(n=s.data)||void 0===n?void 0:n.roles.map(((e,t)=>(0,m.jsx)("div",{children:e},t)))]})]})})}function oe(){var e;const t=r();function n(e,n,l){var o;return(0,m.jsx)(s.AW,{path:n,element:null!==(o=t.data)&&void 0!==o&&o.auth?null==e||u(t,e)?l:(0,m.jsx)(B,{}):(0,m.jsx)(s.Fg,{to:"/auth"})})}return(0,m.jsxs)("div",{className:"root",children:[(0,m.jsx)(j,{}),(0,m.jsx)(_,{}),t.isLoading&&(0,m.jsx)(h.Z,{}),g(t),t.isSuccess&&(0,m.jsxs)(s.Z5,{children:[(0,m.jsx)(s.AW,{path:"/auth",element:null!==(e=t.data)&&void 0!==e&&e.auth?(0,m.jsx)(s.Fg,{to:"/"}):(0,m.jsx)(Z,{})}),(0,m.jsx)(s.AW,{path:"/",element:(0,m.jsx)(H,{})}),n(null,"/profile",(0,m.jsx)(le,{})),n("page_debug","/debug",(0,m.jsx)(U,{})),n("page_debug","/log",(0,m.jsx)(te,{})),n("page_users","/users",(0,m.jsx)(z,{})),(0,m.jsx)(s.AW,{path:"*",element:(0,m.jsx)(T,{})})]})]})}}}]);
//# sourceMappingURL=80.5f43fa7f.chunk.js.map