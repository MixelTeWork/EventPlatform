{"version":3,"file":"static/js/380.2a61890e.chunk.js","mappings":"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","sources":["api/dataTypes.ts","utils/fetch.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","utils/displayError.tsx","utils/classNames.ts","webpack://event_platform/./src/components/MessageFromBackend/styles.module.css?70b3","components/MessageFromBackend/index.tsx","utils/getCookies.ts","webpack://event_platform/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","webpack://event_platform/./src/components/Header/styles.module.css?07e3","api/auth.ts","webpack://event_platform/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","icons/home.tsx","webpack://event_platform/./src/components/Header/SimpleHeader/styles.module.css?82dc","utils/useStateBool.ts","icons/exit.tsx","icons/code.tsx","icons/widgets.tsx","components/Header/SimpleHeader/index.tsx","components/Header/index.tsx","webpack://event_platform/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","utils/useMetaColor.ts","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://event_platform/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://event_platform/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","webpack://event_platform/./src/pages/DebugPage/styles.module.css?9feb","webpack://event_platform/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/DebugPage/index.tsx","webpack://event_platform/./src/pages/IndexPage/styles.module.css?578a","utils/imagefileToData.ts","utils/useStateObj.ts","webpack://event_platform/./src/components/AuthByTicket/styles.module.css?845d","webpack://event_platform/./src/components/Textbox/styles.module.css?8383","components/Textbox/index.tsx","components/AuthByTicket/index.tsx","pages/IndexPage/index.tsx","api/log.ts","utils/nums.ts","utils/dates.ts","webpack://event_platform/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","utils/query.ts","api/quest.ts","api/dialog.ts","components/GameDialog/usePreloadGameDialogImgs.ts","webpack://event_platform/./src/pages/ManageQuestPage/AddQuest/styles.module.css?ec25","pages/ManageQuestPage/AddQuest/index.tsx","webpack://event_platform/./src/components/GameDialogEditor/DialogNode/styles.module.css?7dd4","icons/delete.tsx","components/GameDialogEditor/DialogNode/index.tsx","icons/cancel.tsx","icons/save.tsx","webpack://event_platform/./src/components/GameDialogEditor/ManageCharacters/Character/styles.module.css?a5d9","webpack://event_platform/./src/components/PopupConfirm/styles.module.css?b464","components/PopupConfirm/index.tsx","components/GameDialogEditor/ManageCharacters/Character/index.tsx","webpack://event_platform/./src/components/GameDialogEditor/ManageCharacters/styles.module.css?521e","components/GameDialogEditor/ManageCharacters/index.tsx","webpack://event_platform/./src/components/GameDialogEditor/styles.module.css?e0e1","components/GameDialogEditor/index.tsx","utils/copyObj.ts","webpack://event_platform/./src/pages/ManageQuestPage/EditGameDialog/styles.module.css?c866","webpack://event_platform/./src/components/GameDialog/styles.module.css?3643","components/GameDialog/index.tsx","icons/edit.tsx","pages/ManageQuestPage/EditGameDialog/index.tsx","webpack://event_platform/./src/pages/ManageQuestPage/EditStartDialog/styles.module.css?8a9d","pages/ManageQuestPage/EditStartDialog/index.tsx","webpack://event_platform/./src/pages/ManageQuestPage/Quest/styles.module.css?6142","icons/view.tsx","icons/reload.tsx","pages/ManageQuestPage/Quest/index.tsx","webpack://event_platform/./src/pages/ManageQuestPage/styles.module.css?b3c3","pages/ManageQuestPage/index.tsx","api/store.ts","webpack://event_platform/./src/pages/ManageStorePage/AddStoreItem/styles.module.css?0eb8","pages/ManageStorePage/AddStoreItem/index.tsx","webpack://event_platform/./src/pages/ManageStorePage/StoreItem/styles.module.css?d2c5","pages/ManageStorePage/StoreItem/index.tsx","webpack://event_platform/./src/pages/ManageStorePage/styles.module.css?4232","pages/ManageStorePage/index.tsx","webpack://event_platform/./src/pages/MapPage/styles.module.css?f9fa","webpack://event_platform/./src/components/Footer/styles.module.css?e39a","components/Footer/index.tsx","webpack://event_platform/./src/components/Title/styles.module.css?5d4e","components/Title/index.tsx","webpack://event_platform/./src/components/GameDialogGreetings/SelectGroup/styles.module.css?5d72","components/GameDialogGreetings/SelectGroup/index.tsx","components/GameDialogGreetings/index.tsx","webpack://event_platform/./src/components/StyledWindow/styles.module.css?5fb0","components/StyledWindow/index.tsx","webpack://event_platform/./src/pages/MapPage/InteractiveMap/styles.module.css?c04f","pages/MapPage/InteractiveMap/index.tsx","pages/MapPage/index.tsx","utils/usePreloadImgs.ts","components/QrCode/index.tsx","webpack://event_platform/./src/pages/PromotePage/styles.module.css?cc6e","pages/PromotePage/index.tsx","webpack://event_platform/./src/pages/QuestPage/styles.module.css?26ae","pages/QuestPage/index.tsx","api/scanner.ts","webpack://event_platform/./src/components/Scanner/styles.module.css?0297","webpack://event_platform/./src/utils/useScanner/styles.module.css?1ae4","utils/useSound.ts","utils/useScanner/index.tsx","components/Scanner/index.tsx","webpack://event_platform/./src/pages/ScannerPage/styles.module.css?d401","pages/ScannerPage/index.tsx","webpack://event_platform/./src/pages/SendPage/styles.module.css?db02","pages/SendPage/index.tsx","api/send.ts","webpack://event_platform/./src/pages/StorePage/styles.module.css?2133","pages/StorePage/index.tsx","webpack://event_platform/./src/pages/TimetablePage/styles.module.css?d4b9","pages/TimetablePage/index.tsx","webpack://event_platform/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","webpack://event_platform/./src/pages/WorkerPage/styles.module.css?c125","pages/WorkerPage/index.tsx","webpack://event_platform/./src/pages/WorkerQuestPage/styles.module.css?85f7","pages/WorkerQuestPage/index.tsx","webpack://event_platform/./src/pages/WorkerStorePage/styles.module.css?02b2","pages/WorkerStorePage/index.tsx","webpack://event_platform/./src/pages/GamePage/styles.module.css?b68d","api/game.ts","components/GameDialogGame/index.tsx","api/tourney.ts","pages/GamePage/index.tsx","utils/useDisableZoom.ts","utils/randomInt.ts","webpack://event_platform/./src/pages/GameSettingsPage/styles.module.css?965d","webpack://event_platform/./src/pages/GameSettingsPage/TourneyEdit/styles.module.css?5251","icons/play.tsx","pages/GameSettingsPage/TourneyEdit/index.tsx","webpack://event_platform/./src/components/ConfirmingButton/styles.module.css?9cd7","components/ConfirmingButton/index.tsx","pages/GameSettingsPage/index.tsx","webpack://event_platform/./src/pages/GameScreenPage/styles.module.css?d360","pages/GameScreenPage/game.tsx","pages/GameScreenPage/index.tsx","webpack://event_platform/./src/pages/GameCharactersPage/AddCharacter/styles.module.css?3808","pages/GameCharactersPage/AddCharacter/index.tsx","webpack://event_platform/./src/pages/GameCharactersPage/Character/styles.module.css?224f","pages/GameCharactersPage/Character/index.tsx","webpack://event_platform/./src/pages/GameCharactersPage/styles.module.css?d290","pages/GameCharactersPage/index.tsx","webpack://event_platform/./src/pages/TourneyPage/styles.module.css?8aba","pages/TourneyPage/tree.ts","pages/TourneyPage/tourney.ts","pages/TourneyPage/index.tsx","webpack://event_platform/./src/pages/StatsPage/styles.module.css?ca62","pages/StatsPage/index.tsx","api/other.ts","App.tsx"],"sourcesContent":["export class ApiError extends Error { }\n\nexport type Modify<T, R> = Omit<T, keyof R> & R;\nexport interface ResponseMsg\n{\n\tmsg: string,\n}\n\nexport interface ImgData\n{\n\tdata: string,\n\tname: string,\n}\n","import { ApiError, ResponseMsg } from \"../api/dataTypes\";\n\nasync function fetchWithJson(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetch(input, {\n\t\tmethod,\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn res;\n}\n\nexport function fetchGet(input: RequestInfo | URL)\n{\n\treturn fetchWithJson(\"GET\", input);\n}\n\nexport function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"POST\", input, body);\n}\n\nexport function fetchDelete(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"DELETE\", input, body);\n}\n\nasync function fetchJson<T>(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetchWithJson(method, input, body);\n\tconst data = await res.json();\n\treturn data as T;\n}\n\nexport function fetchJsonGet<T>(input: RequestInfo | URL)\n{\n\treturn fetchJson<T>(\"GET\", input);\n}\n\nexport function fetchJsonPost<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"POST\", input, body);\n}\n\nexport function fetchJsonDelete<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"DELETE\", input, body);\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError, ResponseMsg } from \"./dataTypes\";\nimport { fetchJsonGet, fetchJsonPost, fetchPost } from \"../utils/fetch\";\n\nexport interface User\n{\n\tauth: boolean;\n\tid: string;\n\tname: string;\n\tlast_name: string;\n\tphoto: string;\n\tbalance: number;\n\troles: string[];\n\toperations: string[];\n\tgroup: UserGroup;\n\tgameOpened: boolean;\n\tticketTId: number;\n}\n\nexport interface UserFull\n{\n\tid: number;\n\tid_vk: number;\n\tid_big: string;\n\tlogin: string;\n\tname: string;\n\tlast_name: string;\n\tphoto: string;\n\tbalance: number;\n\troles: string[];\n\tdeleted: boolean;\n\toperations: string[];\n\tgroup: UserGroup;\n\tgameOpened: boolean;\n\tticketTId: number;\n}\n\nexport type UserGroup = -1 | 0 | 1 | 2;\n\nexport interface UserWithPwd extends User\n{\n\tpassword: string;\n}\n\nexport function createEmptyUser(): User\n{\n\treturn { auth: false, id: \"\", balance: 0, roles: [], name: \"\", last_name: \"\", photo: \"\", operations: [], group: -1, gameOpened: false, ticketTId: -1 };\n}\n\nexport function useUpdateUser()\n{\n\tconst queryClient = useQueryClient();\n\treturn () => queryClient.invalidateQueries(\"user\");\n}\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser);\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return createEmptyUser();\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", async () =>\n\t\tawait fetchJsonGet<UserFull[]>(\"/api/users\")\n\t);\n}\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangePasswordData) =>\n\t\t\tawait fetchPost(\"/api/user/change_password\", data),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangeName) =>\n\t\t{\n\t\t\tawait fetchPost(\"/api/user/change_name\", data);\n\t\t\treturn data;\n\t\t},\n\t\tonSuccess: (data: ChangeName) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface ChangeName\n{\n\tname: string;\n}\n\nexport function useMutationSetGroup(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: SetGroup) =>\n\t\t\tawait fetchJsonPost<SetGroup>(\"/api/user/set_group\", data),\n\t\tonSuccess: (data: SetGroup) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, group: data.group }));\n\n\t\t\tqueryClient.invalidateQueries(\"quests\", { exact: true });\n\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface SetGroup\n{\n\tgroup: UserGroup;\n}\n\nexport function useMutationOpenGame(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchPost(\"/api/user/open_game\"),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, gameOpened: true }));\n\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./user\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_debug: \"page_debug\",\n\tpage_users: \"page_users\",\n\tpage_worker: \"page_worker\",\n\tpage_worker_quest: \"page_worker_quest\",\n\tpage_worker_store: \"page_worker_store\",\n\tpage_stats: \"page_stats\",\n\tpromote_worker: \"promote_worker\",\n\tpromote_manager: \"promote_manager\",\n\tmanage_store: \"manage_store\",\n\tmanage_quest: \"manage_quest\",\n\tmanage_games: \"manage_games\",\n\tsend_any: \"send_any\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn hasPermission(user, operation);\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport { ApiError } from \"../api/dataTypes\";\n\nexport function formatError(error: any, messageFormater?: (error: string) => string)\n{\n\tconst err = error instanceof ApiError ? error.message : \"Ошибка\";\n\tconst msg = messageFormater ? messageFormater(err) : err;\n\treturn msg\n}\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode, messageFormater?: (error: string) => string)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst msg = formatError(requestRes.error, messageFormater);\n\tconst renderer = render || defaultRender;\n\treturn renderer(msg);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__hzHjz\",\"visible\":\"styles_visible__6aD-n\",\"close\":\"styles_close__3L8iW\",\"message\":\"styles_message__oF8zk\"};","import { useEffect, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport getCookie from \"../../utils/getCookies\";\n\nlet msg = \"\";\nexport default function MessageFromBackend()\n{\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() =>\n\t{\n\t\tconst timer = setInterval(() =>\n\t\t{\n\t\t\tconst msgCur = getMsg();\n\t\t\tif (msgCur != msg)\n\t\t\t{\n\t\t\t\tmsg = msgCur || \"\";\n\t\t\t\tsetMessage(msg);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () =>\n\t\t{\n\t\t\tclearInterval(timer);\n\t\t}\n\t}, [setMessage])\n\n\treturn (\n\t\t<div className={classNames(styles.root, message != \"\" && styles.visible)}>\n\t\t\t<button\n\t\t\t\tclassName={styles.close}\n\t\t\t\tonClick={() => setMessage(\"\")}\n\t\t\t></button>\n\t\t\t<div className={styles.message}>{trimQuotes(message)}</div>\n\t\t</div>\n\t);\n}\n\nfunction trimQuotes(str: string)\n{\n\tif (str.at(0) == '\"') str = str.slice(1);\n\tif (str.at(-1) == '\"') str = str.slice(0, -1);\n\treturn str;\n}\n\nfunction getMsg()\n{\n\treturn getCookie(\"MESSAGE_TO_FRONTEND\");\n}\n","export default function getCookie(name: string)\n{\n\tlet matches = document.cookie.match(new RegExp( // eslint-disable-next-line\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"menu\":\"styles_menu__WWgPh\",\"home\":\"styles_home__o+-s7\",\"gap\":\"styles_gap__omAtS\",\"text\":\"styles_text__yWAxe\",\"img\":\"styles_img__vhWmb\"};","import { useMutation, useQueryClient } from \"react-query\";\nimport { fetchJsonPost, fetchPost } from \"../utils/fetch\"\nimport { ApiError } from \"./dataTypes\";\nimport { User, createEmptyUser } from \"./user\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (authData: AuthData) =>\n\t\t{\n\t\t\tconst user = await fetchJsonPost<User>(\"/api/auth\", authData);\n\t\t\tuser.auth = true;\n\t\t\treturn user;\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\n\nexport function useMutationAuthByTicket(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: AuthByTicketData) =>\n\t\t{\n\t\t\tconst user = await fetchJsonPost<User>(\"/api/auth_ticket\", data);\n\t\t\tuser.auth = true;\n\t\t\treturn user;\n\t\t},\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\ninterface AuthByTicketData\n{\n\tcode: string,\n}\n\n\nexport function useMutationLogout(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchPost(\"/api/logout\"),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", (_?: User) => createEmptyUser());\n\t\t\tonSuccess?.();\n\t\t}\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex, block, r = 0 }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root} style={{ position: block ? \"absolute\" : \"fixed\", borderRadius: r }}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n\tr?: number | string,\n\tblock?: boolean\n}","export default function IconHome()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M240-200h120v-200q0-17 11.5-28.5T400-440h160q17 0 28.5 11.5T600-400v200h120v-360L480-740 240-560v360Zm-80 0v-360q0-19 8.5-36t23.5-28l240-180q21-16 48-16t48 16l240 180q15 11 23.5 28t8.5 36v360q0 33-23.5 56.5T720-120H560q-17 0-28.5-11.5T520-160v-200h-80v200q0 17-11.5 28.5T400-120H240q-33 0-56.5-23.5T160-200Zm320-270Z\" />\n\t\t</svg>\n\t)\n}\n\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__sPNBM\",\"gap\":\"styles_gap__rY65Q\",\"home\":\"styles_home__0FRFW\",\"user\":\"styles_user__exee6\",\"img\":\"styles_img__lbAwU\",\"menu\":\"styles_menu__5sFrk\",\"menuVisible\":\"styles_menuVisible__NWsoJ\"};","import { useState } from \"react\";\n\nexport default function useStateBool(initialState: boolean | (() => boolean), onSet?: () => void): StateBool\n{\n\tconst [v, set] = useState(initialState)\n\tlet setFn = set;\n\tif (onSet)\n\t\tsetFn = (v: boolean | ((prevState: boolean) => boolean)) =>\n\t\t{\n\t\t\tset(v);\n\t\t\tonSet();\n\t\t};\n\n\treturn {\n\t\tv,\n\t\tset: setFn,\n\t\tsetT: () => setFn(true),\n\t\tsetF: () => setFn(false),\n\t\ttoggle: () => setFn(v => !v),\n\t};\n}\n\nexport interface StateBool\n{\n\tv: boolean;\n\tset: React.Dispatch<React.SetStateAction<boolean>>;\n\tsetT: () => void;\n\tsetF: () => void;\n\ttoggle: () => void;\n}\n","export default function IconExit()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h240q17 0 28.5 11.5T480-800q0 17-11.5 28.5T440-760H200v560h240q17 0 28.5 11.5T480-160q0 17-11.5 28.5T440-120H200Zm487-320H400q-17 0-28.5-11.5T360-480q0-17 11.5-28.5T400-520h287l-75-75q-11-11-11-27t11-28q11-12 28-12.5t29 11.5l143 143q12 12 12 28t-12 28L669-309q-12 12-28.5 11.5T612-310q-11-12-10.5-28.5T613-366l74-74Z\"/>\n\t\t</svg>\n\t)\n}\n","export default function IconCode()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"m193-479 155 155q11 11 11 28t-11 28q-11 11-28 11t-28-11L108-452q-6-6-8.5-13T97-480q0-8 2.5-15t8.5-13l184-184q12-12 28.5-12t28.5 12q12 12 12 28.5T349-635L193-479Zm574-2L612-636q-11-11-11-28t11-28q11-11 28-11t28 11l184 184q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L668-268q-12 12-28 11.5T612-269q-12-12-12-28.5t12-28.5l155-155Z\"/>\n\t\t</svg>\n\t)\n}\n","export default function IconWidgets()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M638-468 468-638q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l170-170q6-6 13-8.5t15-2.5q8 0 15 2.5t13 8.5l170 170q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L694-468q-6 6-13 8.5t-15 2.5q-8 0-15-2.5t-13-8.5Zm-518-92v-240q0-17 11.5-28.5T160-840h240q17 0 28.5 11.5T440-800v240q0 17-11.5 28.5T400-520H160q-17 0-28.5-11.5T120-560Zm400 400v-240q0-17 11.5-28.5T560-440h240q17 0 28.5 11.5T840-400v240q0 17-11.5 28.5T800-120H560q-17 0-28.5-11.5T520-160Zm-400 0v-240q0-17 11.5-28.5T160-440h240q17 0 28.5 11.5T440-400v240q0 17-11.5 28.5T400-120H160q-17 0-28.5-11.5T120-160Zm80-440h160v-160H200v160Zm467 48 113-113-113-113-113 113 113 113Zm-67 352h160v-160H600v160Zm-400 0h160v-160H200v160Zm160-400Zm194-65ZM360-360Zm240 0Z\"/>\n\t\t</svg>\n\t)\n}\n","import { Link, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport avatar from \"./avatar.png\";\nimport IconHome from \"../../../icons/home\";\nimport classNames from \"../../../utils/classNames\";\nimport hasPermission from \"../../../api/operations\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport { useMutationLogout } from \"../../../api/auth\";\nimport useUser from \"../../../api/user\";\nimport Spinner from \"../../Spinner\";\nimport IconExit from \"../../../icons/exit\";\nimport IconCode from \"../../../icons/code\";\nimport IconWidgets from \"../../../icons/widgets\";\n\nexport default function SimpleHeader({ homeBtn = false }: SimpleHeaderProps)\n{\n\tconst menuOpen = useStateBool(false);\n\tconst navigate = useNavigate();\n\tconst logout = useMutationLogout(menuOpen.setF);\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={classNames(styles.root)}>\n\t\t\t<Link to={\"/\"} className={styles.home}>\n\t\t\t\t{homeBtn && <IconHome />}\n\t\t\t</Link>\n\t\t\t<div className={styles.gap}></div>\n\t\t\t<div>{user.data?.balance || 0}М</div>\n\t\t\t<button className={classNames(styles.user, \"clearBtn\")} onClick={() => user.data?.auth ? menuOpen.set(v => !v) : navigate(\"/\")}>\n\t\t\t\t<span>{user.data?.auth ? user.data?.name : \"Войти\"}</span>\n\t\t\t\t<img className={styles.img} src={user.data?.photo || avatar} alt=\"avatar\" />\n\t\t\t</button>\n\t\t\t<div className={classNames(styles.menu, menuOpen.v && styles.menuVisible)}>\n\t\t\t\t<Link to={\"/\"}><IconHome /></Link>\n\t\t\t\t{/* <button onClick={() => navigate(\"/profile\")}>\n\t\t\t\t\tПрофиль\n\t\t\t\t</button> */}\n\t\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\"><IconCode /></Link>}\n\t\t\t\t{hasPermission(user, \"page_worker\") && <Link to=\"/worker\"><IconWidgets /></Link>}\n\t\t\t\t<button className=\"clearBtn\" onClick={() => logout.mutate()} disabled={logout.status != \"idle\" && logout.status != \"error\"}>\n\t\t\t\t\t<IconExit />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t{logout.status == \"loading\" && <Spinner />}\n\t\t</div>\n\t);\n}\n\ninterface SimpleHeaderProps\n{\n\thomeBtn?: boolean\n}\n","import { Link, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport avatar from \"./avatar.png\";\nimport avatar_monster from \"./avatar/avatar_monster.png\";\nimport avatar_human from \"./avatar/avatar_human.png\";\nimport avatar_creator from \"./avatar/avatar_creator.png\";\nimport avatar_destroyer from \"./avatar/avatar_destroyer.png\";\nimport avatar_traveler from \"./avatar/avatar_traveler.png\";\nimport avatar_coolman from \"./avatar/avatar_coolman.png\";\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport classNames from \"../../utils/classNames\";\nimport hasPermission from \"../../api/operations\";\nimport IconHome from \"../../icons/home\";\nimport SimpleHeader from \"./SimpleHeader\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport IconExit from \"../../icons/exit\";\nimport IconCode from \"../../icons/code\";\nimport IconWidgets from \"../../icons/widgets\";\n\nexport default function Header({ homeBtn = false, forStaff = false, forDev = false }: HeaderProps)\n{\n\tconst menuOpen = useStateBool(false);\n\tconst navigate = useNavigate();\n\tconst logout = useMutationLogout(menuOpen.setF);\n\tconst user = useUser();\n\n\treturn (forStaff || forDev) ? <SimpleHeader homeBtn={homeBtn} /> :\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.menu}>\n\t\t\t\t<Link to={\"/\"} className={styles.home}>\n\t\t\t\t\t{homeBtn && <IconHome />}\n\t\t\t\t</Link>\n\t\t\t\t{menuOpen.v && <>\n\t\t\t\t\t<button className=\"clearBtn\" onClick={() => logout.mutate()} disabled={logout.status != \"idle\" && logout.status != \"error\"}>\n\t\t\t\t\t\t<IconExit />\n\t\t\t\t\t</button>\n\t\t\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\"><IconCode /></Link>}\n\t\t\t\t\t{hasPermission(user, \"page_worker\") && <Link to=\"/worker\"><IconWidgets /></Link>}\n\t\t\t\t</>}\n\t\t\t</div>\n\t\t\t<div className={styles.gap}></div>\n\t\t\t<div className={styles.text}>\n\t\t\t\t<div>{user.data?.name || \"Войти ->\"}</div>\n\t\t\t\t<div>{user.data?.balance} М</div>\n\t\t\t</div>\n\t\t\t<button className={classNames(styles.img, \"clearBtn\")} onClick={() => user.data?.auth ? menuOpen.set(v => !v) : navigate(\"/\")}>\n\t\t\t\t<img src={TTYPES[user.data?.ticketTId!] || avatar} alt=\"avatar\" />\n\t\t\t</button>\n\t\t\t{logout.status == \"loading\" && <Spinner />}\n\t\t</div>\n}\n\ninterface HeaderProps\n{\n\thomeBtn?: boolean\n\tforStaff?: boolean,\n\tforDev?: boolean,\n}\n\nconst TTYPES = {\n\t70: avatar_monster, //\"Монстр\"\n\t71: avatar_human, //\"Человек\"\n\t72: avatar_coolman, //\"Решительный человек\"\n\t73: avatar_traveler, //\"Путешественник по вселенным\"\n\t74: avatar_destroyer, //\"Разрушитель вселенных\"\n\t75: avatar_creator, //\"Создатель\"\n\t90: avatar, //\"Спец.Гость\"\n\t91: avatar, //\"Маркет\"\n\t92: avatar, //\"Участник\"\n\t94: avatar, //\"Пресса\"\n} as { [id: number]: string };\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"hasFooter\":\"styles_hasFooter__lMS3o\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport { useMetaColor } from \"../../utils/useMetaColor\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, forStaff = false, forDev = false, homeBtn = false, styles: el_styles, centered = false, centeredPage = false, height100 = false, gap = 0, header, footer }: LayoutProps)\n{\n\tuseMetaColor(forStaff ? \"#194659\" : forDev ? \"#1e1e1e\" : null);\n\tif (header === undefined) header = <Header homeBtn={homeBtn} forStaff={forStaff} forDev={forDev} />\n\n\treturn (\n\t\t<div className={classNames(styles.root, !!footer && styles.hasFooter)} style={{ ...el_styles, maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t\tforStaff && \"forStaff\",\n\t\t\t\t\tforDev && \"forDev\",\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t{footer}\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\tforStaff?: boolean,\n\tforDev?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n\tfooter?: React.ReactNode,\n\tstyles?: React.CSSProperties,\n\n\thomeBtn?: boolean\n}\n","import { useEffect } from \"react\"\n\nexport function useMetaColor(color: string | null)\n{\n\tuseEffect(() =>\n\t{\n\t\tif (!color) return;\n\n\t\tconst themeMetaColor = document.querySelector('meta[name=\"theme-color\"]');\n\t\tconst prevColor = themeMetaColor?.getAttribute(\"content\");\n\t\tthemeMetaColor?.setAttribute(\"content\", color);\n\n\t\treturn () => { if (prevColor) themeMetaColor?.setAttribute(\"content\", prevColor); }\n\t}, [color]);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостаточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__SWd3P\",\"back\":\"styles_back__uuJZO\",\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefix = \"Underparty\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefix, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefix]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import { useRef } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\tconst formRef = useRef<HTMLFormElement>(null);\n\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tref={formRef}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tif (!formRef.current) return;\n\n\t\t\t\tconst data = new FormData(formRef.current);\n\t\t\t\tonSubmit(data);\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: (data: FormData) => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\nimport { Link } from \"react-router-dom\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\" className={styles.root}>\n\t\t\t<Link to=\"/\" className={styles.back}></Link>\n\t\t\t<h2>Получено достижение!</h2>\n\t\t\t<h3>Вы не должны были это увидеть</h3>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__7P05R\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"hidden\":\"styles_hidden__eYJaf\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import { useEffect, useRef, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\", footer, closeOnOutclick = false }: CustomPopupProps)\n{\n\tconst ref = useRef<HTMLDivElement>(null)\n\tconst [isOpen, setIsOpen] = useState(open);\n\tconst [hidden, setHidden] = useState(!open);\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetHidden(false);\n\t\t\tconst timeout = setTimeout(() => setIsOpen(true), 100);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t\tsetIsOpen(false);\n\t\tconst timeout = setTimeout(() => setHidden(true), 250);\n\t\treturn () => clearTimeout(timeout);\n\t}, [open]);\n\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\tclassName={classNames(styles.root, isOpen && styles.open, hidden && styles.hidden)}\n\t\t\tonClick={e =>\n\t\t\t{\n\t\t\t\tif (closeOnOutclick && e.target == ref.current)\n\t\t\t\t\tclose?.();\n\t\t\t}}\n\t\t>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t{typeof title == \"string\" ? <h3>{title}</h3> : title}\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}></button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.footer}>\n\t\t\t\t\t{footer}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n\ttitle?: string | React.ReactNode,\n\tcloseOnOutclick?: boolean,\n\tfooter?: React.ReactNode,\n}\n\ntype CustomPopupProps = PopupProps & React.PropsWithChildren;","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\n\nexport default function DebugPage()\n{\n\tconst [log, setLog] = useState(\"\");\n\tconst [logTitle, setLogTitle] = useState(\"Log\");\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\tconst viewLog = (title: string, path: string) => async () =>\n\t{\n\t\tsetLogTitle(title)\n\t\tsetLog(\"Loading\");\n\t\ttry\n\t\t{\n\t\t\tconst res = await fetch(path);\n\t\t\tconst data = await res.text();\n\t\t\tsetLog(data);\n\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t}\n\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t}\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\" className={styles.root} homeBtn forDev>\n\t\t\t<Link to=\"/users\">Users</Link>\n\t\t\t<Link to=\"/log\">Log</Link>\n\t\t\t<button onClick={viewLog(\"Log errors\", \"/api/debug/log_errors\")}>Log errors</button>\n\t\t\t<button onClick={viewLog(\"Log info\", \"/api/debug/log_info\")}>Log info</button>\n\t\t\t<button onClick={viewLog(\"Log requests\", \"/api/debug/log_requests\")}>Log requests</button>\n\t\t\t<button onClick={viewLog(\"Log frontend\", \"/api/debug/log_frontend\")}>Log frontend</button>\n\t\t\t<Popup title={logTitle} open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__h8xNs\",\"auth\":\"styles_auth__quDS1\",\"logo\":\"styles_logo__2UaYh\",\"btn\":\"styles_btn__xIQ7b\"};","import { ImgData } from \"../api/dataTypes\";\n\nexport default async function imagefileToData(file: File, name: string)\n{\n\tconst imgBase64 = await new Promise((resolve: (a: { result: string | ArrayBuffer | null, error: string | DOMException | null }) => void) =>\n\t{\n\t\tvar reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", e =>\n\t\t{\n\t\t\tresolve({\n\t\t\t\tresult: reader.result,\n\t\t\t\terror: reader.error,\n\t\t\t});\n\t\t});\n\t\treader.readAsDataURL(file);\n\t});\n\tif (imgBase64.error)\n\t{\n\t\tconsole.error(imgBase64.error);\n\t\treturn null;\n\t}\n\treturn {\n\t\tdata: imgBase64.result,\n\t\tname,\n\t} as ImgData\n}","import { useState } from \"react\";\n\nexport default function useStateObj<S>(initialState: S | (() => S), onSet?: () => void): StateObj<S>\n{\n\tconst [v, set] = useState(initialState)\n\tif (onSet)\n\t\treturn {\n\t\t\tv, set: (v: S | ((prevState: S) => S)) =>\n\t\t\t{\n\t\t\t\tset(v);\n\t\t\t\tonSet();\n\t\t\t}\n\t\t};\n\treturn { v, set };\n}\n\nexport interface StateObj<S>\n{\n\tv: S;\n\tset: React.Dispatch<React.SetStateAction<S>>;\n}\n\nexport function useStateObjExt<S>(initialState: S | (() => S), onSet?: (v: S, pv: S) => void)\n{\n\tconst [v, set] = useState(initialState)\n\tif (onSet)\n\t\treturn {\n\t\t\tv, set: (v: S | ((prevState: S) => S), disableOnSet = false) =>\n\t\t\t{\n\t\t\t\tset(pv =>\n\t\t\t\t{\n\t\t\t\t\tconst nv = v instanceof Function ? v(pv) : v;\n\t\t\t\t\tif (!disableOnSet)\n\t\t\t\t\t\tonSet(nv, pv);\n\t\t\t\t\treturn nv;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\treturn { v, set };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__ek8XR\",\"open\":\"styles_open__DpDD1\",\"body\":\"styles_body__kj341\",\"msgWide\":\"styles_msgWide__xAoa-\",\"msg1\":\"styles_msg1__Ennl+\",\"msg2box\":\"styles_msg2box__jxXEx\",\"msg2\":\"styles_msg2__2yRTi\",\"msg_error\":\"styles_msg_error__92wvX\",\"msg_error_open\":\"styles_msg_error_open__6-pHY\",\"msg3\":\"styles_msg3__jxfL8\",\"openFile\":\"styles_openFile__Wzz+z\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__ggNxk\",\"small\":\"styles_small__zhXkP\",\"btn\":\"styles_btn__H2inm\",\"highlight\":\"styles_highlight__ALyIK\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Textbox({ children, btn = false, type2 = false, small = false, dark = false, highlight = false, className }: TextboxProps)\n{\n\treturn (\n\t\t<div className={classNames(styles.root, small && styles.small, btn && styles.btn, highlight && styles.highlight, className)}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\n\ninterface TextboxProps extends React.PropsWithChildren\n{\n\thighlight?: boolean;\n\tbtn?: boolean;\n\tsmall?: boolean;\n\tdark?: boolean;\n\ttype2?: boolean;\n\tclassName?: string;\n}\n","import { useMutationAuthByTicket } from \"../../api/auth\";\nimport classNames from \"../../utils/classNames\";\nimport imagefileToData from \"../../utils/imagefileToData\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport Spinner from \"../Spinner\";\nimport styles from \"./styles.module.css\"\nimport logo from \"./logo.png\";\nimport avatar from \"./avatar.png\";\nimport QrcodeDecoder from \"qrcode-decoder/dist/index\";\nimport Textbox from \"../Textbox\";\n\nexport default function AuthByTicket({ open }: AuthByTicketProps)\n{\n\tconst error = useStateObj(\"\");\n\tconst mutation = useMutationAuthByTicket(error.set);\n\n\treturn (\n\t\t<div className={classNames(styles.root, open && styles.open)}>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<div className={styles.body}>\n\t\t\t\t<Textbox className={styles.msgWide}>\n\t\t\t\t\t<div className={styles.msg1}>\n\t\t\t\t\t\t<img src={logo} alt=\"Инди кон\" />\n\t\t\t\t\t\t<span>Загрузка системы...</span>\n\t\t\t\t\t</div>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox type2 className={styles.msg2box}>\n\t\t\t\t\t<div className={styles.msg2}>\n\t\t\t\t\t\t<img src={avatar} alt=\"Avatar\" />\n\t\t\t\t\t\t<h2 className=\"title\">Админ</h2>\n\t\t\t\t\t\t<span>текст</span>\n\t\t\t\t\t</div>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox type2 className={classNames(styles.msg2box, styles.msg_error, error.v && styles.msg_error_open)}>\n\t\t\t\t\t<div className={styles.msg2}>\n\t\t\t\t\t\t<img src={avatar} alt=\"Avatar\" />\n\t\t\t\t\t\t<h2 className=\"title\">Админ</h2>\n\t\t\t\t\t\t<span>В доступе отказано! {error.v}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox className={classNames(styles.msg3, styles.msgWide)}>\n\t\t\t\t\t<label className={styles.openFile}>\n\t\t\t\t\t\t<div className=\"title\">Загрузить билет</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\t\taccept=\"image/png, image/jpeg, image/gif\"\n\t\t\t\t\t\t\tdisabled={mutation.isLoading}\n\t\t\t\t\t\t\tonChange={async e =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terror.set(\"\");\n\t\t\t\t\t\t\t\tconst imgData = await imagefileToData(e.target?.files?.[0]!, \"\")\n\t\t\t\t\t\t\t\te.target.value = \"\";\n\t\t\t\t\t\t\t\tif (!imgData) return;\n\n\t\t\t\t\t\t\t\tconst qr = new QrcodeDecoder();\n\t\t\t\t\t\t\t\tconst r = await qr.decodeFromImage(imgData.data);\n\t\t\t\t\t\t\t\tconst code = r?.data;\n\t\t\t\t\t\t\t\tif (!code || !code.match(/\\d+-\\d+-\\d+-\\d+-\\d+/))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\terror.set(\"Изображение не содержит QR-кода или он некорректный.\");\n\t\t\t\t\t\t\t\t\tfetch(\"/api/auth_ticket_err\", {method: \"POST\"})\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmutation.mutate({ code });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</label>\n\t\t\t\t</Textbox>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface AuthByTicketProps\n{\n\topen: boolean;\n}\n","import styles from \"./styles.module.css\"\nimport logo from \"./logo.png\";\nimport btn from \"./btn.png\";\nimport { Link } from \"react-router-dom\";\nimport AuthByTicket from \"../../components/AuthByTicket\";\nimport useStateBool from \"../../utils/useStateBool\";\n\nexport default function IndexPage()\n{\n\tconst authOpen = useStateBool(false);\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<Link to=\"/auth\" className={styles.auth} />\n\t\t\t<div></div>\n\t\t\t<img className={styles.logo} src={logo} alt=\"Инди кон\" />\n\t\t\t<button className={styles.btn} onClick={authOpen.setT}>\n\t\t\t\t<img src={btn} alt=\"Вход\" />\n\t\t\t</button>\n\t\t\t<AuthByTicket open={authOpen.v} />\n\t\t</div>\n\t);\n}\n","import { useQuery, useQueryClient } from \"react-query\";\nimport { Modify } from \"./dataTypes\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\nexport function useLog(page = 0)\n{\n\tconst queryClient = useQueryClient();\n\tconst fn = async (p: number) =>\n\t\t(await fetchJsonGet<LogItemResponse[]>(`/api/debug/log?p=${p}`)).map(parseLogResponse);\n\tqueryClient.prefetchQuery([\"log\", page - 1], () => fn(page - 1));\n\tqueryClient.prefetchQuery([\"log\", page + 1], () => fn(page + 1));\n\treturn useQuery([\"log\", page], () => fn(page));\n}\n\nexport function useLogCacheClear()\n{\n\tconst queryClient = useQueryClient();\n\treturn () =>\n\t{\n\t\tqueryClient.removeQueries(\"log\");\n\t\tqueryClient.invalidateQueries(\"logLen\");\n\t}\n}\n\nexport function useLogLen()\n{\n\treturn useQuery(\"logLen\", async () =>\n\t\tawait fetchJsonGet<LogLenResponse>(\"/api/debug/log_len\")\n\t);\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n\nexport interface LogLenResponse\n{\n\tlen: number,\n}\n","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false)\n{\n\tif (!date) return \"\";\n\tif (reverse)\n\t\treturn `${date.getFullYear()}.${padNum(date.getMonth() + 1, 2)}.${padNum(date.getDate(), 2)}`;\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"btns\":\"styles_btns__aRipu\",\"table\":\"styles_table__QLr-h\",\"changesCell\":\"styles_changesCell__0wQDJ\",\"changes\":\"styles_changes__EyS9f\",\"btn\":\"styles_btn__H7b72\"};","import { LogItem, useLog, useLogCacheClear, useLogLen } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst clearCache = useLogCacheClear();\n\tconst page = useStateObj(0);\n\tconst log = useLog(page.v);\n\tconst logLen = useLogLen().data?.len ?? 0;\n\n\treturn <Layout centeredPage homeBtn forDev>\n\t\t{displayError(log)}\n\t\t<div className={styles.btns}>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => { clearCache(); page.set(0); log.refetch(); }}>Update</button>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => page.set(0)}>&lt;&lt;</button>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => page.set(p => Math.max(p - 1, 0))}>&lt;</button>\n\t\t\t<span>{page.v + 1}/{logLen}</span>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => page.set(p => Math.min(p + 1, logLen - 1))}>&gt;</button>\n\t\t\t<button disabled={log.isFetching} className=\"button button_small\" onClick={() => page.set(logLen - 1)}>&gt;&gt;</button>\n\t\t</div>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ minWidth: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changesCell}>\n\t\t\t\t\t\t<div className={styles.changes}>\n\t\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.changes.map(v => <div key={v[0]}>{v[0]}: {JSON.stringify(v[1])} {\"->\"} {JSON.stringify(v[2])}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t\t<label className={styles.btn} htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","import type { QueryClient, QueryKey } from \"react-query\";\n\nexport function queryStrKey(queryKey: QueryKey)\n{\n\treturn queryKey instanceof Array ? queryKey.map(v => `${v}`) : `${queryKey}`;\n}\n\nexport function queryInvalidate(queryClient: QueryClient, queryKey: QueryKey)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tqueryClient.invalidateQueries(queryKey, { exact: true });\n}\n\nexport function queryListAddItem<T>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? [...items, item] : [item]);\n}\n\nexport function queryListUpdateItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, item: T)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items?.map(v => v.id == item.id ? item : v) || []);\n}\n\nexport function queryListDeleteItem<T extends ObjWithId>(queryClient: QueryClient, queryKey: QueryKey, itemId: number | string)\n{\n\tqueryKey = queryStrKey(queryKey);\n\tif (queryClient.getQueryState(queryKey)?.status == \"success\")\n\t\tqueryClient.setQueryData(queryKey, (items?: T[]) => items ? items.filter(v => v.id != itemId) : []);\n}\n\ninterface ObjWithId\n{\n\tid: number | string,\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost, fetchPost } from \"../utils/fetch\";\nimport type { GameDialogData } from \"./dialog\";\nimport { queryInvalidate, queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\nexport interface Quest\n{\n\tid: number,\n\tname: string,\n\tdescription: string,\n\treward: number,\n\tcompleted: boolean,\n\tdialogId: number | null,\n\topened: boolean,\n}\n\nexport interface QuestFull\n{\n\tid: number,\n\tid_big: string,\n\tname: string,\n\tdescription: string,\n\treward: number,\n\thidden: boolean,\n\tdialog1Id: number | null,\n\tdialog2Id: number | null,\n}\n\nexport function useQuests()\n{\n\treturn useQuery(\"quests\", async () =>\n\t\tawait fetchJsonGet<Quest[]>(\"/api/quests\")\n\t);\n}\n\nexport function useQuestsFull()\n{\n\treturn useQuery(\"quests_full\", async () =>\n\t\tawait fetchJsonGet<QuestFull[]>(\"/api/quests_full\")\n\t);\n}\n\n\nexport function useMutationAddQuest(onSuccess?: (data: QuestFull) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (questData: QuestData) =>\n\t\t\tawait fetchJsonPost<QuestFull>(\"/api/quest\", questData),\n\t\tonSuccess: (data: QuestFull) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"quests_full\", data);\n\t\t\tqueryInvalidate(queryClient, \"quests\");\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport interface QuestData\n{\n\tname: string,\n\tdescription: string,\n\treward: number,\n\thidden: boolean,\n\tdialog1?: GameDialogData | false,\n\tdialog2?: GameDialogData | false,\n}\n\nexport function useMutationEditQuest(questId: number, onSuccess?: (data: QuestFull) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (questData: QuestData) =>\n\t\t\tawait fetchJsonPost<QuestFull>(`/api/quest/${questId}`, questData),\n\t\tonSuccess: (data: QuestFull) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"quests_full\", data);\n\t\t\tqueryInvalidate(queryClient, \"quests\");\n\t\t\tqueryInvalidate(queryClient, [\"dialogs\", data.dialog1Id]);\n\t\t\tqueryInvalidate(queryClient, [\"dialogs\", data.dialog2Id]);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationDeleteQuest(questId: number, onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(`/api/quest/${questId}`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"quests_full\", questId);\n\t\t\tqueryInvalidate(queryClient, \"quests\");\n\t\t\tonSuccess?.();\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\n\nexport function useMutationOpenQuest(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (questId: number) =>\n\t\t\tawait fetchPost(`/api/quest/${questId}/open`),\n\t\tonSuccess,\n\t\tonError,\n\t});\n\treturn mutation;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport type { ImgData } from \"./dataTypes\";\n\nexport interface Dialog\n{\n\tid: number;\n\tdata: GameDialogData;\n}\nexport interface GameDialogData\n{\n\tnodes: GameDialogNode[];\n}\nexport interface GameDialogNode\n{\n\tcharacterId: number;\n\ttext: string;\n}\n\nexport interface GameDialogCharacter\n{\n\tid: number;\n\tname: string;\n\timg: string;\n\torien: number;\n}\nexport type GameDialogCharacterData = { [id: number]: GameDialogCharacter; };\n\nexport function createEmptyDialog(): GameDialogData\n{\n\treturn {\n\t\tnodes: [],\n\t}\n}\nexport function createEmptyDialogNode(): GameDialogNode\n{\n\treturn {\n\t\tcharacterId: 1,\n\t\ttext: \"\",\n\t}\n}\n\nexport function createEmptyCharacter(id: number): GameDialogCharacter\n{\n\treturn {\n\t\tid,\n\t\tname: \"\",\n\t\timg: \"\",\n\t\torien: 1,\n\t}\n}\n\nexport function useDialog(dialogId: number, autoEnabled = true)\n{\n\treturn useQuery([\"dialogs\", `${dialogId}`], async () =>\n\t\tawait fetchJsonGet<Dialog>(`/api/dialog/${dialogId}`),\n\t\t{ enabled: autoEnabled && dialogId >= 0 }\n\t);\n}\n\nexport function useMutationEditDialog(dialogId: number, onSuccess?: (data: Dialog) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (dialogData: DialogData) =>\n\t\t\tawait fetchJsonPost<Dialog>(`/api/dialog/${dialogId}`, dialogData),\n\t\tonSuccess: (data: Dialog) =>\n\t\t{\n\t\t\tqueryClient.setQueryData([\"dialogs\", `${dialogId}`], data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\nexport interface DialogData\n{\n\tdata: GameDialogData;\n}\n\nexport function useDialogCharacters()\n{\n\treturn useQuery([\"dialogCharacters\"], async () =>\n\t{\n\t\tconst data = await fetchJsonGet<GameDialogCharacter[]>(`/api/dialog/characters`);\n\t\tconst characters = {} as GameDialogCharacterData;\n\t\tdata.forEach(v => characters[v.id] = v);\n\t\treturn characters;\n\t});\n}\n\nexport function useMutationAddCharacter(onSuccess?: (data: GameDialogCharacter) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (characterData: CharacterData) =>\n\t\t\tawait fetchJsonPost<GameDialogCharacter>(\"/api/dialog/character\", characterData),\n\t\tonSuccess: (data: GameDialogCharacter) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"dialogCharacters\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"dialogCharacters\", (characters?: GameDialogCharacterData) =>\n\t\t\t\t{\n\t\t\t\t\tcharacters = characters || {};\n\t\t\t\t\tcharacters[data.id] = data;\n\t\t\t\t\treturn characters;\n\t\t\t\t});\n\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport interface CharacterData\n{\n\tname: string;\n\timg?: ImgData;\n\torien: number;\n}\n\nexport function useMutationEditCharacter(characterId: number, onSuccess?: (data: GameDialogCharacter) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (characterData: CharacterData) =>\n\t\t\tawait fetchJsonPost<GameDialogCharacter>(`/api/dialog/character/${characterId}`, characterData),\n\t\tonSuccess: (data: GameDialogCharacter) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"dialogCharacters\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"dialogCharacters\", (characters?: GameDialogCharacterData) =>\n\t\t\t\t{\n\t\t\t\t\tcharacters = characters || {};\n\t\t\t\t\tcharacters[data.id] = data;\n\t\t\t\t\treturn characters;\n\t\t\t\t});\n\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationDeleteCharacter(characterId: number, onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(`/api/dialog/character/${characterId}`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"dialogCharacters\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"dialogCharacters\", (characters?: GameDialogCharacterData) =>\n\t\t\t\t{\n\t\t\t\t\tcharacters = characters || {};\n\t\t\t\t\tdelete characters[characterId];\n\t\t\t\t\treturn characters;\n\t\t\t\t});\n\n\t\t\tonSuccess?.();\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n","import { useEffect } from \"react\";\nimport { useDialogCharacters } from \"../../api/dialog\";\n\nexport default function usePreloadGameDialogImgs()\n{\n\tconst characters = useDialogCharacters();\n\tuseEffect(() =>\n\t{\n\t\tif (!characters.data) return;\n\t\tconst els = Object.values(characters.data).map(v =>\n\t\t{\n\t\t\tconst el = document.createElement(\"link\");\n\t\t\tel.rel = \"preload\";\n\t\t\tel.href = v.img;\n\t\t\tel.as = \"image\";\n\t\t\tdocument.head.appendChild(el);\n\t\t\treturn el;\n\t\t});\n\t\treturn () =>\n\t\t{\n\t\t\tels.forEach(el => document.head.removeChild(el))\n\t\t}\n\t}, [characters.data]);\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__oNkfm\",\"img\":\"styles_img__46Cxj\",\"textarea\":\"styles_textarea__sNjzZ\",\"description_count\":\"styles_description_count__Nnz4M\",\"description_count_too_many\":\"styles_description_count_too_many__udmKa\",\"form\":\"styles_form__EJp7b\"};","import { useRef } from \"react\";\nimport { Form, FormField } from \"../../../components/Form\"\nimport Popup from \"../../../components/Popup\"\nimport Spinner from \"../../../components/Spinner\";\nimport displayError from \"../../../utils/displayError\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAddQuest } from \"../../../api/quest\";\nimport useStateObj from \"../../../utils/useStateObj\";\n\nexport default function AddQuest()\n{\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst rewardRef = useRef<HTMLInputElement>(null);\n\tconst hiddenRef = useRef<HTMLInputElement>(null);\n\tconst description = useStateObj(\"\");\n\tconst popupOpen = useStateBool(false);\n\tconst mutationAdd = useMutationAddQuest(() =>\n\t{\n\t\tpopupOpen.setF();\n\t\tif (nameRef.current)\n\t\t\tnameRef.current.value = \"\";\n\t\tif (rewardRef.current)\n\t\t\trewardRef.current.value = \"\";\n\t\tif (hiddenRef.current)\n\t\t\thiddenRef.current.checked = false;\n\t\tdescription.set(\"\");\n\t});\n\n\treturn <>\n\t\t<button className={styles.root} onClick={popupOpen.setT}>Добавить</button>\n\t\t<Popup title=\"Добавление квеста\" open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t{mutationAdd.isLoading && <Spinner />}\n\t\t\t{displayError(mutationAdd)}\n\t\t\t<Form\n\t\t\t\tclassName={styles.form}\n\t\t\t\tonSubmit={() =>\n\t\t\t\t{\n\t\t\t\t\tconst name = nameRef.current?.value;\n\t\t\t\t\tconst reward = rewardRef.current?.valueAsNumber;\n\t\t\t\t\tconst hidden = hiddenRef.current?.checked;\n\t\t\t\t\tif (name && reward !== undefined && hidden !== undefined)\n\t\t\t\t\t\tmutationAdd.mutate({\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\treward,\n\t\t\t\t\t\t\thidden,\n\t\t\t\t\t\t\tdescription: description.v,\n\t\t\t\t\t\t})\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={nameRef} required type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Награда\">\n\t\t\t\t\t<input ref={rewardRef} required type=\"number\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t<input ref={hiddenRef} type=\"checkbox\" />\n\t\t\t\t\t\t<span>Скрытый</span>\n\t\t\t\t\t</label>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Описание\">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tclassName={styles.textarea}\n\t\t\t\t\t\tcols={40}\n\t\t\t\t\t\trows={10}\n\t\t\t\t\t\tvalue={description.v}\n\t\t\t\t\t\tonChange={inp => description.set(inp.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className={styles.description_count}>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<span className={description.v.length > 256 ? styles.description_count_too_many : \"\"}>{description.v.length}</span>\n\t\t\t\t\t\t\t<span>/256</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField>\n\t\t\t\t\t<button type=\"submit\">Добавить</button>\n\t\t\t\t</FormField>\n\t\t\t</Form>\n\t\t</Popup>\n\t</>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__WvdMz\",\"body\":\"styles_body__1LPvJ\",\"selectName\":\"styles_selectName__u7s4v\",\"textarea\":\"styles_textarea__GqFav\",\"buttons\":\"styles_buttons__9yTCF\",\"btnUp\":\"styles_btnUp__nrklw\",\"btnDown\":\"styles_btnDown__V5tHT\",\"btnPlus\":\"styles_btnPlus__oBVqe\",\"doubleBtn\":\"styles_doubleBtn__WET5a\"};","export default function IconDelete()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z\" />\n\t\t</svg>\n\t)\n}\n","import { useEffect } from \"react\";\nimport { useDialogCharacters, type GameDialogNode } from \"../../../api/dialog\";\nimport { useStateObjExt } from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport IconDelete from \"../../../icons/delete\";\n\nexport default function DialogNode({ data, deleteNode, moveUp, addUp, moveDown, addDown }: NodeProps)\n{\n\tconst characters = useDialogCharacters();\n\tconst characterId = useStateObjExt(data.characterId, v => data.characterId = v);\n\tconst text = useStateObjExt(data.text, v => data.text = v);\n\n\tconst character = characters.data?.[characterId.v];\n\n\tuseEffect(() =>\n\t{\n\t\tcharacterId.set(data.characterId);\n\t\ttext.set(data.text);\n\t\t// eslint-disable-next-line\n\t}, [data]);\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<img src={character?.img} alt={character?.name} />\n\t\t\t<div className={styles.body}>\n\t\t\t\t<select className={styles.selectName} value={characterId.v} onChange={e => characterId.set(parseInt(e.target.value, 10))}>\n\t\t\t\t\t{Object.values(characters.data || {}).map(v => <option key={v.id} value={v.id}>{v.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t<textarea\n\t\t\t\t\tclassName={styles.textarea}\n\t\t\t\t\tplaceholder=\"Речь персонажа\"\n\t\t\t\t\tvalue={text.v}\n\t\t\t\t\tonChange={e => text.set(e.target.value)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t<span className={styles.doubleBtn}>\n\t\t\t\t\t<button className={styles.btnUp} onClick={moveUp}></button>\n\t\t\t\t\t<button className={styles.btnPlus} onClick={addUp}></button>\n\t\t\t\t</span>\n\t\t\t\t<button onClick={deleteNode}><IconDelete /></button>\n\t\t\t\t<span className={styles.doubleBtn}>\n\t\t\t\t\t<button className={styles.btnPlus} onClick={addDown}></button>\n\t\t\t\t\t<button className={styles.btnDown} onClick={moveDown}></button>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface NodeProps\n{\n\tdata: GameDialogNode;\n\tdeleteNode: () => void;\n\tmoveUp: () => void;\n\tmoveDown: () => void;\n\taddUp: () => void;\n\taddDown: () => void;\n}","export default function IconCancel()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z\" />\n\t\t</svg>\n\t)\n}\n","export default function IconSave()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z\" />\n\t\t</svg>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__CDE3U\",\"error\":\"styles_error__6s3zt\",\"img\":\"styles_img__Thun3\",\"id\":\"styles_id__pa79Q\",\"inputs\":\"styles_inputs__7ickr\",\"changed\":\"styles_changed__s9MgQ\",\"buttons\":\"styles_buttons__T7wSY\",\"select\":\"styles_select__rEXhG\"};","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"styles_button__MKylh\"};","import styles from \"./styles.module.css\"\nimport { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport { Form } from \"../Form\";\nimport Popup, { PopupProps } from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport { useEffect } from \"react\";\n\nexport default function PopupConfirm<T, TE, K>({ title, mutationFn, mutatateParams, itemId, onSuccess, onError, open, close }: PopupConfirmProps<T, TE, K>)\n{\n\tconst mutation = mutationFn(itemId, (item: any) =>\n\t{\n\t\tclose?.();\n\t\tonSuccess?.(item);\n\t}, onError);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!open)\n\t\t\tmutation.reset();\n\t\t// eslint-disable-next-line\n\t}, [open]);\n\n\treturn (\n\t\t<Popup open={open} close={close} title=\"Вы уверены?\" closeOnOutclick>\n\t\t\t{displayError(mutation)}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form onSubmit={() =>\n\t\t\t{\n\t\t\t\tmutation.mutate(mutatateParams!);\n\t\t\t}}>\n\t\t\t\t{typeof title == \"string\" ? <h2>{title}</h2> : title}\n\t\t\t\t<button type=\"submit\" className={styles.button}>Подтвердить</button>\n\t\t\t</Form>\n\t\t</Popup>\n\t);\n}\n\ninterface PopupConfirmProps<T, TE, K> extends PopupProps\n{\n\tmutationFn: (itemId: number, onSuccess: (item: T | void) => void, onError?: (err: TE) => void) => UseMutationResult<T, TE, K, any>,\n\tmutatateParams?: K,\n\titemId: number,\n\ttitle: string | React.ReactNode,\n\tonSuccess?: (item: T) => void,\n\tonError?: (err: TE) => void,\n}\n","import { useEffect } from \"react\";\nimport { useMutationAddCharacter, useMutationDeleteCharacter, useMutationEditCharacter, type GameDialogCharacter } from \"../../../../api/dialog\";\nimport IconCancel from \"../../../../icons/cancel\";\nimport IconDelete from \"../../../../icons/delete\";\nimport IconSave from \"../../../../icons/save\";\nimport classNames from \"../../../../utils/classNames\";\nimport useStateBool from \"../../../../utils/useStateBool\";\nimport useStateObj from \"../../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport PopupConfirm from \"../../../PopupConfirm\";\nimport Spinner from \"../../../Spinner\";\nimport displayError from \"../../../../utils/displayError\";\nimport type { ImgData } from \"../../../../api/dataTypes\";\nimport imagefileToData from \"../../../../utils/imagefileToData\";\n\nexport default function Character({ character, deleteNew }: CharacterProps)\n{\n\tconst changed = useStateBool(false);\n\tconst deleting = useStateBool(false);\n\tconst id = useStateObj(character.id);\n\tconst name = useStateObj(character.name, changed.setT);\n\tconst imgData = useStateObj<ImgData | null>(null, changed.setT);\n\tconst orien = useStateObj(character.orien, changed.setT);\n\n\tconst mutationAdd = useMutationAddCharacter(deleteNew);\n\tconst mutationEdit = useMutationEditCharacter(id.v, reset, () => reset());\n\n\t// eslint-disable-next-line\n\tuseEffect(reset, [character])\n\n\tfunction reset(newCharacter?: GameDialogCharacter)\n\t{\n\t\tconst data = newCharacter || character;\n\t\tid.set(data.id);\n\t\tname.set(data.name);\n\t\torien.set(data.orien);\n\t\tchanged.setF();\n\t}\n\n\treturn (\n\t\t<div className={classNames(styles.root, changed.v && styles.changed)}>\n\t\t\t{mutationAdd.isLoading && <Spinner block r=\"0.5rem\" />}\n\t\t\t{displayError(mutationAdd, err => <div className={styles.error}>\n\t\t\t\t<div>{err}</div>\n\t\t\t\t<button onClick={() => mutationAdd.reset()}>ОК</button>\n\t\t\t</div>)}\n\t\t\t{mutationEdit.isLoading && <Spinner block r=\"0.5rem\" />}\n\t\t\t{displayError(mutationEdit, err => <div className={styles.error}>\n\t\t\t\t<div>{err}</div>\n\t\t\t\t<button onClick={() => mutationEdit.reset()}>ОК</button>\n\t\t\t</div>)}\n\n\t\t\t<PopupConfirm title={\"Удалить персонажа: \" + name.v} itemId={character.id} mutationFn={useMutationDeleteCharacter} open={deleting.v} close={deleting.setF} />\n\t\t\t<div className={styles.id}>{character.id}</div>\n\t\t\t<label className={styles.img}>\n\t\t\t\t{(character.img || imgData.v) && <img src={imgData.v?.data || character.img} alt=\"Картинка\" />}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\taccept=\"image/png, image/jpeg, image/gif\"\n\t\t\t\t\tonChange={async e =>\n\t\t\t\t\t{\n\t\t\t\t\t\timgData.set({ data: \"\", name: \"\" });\n\t\t\t\t\t\timgData.set(await imagefileToData(e.target?.files?.[0]!, \"\"));\n\t\t\t\t\t\te.target.value = \"\";\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<div className={styles.inputs}>\n\t\t\t\t<div>Имя</div>\n\t\t\t\t<input type=\"text\" value={name.v} onChange={inp => name.set(inp.target.value)} />\n\t\t\t\t<span>Ориен</span>\n\t\t\t\t<select className={styles.select} value={orien.v} onChange={e => orien.set(parseInt(e.target.value, 10))}>\n\t\t\t\t\t<option value={0}>Слева</option>\n\t\t\t\t\t<option value={2}>Центр</option>\n\t\t\t\t\t<option value={1}>Справа</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t{id.v > 0 ? <>\n\t\t\t\t\t{!changed.v && <button onClick={deleting.setT}><IconDelete /></button>}\n\t\t\t\t\t{changed.v && <button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmutationEdit.mutate({\n\t\t\t\t\t\t\t\tname: name.v,\n\t\t\t\t\t\t\t\timg: imgData.v || undefined,\n\t\t\t\t\t\t\t\torien: orien.v,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconSave />\n\t\t\t\t\t</button>}\n\t\t\t\t\t{changed.v && <button onClick={() => reset()}><IconCancel /></button>}\n\t\t\t\t</> : <>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmutationAdd.mutate({\n\t\t\t\t\t\t\t\tname: name.v,\n\t\t\t\t\t\t\t\timg: imgData.v || undefined,\n\t\t\t\t\t\t\t\torien: orien.v,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconSave />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={deleteNew}><IconDelete /></button>\n\t\t\t\t</>}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface CharacterProps\n{\n\tcharacter: GameDialogCharacter;\n\tdeleteNew?: () => void,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__qIedB\",\"addBtn\":\"styles_addBtn__Ci3v5\",\"characters\":\"styles_characters__rMIjG\"};","import { createEmptyCharacter, useDialogCharacters, type GameDialogCharacter, type GameDialogCharacterData } from \"../../../api/dialog\";\nimport displayError from \"../../../utils/displayError\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport Popup from \"../../Popup\";\nimport Spinner from \"../../Spinner\";\nimport Character from \"./Character\";\nimport styles from \"./styles.module.css\"\n\nexport default function ManageCharacters()\n{\n\tconst popupOpen = useStateBool(false);\n\tconst characters = useDialogCharacters();\n\tconst charactersNew = useStateObj<GameDialogCharacterData>({});\n\tconst lastId = useStateObj(1);\n\n\treturn <>\n\t\t<button className={styles.root} onClick={popupOpen.setT}>Управление персонажами</button>\n\t\t<Popup title=\"Управление персонажами\" open={popupOpen.v} close={popupOpen.setF}\n\t\t\tfooter={\n\t\t\t\t<button className={styles.addBtn} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tcharactersNew.set(v =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconst nv = { ...v };\n\t\t\t\t\t\tnv[-lastId.v] = createEmptyCharacter(-lastId.v);\n\t\t\t\t\t\tlastId.set(v => v + 1);\n\t\t\t\t\t\treturn nv;\n\t\t\t\t\t})\n\t\t\t\t}}>Добавить</button>\n\t\t\t}\n\t\t>\n\t\t\t{characters.isLoading && <Spinner />}\n\t\t\t{displayError(characters)}\n\t\t\t{characters.isSuccess && <>\n\t\t\t\t<div className={styles.characters}>\n\t\t\t\t\t{Object.values<GameDialogCharacter>(characters.data)\n\t\t\t\t\t\t.map(v => <Character key={v.id} character={v} />)\n\t\t\t\t\t}\n\t\t\t\t\t{Object.values(charactersNew.v)\n\t\t\t\t\t\t.map(v => <Character key={v.id} character={v}\n\t\t\t\t\t\t\tdeleteNew={() =>\n\t\t\t\t\t\t\t\tcharactersNew.set(V =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdelete V[v.id];\n\t\t\t\t\t\t\t\t\treturn { ...V };\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>)\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</>}\n\t\t</Popup >\n\t</>;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__6dYbo\",\"close\":\"styles_close__T2XDu\",\"body\":\"styles_body__-c4ky\",\"nodes\":\"styles_nodes__0Che8\",\"addBtn\":\"styles_addBtn__bt4O2\"};","import { createEmptyDialogNode, useDialogCharacters, type GameDialogData } from \"../../api/dialog\";\nimport displayError from \"../../utils/displayError\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport Spinner from \"../Spinner\";\nimport DialogNode from \"./DialogNode\";\nimport ManageCharacters from \"./ManageCharacters\";\nimport styles from \"./styles.module.css\"\n\nexport default function useGameDialogEditor(onClose?: (() => void))\n{\n\tconst update = useStateObj(0);\n\tconst editor = useStateObj({\n\t\t_data: null as null | GameDialogData,\n\t\t_onClose: undefined as (() => void) | undefined,\n\t\t_onCloseMain: undefined as (() => void) | undefined,\n\t\tel: () => editor.v._data ? <GameDialogEditor data={editor.v._data} close={editor.v.close} /> : <></>,\n\t\topen: (data: GameDialogData, onClose?: () => void) =>\n\t\t\teditor.set(v =>\n\t\t\t{\n\t\t\t\tv._data = data;\n\t\t\t\tv._onClose = onClose;\n\t\t\t\treturn v;\n\t\t\t}),\n\t\tclose: () =>\n\t\t\teditor.set(v =>\n\t\t\t{\n\t\t\t\tif (!v._data) return v;\n\t\t\t\tv._data = null;\n\t\t\t\tv._onClose?.();\n\t\t\t\tv._onCloseMain?.();\n\t\t\t\treturn v;\n\t\t\t}),\n\t}, () => update.set(v => v + 1));\n\teditor.v._onCloseMain = onClose;\n\n\treturn editor.v;\n}\n\nfunction GameDialogEditor({ data, close }: GameDialogEditorProps)\n{\n\tconst characters = useDialogCharacters();\n\tconst update = useStateBool(false);\n\n\tfunction moveNode(fromI: number, toI: number)\n\t{\n\t\tif (toI < 0) return;\n\t\tdata.nodes.splice(toI, 0, data.nodes.splice(fromI, 1)[0]);\n\t\tupdate.toggle();\n\t}\n\tfunction addNode(toI: number)\n\t{\n\t\tdata.nodes.splice(toI, 0, createEmptyDialogNode());\n\t\tupdate.toggle();\n\t}\n\tfunction deleteNode(i: number)\n\t{\n\t\tdata.nodes.splice(i, 1);\n\t\tupdate.toggle();\n\t}\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t{characters.isLoading && <Spinner />}\n\t\t\t{displayError(characters)}\n\t\t\t<button className={styles.close} onClick={close}></button>\n\t\t\t<div className={styles.body}>\n\t\t\t\t<h1>Редактирование диалога</h1>\n\t\t\t\t<ManageCharacters />\n\t\t\t\t<div className={styles.nodes}>\n\t\t\t\t\t{data.nodes.map((v, i) => <DialogNode\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdata={v}\n\t\t\t\t\t\tdeleteNode={() => deleteNode(i)}\n\t\t\t\t\t\tmoveUp={() => moveNode(i, i - 1)}\n\t\t\t\t\t\tmoveDown={() => moveNode(i, i + 1)}\n\t\t\t\t\t\taddUp={() => addNode(i)}\n\t\t\t\t\t\taddDown={() => addNode(i + 1)}\n\t\t\t\t\t/>)}\n\t\t\t\t</div>\n\t\t\t\t<button className={styles.addBtn} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\tdata.nodes.push(createEmptyDialogNode());\n\t\t\t\t\tupdate.toggle();\n\t\t\t\t}}>Добавить реплику</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface GameDialogEditorProps\n{\n\tdata: GameDialogData;\n\tclose: () => void;\n}\n","export default function copyObj<T>(obj: T): T\n{\n\treturn JSON.parse(JSON.stringify(obj));\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Ahfmg\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__H6WP2\",\"close\":\"styles_close__LpN36\",\"img\":\"styles_img__lP65O\",\"img_right\":\"styles_img_right__KYI0+\",\"img_center\":\"styles_img_center__lkowo\",\"dialog_container\":\"styles_dialog_container__rAyPs\",\"dialog\":\"styles_dialog__9ovTV\",\"dialog__title\":\"styles_dialog__title__yj+t3\",\"dialog__body\":\"styles_dialog__body__HiqPJ\",\"dialog__text\":\"styles_dialog__text__gX-Zr\",\"dialog__btns\":\"styles_dialog__btns__n6R2J\",\"dialog__next\":\"styles_dialog__next__jEXew\",\"dialog__prev\":\"styles_dialog__prev__EqKdl\"};","import { useEffect, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useDialog, useDialogCharacters, type GameDialogCharacter, type GameDialogData } from \"../../api/dialog\";\nimport Spinner from \"../Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport type { UseQueryResult } from \"react-query\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function useGameDialog()\n{\n\tconst characters = useDialogCharacters();\n\tconst update = useStateObj(0);\n\tconst dialog = useStateObj({\n\t\t_data: null as GameDialogData | null,\n\t\t_dialogId: -1,\n\t\t_characters: characters,\n\t\t_onClose: undefined as ((dialogId: number) => void) | undefined,\n\t\tel: () => dialog.v._data ?\n\t\t\t<GameDialog data={dialog.v._data} close={dialog.v.close} characters={dialog.v._characters} /> :\n\t\t\tdialog.v._dialogId >= 0 ?\n\t\t\t\t<GameDialogWithLoader dialogId={dialog.v._dialogId} close={dialog.v.close} characters={dialog.v._characters} /> :\n\t\t\t\t<></>,\n\t\trun: (dialogId: number, onClose?: (dialogId: number) => void) =>\n\t\t\tdialog.set(v =>\n\t\t\t{\n\t\t\t\tv._dialogId = dialogId;\n\t\t\t\tv._onClose = onClose;\n\t\t\t\treturn v;\n\t\t\t}),\n\t\trunLocal: (data: GameDialogData, onClose?: () => void) =>\n\t\t\tdialog.set(v =>\n\t\t\t{\n\t\t\t\tv._data = data;\n\t\t\t\tv._onClose = onClose;\n\t\t\t\treturn v;\n\t\t\t}),\n\t\tclose: () =>\n\t\t\tdialog.set(v =>\n\t\t\t{\n\t\t\t\tif (v._dialogId < 0 && !v._data) return v;\n\t\t\t\tv._onClose?.(v._dialogId);\n\t\t\t\tv._onClose = undefined;\n\t\t\t\tv._dialogId = -1;\n\t\t\t\tv._data = null;\n\t\t\t\treturn v;\n\t\t\t}),\n\t}, () => update.set(v => v + 1));\n\tdialog.v._characters = characters;\n\n\treturn dialog.v;\n}\n\nfunction GameDialogWithLoader({ dialogId, characters, close }: GameDialogWithLoaderProps)\n{\n\tconst dialog = useDialog(dialogId);\n\n\treturn dialog.isSuccess ?\n\t\t<GameDialog data={dialog.data.data} close={close} characters={characters} />\n\t\t:\n\t\t<div className={styles.root}>\n\t\t\t<button className={styles.close} onClick={close}></button>\n\t\t\t{dialog.isLoading && <Spinner />}\n\t\t\t{displayError(dialog)}\n\t\t</div>\n\t\t;\n}\n\ninterface GameDialogWithLoaderProps\n{\n\tdialogId: number;\n\tcharacters: UseQueryResult<{ [id: number]: GameDialogCharacter; }, unknown>;\n\tclose: () => void;\n}\n\nfunction GameDialog({ data, characters, close }: GameDialogProps)\n{\n\tconst [nodeI, setNodeI] = useState(0);\n\tconst node = data.nodes[nodeI];\n\tuseEffect(() => setNodeI(0), [data]);\n\n\tif (!characters.isSuccess)\n\t\treturn <div className={styles.root}>\n\t\t\t<button className={styles.close} onClick={close}></button>\n\t\t\t{characters.isLoading && <Spinner />}\n\t\t\t{displayError(characters)}\n\t\t</div>;\n\n\tif (!node)\n\t\treturn <div className={styles.root}>\n\t\t\t<button className={styles.close} onClick={close}></button>\n\t\t\t<h2>Пусто</h2>\n\t\t</div>;\n\n\tconst character = characters.data[node.characterId] || { id: -1, name: \"УДАЛЁННЫЙ\", img: \"\", orien: 1 };\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button className={styles.close} onClick={close}></button>\n\t\t\t<div className={styles.dialog_container}>\n\t\t\t\t<div className={styles.dialog}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName={classNames(styles.img, character.orien == 1 && styles.img_right, character.orien == 2 && styles.img_center)}\n\t\t\t\t\t\tsrc={character.img}\n\t\t\t\t\t\talt={character.name}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className={styles.dialog__title}>{character.name}</div>\n\t\t\t\t\t<div className={styles.dialog__body}>\n\t\t\t\t\t\t<p className={styles.dialog__text}>{node.text}</p>\n\t\t\t\t\t\t<div className={styles.dialog__btns}>\n\t\t\t\t\t\t\t{nodeI > 0 ?\n\t\t\t\t\t\t\t\t<button className={classNames(styles.dialog__prev, \"clearBtn\")} onClick={() => setNodeI(v => v - 1)}>&lt;-</button>\n\t\t\t\t\t\t\t\t: <div></div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{nodeI < data.nodes.length - 1 ?\n\t\t\t\t\t\t\t\t<button className={classNames(styles.dialog__next, \"clearBtn\")} onClick={() => setNodeI(v => v + 1)}>Далее</button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<button className={classNames(styles.dialog__next, \"clearBtn\")} onClick={close}>Конец</button>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface GameDialogProps\n{\n\tdata: GameDialogData;\n\tcharacters: UseQueryResult<{ [id: number]: GameDialogCharacter; }, unknown>;\n\tclose: () => void;\n}\n","export default function IconEdit()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z\" />\n\t\t</svg>\n\t)\n}\n","import { useEffect } from \"react\";\nimport { useDialog, useMutationEditDialog, type GameDialogData } from \"../../../api/dialog\";\nimport useGameDialogEditor from \"../../../components/GameDialogEditor\";\nimport PopupConfirm from \"../../../components/PopupConfirm\";\nimport Spinner from \"../../../components/Spinner\";\nimport copyObj from \"../../../utils/copyObj\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport useGameDialog from \"../../../components/GameDialog\";\nimport IconEdit from \"../../../icons/edit\";\n\nconst DIALOGID = 2;\n\nexport default function EditGameDialog()\n{\n\tconst saving = useStateBool(false);\n\tconst dialogDataQuery = useDialog(DIALOGID, false);\n\tconst dialogData = useStateObj<GameDialogData | null>(null);\n\n\tconst dialog = useGameDialog();\n\tconst editor = useGameDialogEditor(saving.setT);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!saving.v && dialogData.v && dialogDataQuery.isSuccess)\n\t\t\tdialogData.set(copyObj(dialogDataQuery.data.data));\n\t\t// eslint-disable-next-line\n\t}, [saving.v]);\n\n\tasync function getDialog(fn: (dialog: GameDialogData) => void)\n\t{\n\t\tif (dialogData.v) fn(dialogData.v);\n\t\telse if (dialogDataQuery.isSuccess && !dialogDataQuery.isStale)\n\t\t{\n\t\t\tconst data = copyObj(dialogDataQuery.data.data);\n\t\t\tdialogData.set(data);\n\t\t\tfn(data);\n\t\t}\n\t\telse if (dialogDataQuery.isIdle || dialogDataQuery.isStale || dialogDataQuery.isError)\n\t\t{\n\t\t\tconst d = await dialogDataQuery.refetch();\n\t\t\tif (d.isSuccess)\n\t\t\t{\n\t\t\t\tconst data = copyObj(d.data.data);\n\t\t\t\tdialogData.set(data);\n\t\t\t\tfn(data);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn <>\n\t\t{dialogDataQuery.isFetching && <Spinner />}\n\t\t{dialogData.v &&\n\t\t\t<PopupConfirm\n\t\t\t\ttitle={\"Сохранить изменения\"}\n\t\t\t\titemId={DIALOGID}\n\t\t\t\tmutatateParams={{ data: dialogData.v }}\n\t\t\t\tmutationFn={useMutationEditDialog}\n\t\t\t\topen={saving.v}\n\t\t\t\tclose={saving.setF}\n\t\t\t/>\n\t\t}\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => getDialog(dialog.runLocal)}>Диалог перед игрой</button>\n\t\t\t<button onClick={() => getDialog(editor.open)}><IconEdit /></button>\n\t\t</div>\n\t\t{dialog.el()}\n\t\t{editor.el()}\n\t</>;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Fv2Pv\"};","import { useEffect } from \"react\";\nimport { useDialog, useMutationEditDialog, type GameDialogData } from \"../../../api/dialog\";\nimport useGameDialogEditor from \"../../../components/GameDialogEditor\";\nimport PopupConfirm from \"../../../components/PopupConfirm\";\nimport Spinner from \"../../../components/Spinner\";\nimport copyObj from \"../../../utils/copyObj\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport useGameDialog from \"../../../components/GameDialog\";\nimport IconEdit from \"../../../icons/edit\";\n\nconst DIALOGID = 1;\n\nexport default function EditStartDialog()\n{\n\tconst saving = useStateBool(false);\n\tconst dialogDataQuery = useDialog(DIALOGID, false);\n\tconst dialogData = useStateObj<GameDialogData | null>(null);\n\n\tconst dialog = useGameDialog();\n\tconst editor = useGameDialogEditor(saving.setT);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!saving.v && dialogData.v && dialogDataQuery.isSuccess)\n\t\t\tdialogData.set(copyObj(dialogDataQuery.data.data));\n\t\t// eslint-disable-next-line\n\t}, [saving.v]);\n\n\tasync function getDialog(fn: (dialog: GameDialogData) => void)\n\t{\n\t\tif (dialogData.v) fn(dialogData.v);\n\t\telse if (dialogDataQuery.isSuccess && !dialogDataQuery.isStale)\n\t\t{\n\t\t\tconst data = copyObj(dialogDataQuery.data.data);\n\t\t\tdialogData.set(data);\n\t\t\tfn(data);\n\t\t}\n\t\telse if (dialogDataQuery.isIdle || dialogDataQuery.isStale || dialogDataQuery.isError)\n\t\t{\n\t\t\tconst d = await dialogDataQuery.refetch();\n\t\t\tif (d.isSuccess)\n\t\t\t{\n\t\t\t\tconst data = copyObj(d.data.data);\n\t\t\t\tdialogData.set(data);\n\t\t\t\tfn(data);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn <>\n\t\t{dialogDataQuery.isFetching && <Spinner />}\n\t\t{dialogData.v &&\n\t\t\t<PopupConfirm\n\t\t\t\ttitle={\"Сохранить изменения\"}\n\t\t\t\titemId={DIALOGID}\n\t\t\t\tmutatateParams={{ data: dialogData.v }}\n\t\t\t\tmutationFn={useMutationEditDialog}\n\t\t\t\topen={saving.v}\n\t\t\t\tclose={saving.setF}\n\t\t\t/>\n\t\t}\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => getDialog(dialog.runLocal)}>Стартовый диалог</button>\n\t\t\t<button onClick={() => getDialog(editor.open)}><IconEdit /></button>\n\t\t</div>\n\t\t{dialog.el()}\n\t\t{editor.el()}\n\t</>;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__RyDEO\",\"error\":\"styles_error__mpo99\",\"id\":\"styles_id__+YyjR\",\"img\":\"styles_img__Q1dE-\",\"inputs\":\"styles_inputs__+GHP-\",\"changedHighlight\":\"styles_changedHighlight__0huRM\",\"changed\":\"styles_changed__-Gqjn\",\"buttons\":\"styles_buttons__DpOXa\",\"btnMinus\":\"styles_btnMinus__sOvku\",\"checkbox\":\"styles_checkbox__3q5xK\",\"description\":\"styles_description__IsQuf\",\"textarea\":\"styles_textarea__DP8w4\",\"description_count\":\"styles_description_count__rC08l\",\"description_count_too_many\":\"styles_description_count_too_many__9Cvtl\",\"dialogBtns\":\"styles_dialogBtns__OcBqR\"};","export default function IconView()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 442.04 442.04\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M221.02,341.304c-49.708,0-103.206-19.44-154.71-56.22C27.808,257.59,4.044,230.351,3.051,229.203\n\t\t\tc-4.068-4.697-4.068-11.669,0-16.367c0.993-1.146,24.756-28.387,63.259-55.881c51.505-36.777,105.003-56.219,154.71-56.219\n\t\t\tc49.708,0,103.207,19.441,154.71,56.219c38.502,27.494,62.266,54.734,63.259,55.881c4.068,4.697,4.068,11.669,0,16.367\n\t\t\tc-0.993,1.146-24.756,28.387-63.259,55.881C324.227,321.863,270.729,341.304,221.02,341.304z M29.638,221.021\n\t\t\tc9.61,9.799,27.747,27.03,51.694,44.071c32.83,23.361,83.714,51.212,139.688,51.212s106.859-27.851,139.688-51.212\n\t\t\tc23.944-17.038,42.082-34.271,51.694-44.071c-9.609-9.799-27.747-27.03-51.694-44.071\n\t\t\tc-32.829-23.362-83.714-51.212-139.688-51.212s-106.858,27.85-139.688,51.212C57.388,193.988,39.25,211.219,29.638,221.021z\"/>\n\t\t\t<path d=\"M221.02,298.521c-42.734,0-77.5-34.767-77.5-77.5c0-42.733,34.766-77.5,77.5-77.5c18.794,0,36.924,6.814,51.048,19.188\n\t\t\tc5.193,4.549,5.715,12.446,1.166,17.639c-4.549,5.193-12.447,5.714-17.639,1.166c-9.564-8.379-21.844-12.993-34.576-12.993\n\t\t\tc-28.949,0-52.5,23.552-52.5,52.5s23.551,52.5,52.5,52.5c28.95,0,52.5-23.552,52.5-52.5c0-6.903,5.597-12.5,12.5-12.5\n\t\t\ts12.5,5.597,12.5,12.5C298.521,263.754,263.754,298.521,221.02,298.521z\"/>\n\t\t\t<path d=\"M221.02,246.021c-13.785,0-25-11.215-25-25s11.215-25,25-25c13.786,0,25,11.215,25,25S234.806,246.021,221.02,246.021z\" />\n\t\t</svg>\n\t)\n}\n","export default function IconReload()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 342.5 342.5\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M254.37,22.255c-1.161-0.642-2.53-0.795-3.803-0.428c-1.274,0.367-2.35,1.226-2.992,2.387l-21.758,39.391\n\t\t\t\t\tc-1.335,2.417-0.458,5.459,1.96,6.794C264.616,90.748,287.5,129.495,287.5,171.52c0,63.649-51.782,115.431-115.431,115.431\n\t\t\t\t\tS56.638,235.169,56.638,171.52c0-23.888,7.557-47.427,21.382-66.897l34.478,34.478c1.338,1.337,3.315,1.806,5.109,1.21\n\t\t\t\t\tc1.795-0.596,3.101-2.152,3.374-4.024L139.963,6.271c0.228-1.563-0.295-3.141-1.412-4.258c-1.117-1.117-2.7-1.639-4.258-1.412\n\t\t\t\t\tL4.278,19.584c-1.872,0.273-3.428,1.579-4.023,3.374c-0.596,1.795-0.127,3.772,1.21,5.109l37.292,37.292\n\t\t\t\t\tC14.788,95.484,1.638,133,1.638,171.52c0,93.976,76.455,170.431,170.431,170.431c93.976,0,170.431-76.455,170.431-170.431\n\t\t\t\t\tC342.5,109.478,308.731,52.283,254.37,22.255z\"/>\n\t\t</svg>\n\t)\n}\n","import { Fragment, useEffect } from \"react\";\nimport PopupConfirm from \"../../../components/PopupConfirm\";\nimport Spinner from \"../../../components/Spinner\";\nimport classNames from \"../../../utils/classNames\";\nimport displayError from \"../../../utils/displayError\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj, { type StateObj } from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport { useMutationEditQuest, useMutationDeleteQuest, type QuestFull } from \"../../../api/quest\";\nimport IconDelete from \"../../../icons/delete\";\nimport IconSave from \"../../../icons/save\";\nimport IconCancel from \"../../../icons/cancel\";\nimport Popup from \"../../../components/Popup\";\nimport IconEdit from \"../../../icons/edit\";\nimport IconView from \"../../../icons/view\";\nimport useGameDialog from \"../../../components/GameDialog\";\nimport IconReload from \"../../../icons/reload\";\nimport { createEmptyDialog, useDialog, type Dialog, type GameDialogData } from \"../../../api/dialog\";\nimport useGameDialogEditor from \"../../../components/GameDialogEditor\";\nimport type { UseQueryResult } from \"react-query\";\nimport copyObj from \"../../../utils/copyObj\";\n\nexport default function Quest({ quest }: QuestProps)\n{\n\tconst changed = useStateBool(false);\n\tconst deleting = useStateBool(false);\n\tconst popupOpen = useStateBool(false);\n\tconst name = useStateObj(quest.name, changed.setT);\n\tconst reward = useStateObj(quest.reward, changed.setT);\n\tconst hidden = useStateBool(quest.hidden, changed.setT);\n\tconst description = useStateObj(quest.description, changed.setT);\n\n\tconst dialog1Id = useStateObj(quest.dialog1Id, changed.setT);\n\tconst dialog2Id = useStateObj(quest.dialog2Id, changed.setT);\n\tconst dialog1DataQuery = useDialog(dialog1Id.v ?? -1, false);\n\tconst dialog2DataQuery = useDialog(dialog2Id.v ?? -1, false);\n\tconst dialog1Data = useStateObj<GameDialogData | null>(null);\n\tconst dialog2Data = useStateObj<GameDialogData | null>(null);\n\tconst dialog1Changed = useStateBool(false, changed.setT);\n\tconst dialog2Changed = useStateBool(false, changed.setT);\n\n\tconst dialog = useGameDialog();\n\tconst editor = useGameDialogEditor();\n\tconst mutationEdit = useMutationEditQuest(quest.id, reset, () => reset());\n\n\t// eslint-disable-next-line\n\tuseEffect(reset, [quest])\n\n\tfunction reset(newQuest?: QuestFull)\n\t{\n\t\tconst data = newQuest || quest;\n\t\tname.set(data.name);\n\t\treward.set(data.reward);\n\t\thidden.set(data.hidden);\n\t\tdescription.set(data.description);\n\t\tdialog1Id.set(data.dialog1Id);\n\t\tdialog2Id.set(data.dialog2Id);\n\t\tdialog1Data.set(null);\n\t\tdialog2Data.set(null);\n\t\tdialog1Changed.setF();\n\t\tdialog2Changed.setF();\n\t\tchanged.setF();\n\t}\n\n\tasync function getDialog(state: StateObj<GameDialogData | null>, query: UseQueryResult<Dialog, unknown>, fn: (dialog: GameDialogData) => void)\n\t{\n\t\tif (state.v) fn(state.v);\n\t\telse if (query.isSuccess && !query.isStale)\n\t\t{\n\t\t\tconst data = copyObj(query.data.data);\n\t\t\tstate.set(data);\n\t\t\tfn(data);\n\t\t}\n\t\telse if (query.isIdle || query.isStale || query.isError)\n\t\t{\n\t\t\tconst d = await query.refetch();\n\t\t\tif (d.isSuccess)\n\t\t\t{\n\t\t\t\tconst data = copyObj(d.data.data);\n\t\t\t\tstate.set(data);\n\t\t\t\tfn(data);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classNames(styles.root, changed.v && styles.changed)}>\n\t\t\t{dialog.el()}\n\t\t\t{editor.el()}\n\t\t\t{mutationEdit.isLoading && <Spinner block r=\"0.5rem\" />}\n\t\t\t{dialog1DataQuery.isFetching && <Spinner block r=\"0.5rem\" />}\n\t\t\t{dialog2DataQuery.isFetching && <Spinner block r=\"0.5rem\" />}\n\t\t\t{displayError(mutationEdit, err => <div className={styles.error}>\n\t\t\t\t<div>{err}</div>\n\t\t\t\t<button onClick={() => mutationEdit.reset()}>ОК</button>\n\t\t\t</div>)}\n\t\t\t<PopupConfirm title={\"Удалить квест: \" + name.v} itemId={quest.id} mutationFn={useMutationDeleteQuest} open={deleting.v} close={deleting.setF} />\n\t\t\t<div className={styles.id}>{quest.id}</div>\n\t\t\t<div className={styles.inputs}>\n\t\t\t\t<div>Название</div>\n\t\t\t\t<input type=\"text\" value={name.v} onChange={inp => name.set(inp.target.value)} />\n\t\t\t\t<div>Награда</div>\n\t\t\t\t<input type=\"number\" value={reward.v} onChange={inp => reward.set(inp.target.valueAsNumber)} />\n\t\t\t\t<span>Скрытый</span>\n\t\t\t\t<label className={styles.checkbox}>\n\t\t\t\t\t<input type=\"checkbox\" checked={hidden.v} onChange={inp => hidden.set(inp.target.checked)} />\n\t\t\t\t\t<span></span>\n\t\t\t\t</label>\n\t\t\t\t<div>Описание</div>\n\t\t\t\t<button\n\t\t\t\t\tclassName={classNames(styles.description, description.v.length > 256 && styles.description_count_too_many)}\n\t\t\t\t\tonClick={popupOpen.setT}\n\t\t\t\t>\n\t\t\t\t\t{description.v}\n\t\t\t\t</button>\n\t\t\t\t{[\n\t\t\t\t\t{ n: 1, questId: quest.dialog1Id, id: dialog1Id, data: dialog1Data, query: dialog1DataQuery, changed: dialog1Changed },\n\t\t\t\t\t{ n: 2, questId: quest.dialog2Id, id: dialog2Id, data: dialog2Data, query: dialog2DataQuery, changed: dialog2Changed },\n\t\t\t\t].map(({ n, questId, id, data, query, changed }) => <Fragment key={n}>\n\t\t\t\t\t<div className={classNames(changed.v && styles.changedHighlight)}>Диалог {n}</div>\n\t\t\t\t\t<div className={classNames(styles.buttons, styles.dialogBtns)}>\n\t\t\t\t\t\t{id.v == null ? <>\n\t\t\t\t\t\t\t{!data.v && questId == null ?\n\t\t\t\t\t\t\t\t<button onClick={() =>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid.set(-1);\n\t\t\t\t\t\t\t\t\tdata.set(createEmptyDialog());\n\t\t\t\t\t\t\t\t}}>+</button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<button onClick={() => id.set(questId ?? -1)}><IconReload /></button>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t<button onClick={() => getDialog(data, query, dialog.runLocal)}><IconView /></button>\n\t\t\t\t\t\t\t<button onClick={() => getDialog(data, query, d => { changed.setT(); editor.open(d); })}><IconEdit /></button>\n\t\t\t\t\t\t\t<button onClick={() => id.set(null)}><IconDelete /></button>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t{query.isError && <div style={{ color: \"tomato\" }}>Ошибка</div>}\n\t\t\t\t\t</div>\n\t\t\t\t</Fragment>)}\n\t\t\t</div>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t{!changed.v && <button onClick={deleting.setT}><IconDelete /></button>}\n\t\t\t\t{changed.v && <button\n\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tmutationEdit.mutate({\n\t\t\t\t\t\t\tname: name.v,\n\t\t\t\t\t\t\tdescription: description.v,\n\t\t\t\t\t\t\treward: reward.v,\n\t\t\t\t\t\t\thidden: hidden.v,\n\t\t\t\t\t\t\tdialog1: (quest.dialog1Id != null && dialog1Id.v == null) ? false : (dialog1Changed.v && dialog1Data.v) || undefined,\n\t\t\t\t\t\t\tdialog2: (quest.dialog2Id != null && dialog2Id.v == null) ? false : (dialog2Changed.v && dialog2Data.v) || undefined,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<IconSave />\n\t\t\t\t</button>}\n\t\t\t\t{changed.v && <button onClick={() => reset()}><IconCancel /></button>}\n\t\t\t</div>\n\t\t\t<Popup title=\"Редактирование квеста\" open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t\t<h2>Описание квеста \"{name.v}\"</h2>\n\t\t\t\t<textarea\n\t\t\t\t\tclassName={styles.textarea}\n\t\t\t\t\tcols={40}\n\t\t\t\t\trows={10}\n\t\t\t\t\tvalue={description.v}\n\t\t\t\t\tonChange={inp => description.set(inp.target.value)}\n\t\t\t\t/>\n\t\t\t\t<div className={styles.description_count}>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<span className={description.v.length > 256 ? styles.description_count_too_many : \"\"}>{description.v.length}</span>\n\t\t\t\t\t\t<span>/256</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</Popup>\n\t\t</div>\n\t);\n}\n\ninterface QuestProps\n{\n\tquest: QuestFull\n}","// extracted by mini-css-extract-plugin\nexport default {\"quests\":\"styles_quests__lnETn\"};","import { useQuestsFull } from \"../../api/quest\";\nimport usePreloadGameDialogImgs from \"../../components/GameDialog/usePreloadGameDialogImgs\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport AddQuest from \"./AddQuest\";\nimport EditGameDialog from \"./EditGameDialog\";\nimport EditStartDialog from \"./EditStartDialog\";\nimport Quest from \"./Quest\";\nimport styles from \"./styles.module.css\"\n\nexport default function ManageQuestPage()\n{\n\tuseTitle(\"Квесты\");\n\tusePreloadGameDialogImgs();\n\tconst quests = useQuestsFull();\n\n\treturn (\n\t\t<Layout centeredPage gap=\"0.5rem\" homeBtn forStaff>\n\t\t\t<div className=\"calmBack\"></div>\n\t\t\t{quests.isLoading && <Spinner />}\n\t\t\t{displayError(quests)}\n\n\t\t\t<h1>Управление квестами</h1>\n\n\t\t\t<AddQuest />\n\t\t\t<EditStartDialog />\n\t\t\t<EditGameDialog />\n\n\t\t\t<div className={styles.quests}>\n\t\t\t\t{quests.data?.map(quest => <Quest key={quest.id} quest={quest} />)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport type { ImgData } from \"./dataTypes\";\nimport { queryInvalidate, queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\nexport interface StoreItem\n{\n\tid: number;\n\tname: string;\n\tprice: number;\n\tcount: \"many\" | \"few\" | \"no\";\n\timg?: string;\n}\n\nexport interface StoreItemFull\n{\n\tid: number;\n\tid_big: string;\n\tname: string;\n\tprice: number;\n\tcount: number;\n\timg?: string;\n}\n\n\nexport function useStoreItems()\n{\n\treturn useQuery(\"storeItems\", async () =>\n\t\tawait fetchJsonGet<StoreItem[]>(\"/api/store_items\")\n\t);\n}\n\nexport function useStoreItemsFull()\n{\n\treturn useQuery(\"storeItemsFull\", async () =>\n\t\tawait fetchJsonGet<StoreItemFull[]>(\"/api/store_items_full\")\n\t);\n}\n\n\nexport function useMutationAddItem(onSuccess?: (data: StoreItemFull) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (itemData: ItemData) =>\n\t\t\tawait fetchJsonPost<StoreItemFull>(\"/api/store_item\", itemData),\n\t\tonSuccess: (data: StoreItemFull) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"storeItemsFull\", data);\n\t\t\tqueryInvalidate(queryClient, \"storeItems\");\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport interface ItemData\n{\n\tname: string,\n\tprice: number,\n\tcount: number,\n\timg?: ImgData,\n}\n\nexport function useMutationEditItem(itemId: number, onSuccess?: (data: StoreItemFull) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (itemData: ItemData) =>\n\t\t\tawait fetchJsonPost<StoreItemFull>(`/api/store_item/${itemId}`, itemData),\n\t\tonSuccess: (data: StoreItemFull) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"storeItemsFull\", data);\n\t\t\tqueryInvalidate(queryClient, \"storeItems\");\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationDecreaseItem(itemId: number, onSuccess?: (data: StoreItemFull) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchJsonPost<StoreItemFull>(`/api/store_item/${itemId}/decrease`),\n\t\tonSuccess: (data: StoreItemFull) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"storeItemsFull\", data);\n\t\t\tqueryInvalidate(queryClient, \"storeItems\");\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationDeleteItem(itemId: number, onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(`/api/store_item/${itemId}`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"storeItemsFull\", itemId);\n\t\t\tqueryInvalidate(queryClient, \"storeItems\");\n\t\t\tonSuccess?.();\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__yl-I8\",\"img\":\"styles_img__gddIw\",\"form\":\"styles_form__ASF2C\"};","import { useRef } from \"react\";\nimport { useMutationAddItem } from \"../../../api/store\";\nimport { Form, FormField } from \"../../../components/Form\"\nimport Popup from \"../../../components/Popup\"\nimport Spinner from \"../../../components/Spinner\";\nimport displayError from \"../../../utils/displayError\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport styles from \"./styles.module.css\"\nimport imagefileToData from \"../../../utils/imagefileToData\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport type { ImgData } from \"../../../api/dataTypes\";\n\nexport default function AddStoreItem()\n{\n\tconst imgData = useStateObj<ImgData | null>(null);\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst priceRef = useRef<HTMLInputElement>(null);\n\tconst countRef = useRef<HTMLInputElement>(null);\n\tconst popupOpen = useStateBool(false);\n\tconst mutationAdd = useMutationAddItem(() =>\n\t{\n\t\timgData.set(null);\n\t\tpopupOpen.setF();\n\t\tif (nameRef.current)\n\t\t\tnameRef.current.value = \"\";\n\t\tif (priceRef.current)\n\t\t\tpriceRef.current.value = \"\";\n\t\tif (countRef.current)\n\t\t\tcountRef.current.value = \"\";\n\t});\n\n\treturn <>\n\t\t<button className={styles.root} onClick={popupOpen.setT}>Добавить</button>\n\t\t<Popup title=\"Добавление товара\" open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t{mutationAdd.isLoading && <Spinner />}\n\t\t\t{displayError(mutationAdd)}\n\t\t\t{imgData.v?.data == \"\" && <Spinner />}\n\t\t\t<Form\n\t\t\t\tclassName={styles.form}\n\t\t\t\tonSubmit={() =>\n\t\t\t\t{\n\t\t\t\t\tconst name = nameRef.current?.value;\n\t\t\t\t\tconst count = countRef.current?.valueAsNumber;\n\t\t\t\t\tconst price = priceRef.current?.valueAsNumber;\n\t\t\t\t\tif (count && name && price)\n\t\t\t\t\t\tmutationAdd.mutate({\n\t\t\t\t\t\t\tcount,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tprice,\n\t\t\t\t\t\t\timg: imgData.v || undefined,\n\t\t\t\t\t\t})\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<FormField label=\"Изображение\">\n\t\t\t\t\t<div className={styles.img}>\n\t\t\t\t\t\t{imgData.v && <img src={imgData.v.data} alt=\"Изображение\" />}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\taccept=\"image/png, image/jpeg, image/gif\"\n\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\tonChange={async e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\timgData.set({ data: \"\", name: \"\" });\n\t\t\t\t\t\t\timgData.set(await imagefileToData(e.target?.files?.[0]!, \"\"));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Название\">\n\t\t\t\t\t<input ref={nameRef} required type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Цена\">\n\t\t\t\t\t<input ref={priceRef} required type=\"number\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Количество\">\n\t\t\t\t\t<input ref={countRef} required type=\"number\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField>\n\t\t\t\t\t<button type=\"submit\">Добавить</button>\n\t\t\t\t</FormField>\n\t\t\t</Form>\n\t\t</Popup>\n\t</>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__792UO\",\"error\":\"styles_error__EjE0M\",\"id\":\"styles_id__EvI3k\",\"img\":\"styles_img__F6UZc\",\"inputs\":\"styles_inputs__r6vu+\",\"changed\":\"styles_changed__aaZPg\",\"buttons\":\"styles_buttons__X3oNY\",\"btnMinus\":\"styles_btnMinus__5ZzMA\"};","import { useEffect } from \"react\";\nimport { useMutationEditItem, useMutationDeleteItem, useMutationDecreaseItem, type StoreItemFull } from \"../../../api/store\";\nimport PopupConfirm from \"../../../components/PopupConfirm\";\nimport Spinner from \"../../../components/Spinner\";\nimport classNames from \"../../../utils/classNames\";\nimport displayError from \"../../../utils/displayError\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport type { ImgData } from \"../../../api/dataTypes\";\nimport imagefileToData from \"../../../utils/imagefileToData\";\nimport IconDelete from \"../../../icons/delete\";\nimport IconCancel from \"../../../icons/cancel\";\nimport IconSave from \"../../../icons/save\";\n\nexport default function StoreItem({ item }: StoreItemProps)\n{\n\tconst changed = useStateBool(false);\n\tconst deleting = useStateBool(false);\n\tconst decreasing = useStateBool(false);\n\tconst imgData = useStateObj<ImgData | null>(null, changed.setT);\n\tconst name = useStateObj(item.name, changed.setT);\n\tconst count = useStateObj(item.count, changed.setT);\n\tconst price = useStateObj(item.price, changed.setT);\n\n\tconst mutationEdit = useMutationEditItem(item.id, reset, () => reset());\n\n\tfunction reset(newitem?: StoreItemFull)\n\t{\n\t\timgData.set(null);\n\t\tconst data = newitem || item;\n\t\tname.set(data.name);\n\t\tcount.set(data.count);\n\t\tprice.set(data.price);\n\t\tchanged.setF();\n\t}\n\n\t// eslint-disable-next-line\n\tuseEffect(reset, [item])\n\n\treturn (\n\t\t<div className={classNames(styles.root, changed.v && styles.changed)}>\n\t\t\t{mutationEdit.isLoading && <Spinner block r=\"0.5rem\" />}\n\t\t\t{imgData.v?.data == \"\" && <Spinner block r=\"0.5rem\" />}\n\t\t\t{displayError(mutationEdit, err => <div className={styles.error}>\n\t\t\t\t<div>{err}</div>\n\t\t\t\t<button onClick={() => mutationEdit.reset()}>ОК</button>\n\t\t\t</div>)}\n\t\t\t<PopupConfirm title={\"Удалить товар: \" + name.v} itemId={item.id} mutationFn={useMutationDeleteItem} open={deleting.v} close={deleting.setF} />\n\t\t\t<PopupConfirm title={\"Уменьшить кол-во на 1: \" + name.v} itemId={item.id} mutationFn={useMutationDecreaseItem} open={decreasing.v} close={decreasing.setF} />\n\t\t\t<div className={styles.id}>{item.id}</div>\n\t\t\t<label className={styles.img}>\n\t\t\t\t{(item.img || imgData.v) && <img src={imgData.v?.data || item.img} alt=\"Картинка\" />}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\taccept=\"image/png, image/jpeg, image/gif\"\n\t\t\t\t\tonChange={async e =>\n\t\t\t\t\t{\n\t\t\t\t\t\timgData.set({ data: \"\", name: \"\" });\n\t\t\t\t\t\timgData.set(await imagefileToData(e.target?.files?.[0]!, \"\"));\n\t\t\t\t\t\te.target.value = \"\";\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<div className={styles.inputs}>\n\t\t\t\t<div>Название</div>\n\t\t\t\t<input type=\"text\" value={name.v} onChange={inp => name.set(inp.target.value)} />\n\t\t\t\t<div>Цена</div>\n\t\t\t\t<input type=\"number\" value={price.v} onChange={inp => price.set(inp.target.valueAsNumber)} />\n\t\t\t\t<div>Количество</div>\n\t\t\t\t<input type=\"number\" value={count.v} onChange={inp => count.set(inp.target.valueAsNumber)} />\n\t\t\t</div>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t{!changed.v && <button onClick={deleting.setT}><IconDelete /></button>}\n\t\t\t\t{!changed.v && <button className={styles.btnMinus} onClick={decreasing.setT}>-1</button>}\n\t\t\t\t{changed.v && <button\n\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tmutationEdit.mutate({\n\t\t\t\t\t\t\tname: name.v,\n\t\t\t\t\t\t\tcount: count.v,\n\t\t\t\t\t\t\tprice: price.v,\n\t\t\t\t\t\t\timg: imgData.v || undefined,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<IconSave />\n\t\t\t\t</button>}\n\t\t\t\t{changed.v && <button onClick={() => reset()}><IconCancel /></button>}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface StoreItemProps\n{\n\titem: StoreItemFull\n}","// extracted by mini-css-extract-plugin\nexport default {\"items\":\"styles_items__34Dlt\"};","import { useStoreItemsFull } from \"../../api/store\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport AddStoreItem from \"./AddStoreItem\";\nimport StoreItem from \"./StoreItem\";\nimport styles from \"./styles.module.css\"\n\nexport default function ManageStorePage()\n{\n\tuseTitle(\"Товары\");\n\tconst items = useStoreItemsFull();\n\n\treturn (\n\t\t<Layout centeredPage gap=\"0.5rem\" homeBtn forStaff>\n\t\t\t{items.isLoading && <Spinner />}\n\t\t\t{displayError(items)}\n\n\t\t\t<h1>Управление товарами</h1>\n\n\t\t\t<AddStoreItem />\n\n\t\t\t<div className={styles.items}>\n\t\t\t\t{items.data?.map(item => <StoreItem key={item.id} item={item} />)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__3AhF7\",\"window\":\"styles_window__YHycS\",\"map\":\"styles_map__lp2hs\",\"btns\":\"styles_btns__P557j\",\"btn\":\"styles_btn__rCusk\",\"quest\":\"styles_quest__hR6ry\",\"quest__back\":\"styles_quest__back__eDhkH\",\"quest__title\":\"styles_quest__title__GllrO\",\"quest__description\":\"styles_quest__description__UVd4X\",\"quest__dialog\":\"styles_quest__dialog__ndnu+\",\"quest__spacer\":\"styles_quest__spacer__SmzPF\",\"quest__scanner\":\"styles_quest__scanner__Z9SuT\",\"quest__scanner__link\":\"styles_quest__scanner__link__H9Sx0\",\"title\":\"styles_title__AMBJ6\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__cV7H9\",\"btn\":\"styles_btn__ofavo\"};","import { Link } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport Textbox from \"../Textbox\";\n\nexport default function Footer({ curPage = \"\" }: FooterProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div>\n\t\t\t\t<Textbox small btn highlight={curPage == \"map\"}>\n\t\t\t\t\t<Link className={styles.btn} to={\"/map\"}>Карта</Link>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox small btn highlight={curPage == \"timetable\"}>\n\t\t\t\t\t<Link className={styles.btn} to={\"/timetable\"}>План</Link>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox small btn highlight={curPage == \"store\"}>\n\t\t\t\t\t<Link className={styles.btn} to={\"/store\"}>Магаз</Link>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox small btn highlight={curPage == \"game\"}>\n\t\t\t\t\t<Link className={styles.btn} to={\"/game\"}>Бой</Link>\n\t\t\t\t</Textbox>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface FooterProps\n{\n\tcurPage?: \"map\" | \"timetable\" | \"quest\" | \"store\" | \"game\" | \"\"\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__54Zaf\",\"small\":\"styles_small__J2C9R\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Title({ className, text = \"Underparty\", small = false }: TitleProps)\n{\n\treturn (\n\t\t<h1 className={classNames(styles.root, small && styles.small, className)}>{text}</h1>\n\t);\n}\n\ninterface TitleProps\n{\n\ttext?: string,\n\tsmall?: boolean\n\tclassName?: string;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__gZWUz\",\"body\":\"styles_body__JCH1X\",\"grid\":\"styles_grid__7zDRw\",\"grid__img1\":\"styles_grid__img1__+xQaE\",\"grid__img2\":\"styles_grid__img2__7nGQb\",\"grid__btn1\":\"styles_grid__btn1__2lTav\",\"grid__btn2\":\"styles_grid__btn2__DVPvg\"};","import { useMutationSetGroup } from \"../../../api/user\";\nimport displayError from \"../../../utils/displayError\";\nimport Spinner from \"../../Spinner\";\nimport Title from \"../../Title\";\nimport styles from \"./styles.module.css\"\nimport error from \"./error.png\";\nimport ink from \"./ink.png\";\nimport classNames from \"../../../utils/classNames\";\n\nexport default function SelectGroup({ close }: SelectGroupProps)\n{\n\tconst setGroup = useMutationSetGroup(close);\n\t// Инка к сохранить, Эррора к уничтожить\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t{setGroup.isLoading && <Spinner />}\n\t\t\t<div className={styles.body}>\n\t\t\t\t<Title text=\"Вселенную нужно:\" />\n\t\t\t\t{displayError(setGroup, e => <>\n\t\t\t\t\t<h3 style={{ color: \"tomato\" }}>{e}</h3>\n\t\t\t\t\t<button className={styles.close} onClick={close}>Продолжить как гость</button>\n\t\t\t\t</>)}\n\t\t\t\t<div className={styles.grid}>\n\t\t\t\t\t<img src={ink} alt=\"Инк\" className={styles.grid__img1} />\n\t\t\t\t\t<button className={classNames(styles.grid__btn1, \"clearBtn\")} onClick={() => setGroup.mutate({ group: 1 })}>Сохранить</button>\n\t\t\t\t\t<img src={error} alt=\"Эррор\" className={styles.grid__img2} />\n\t\t\t\t\t<button className={classNames(styles.grid__btn2, \"clearBtn\")} onClick={() => setGroup.mutate({ group: 2 })}>Уничтожить</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface SelectGroupProps\n{\n\tclose: () => void;\n}\n","import { useEffect } from \"react\";\nimport useUser from \"../../api/user\";\nimport useGameDialog from \"../GameDialog\";\nimport SelectGroup from \"./SelectGroup\";\nimport useStateBool from \"../../utils/useStateBool\";\n\nexport default function GameDialogGreetings()\n{\n\tconst user = useUser();\n\tconst dialog = useGameDialog();\n\tconst selectGroup = useStateBool(false);\n\n\tuseEffect(() =>\n\t{\n\t\tif (user.data?.group == 0)\n\t\t\tdialog.run(1, selectGroup.setT);\n\t\t// eslint-disable-next-line\n\t}, [user.data])\n\n\treturn <>\n\t\t{dialog.el()}\n\t\t{selectGroup.v && <SelectGroup close={selectGroup.setF} />}\n\t</>;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__sa0ap\",\"bodyOuter\":\"styles_bodyOuter__+xkIs\",\"body\":\"styles_body__27+PL\"};","import styles from \"./styles.module.css\"\nimport classNames from \"../../utils/classNames\";\nimport { useEffect, useRef } from \"react\";\n\nexport default function StyledWindow({ children, title = \"Underparty\", footer, className, scrollUpdate, onClose }: StyledWindowProps)\n{\n\tconst contentRef = useRef<HTMLDivElement>(null);\n\n\tuseEffect(() =>\n\t{\n\t\tif (contentRef.current)\n\t\t\tcontentRef.current.scrollTo(0, 0);\n\t\t// eslint-disable-next-line\n\t}, [scrollUpdate])\n\n\treturn (\n\t\t<div className={classNames(styles.root, className)}>\n\t\t\t<div className={styles.body}>\n\t\t\t\t<div ref={contentRef}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t{footer}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface StyledWindowProps extends React.PropsWithChildren\n{\n\ttitle?: string,\n\tfooter?: React.ReactNode,\n\tclassName?: string,\n\tscrollUpdate?: any,\n\tdisableScroll?: boolean,\n\tonClose?: () => void,\n}","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xHRh9\",\"map\":\"styles_map__H3lOS\",\"mark\":\"styles_mark__MdUS7\",\"mark__mark\":\"styles_mark__mark__AO5XS\"};","import { useEffect, useRef } from \"react\";\nimport styles from \"./styles.module.css\"\nimport useStateObj from \"../../../utils/useStateObj\";\n\nexport default function InteractiveMap({ img, imgW, imgH, objects, objectsOpacity = 1, zoomMin = 0.8, zoomMax = 1, disablePadding = false, fillOnStart = false }: InteractiveMapProps)\n{\n\tconst mapEl = useRef<HTMLDivElement>(null);\n\tconst state = useStateObj<MapState>({\n\t\tx: 0,\n\t\ty: 0,\n\t\tw: imgW,\n\t\th: imgH,\n\t\tzoom: 1,\n\t\ttoCenter: true,\n\t\tmarkClick: undefined,\n\t\twindow: {\n\t\t\tw: 0,\n\t\t\th: 0,\n\t\t},\n\t\tmoving: {\n\t\t\tactive: false,\n\t\t\tsx: 0,\n\t\t\tsy: 0,\n\t\t\tsix: 0,\n\t\t\tsiy: 0,\n\t\t},\n\t\tzooming: {\n\t\t\tactive: false,\n\t\t\tsd: 0,\n\t\t\tsz: 0,\n\t\t},\n\t});\n\n\tuseEffect(\n\t\t() => state.set(v => ({ ...v, s: 0, y: 0, w: imgW, h: imgH, zoom: 1, toCenter: true })),\n\t\t// eslint-disable-next-line\n\t\t[img, imgH, imgW]\n\t);\n\tuseEffect(() =>\n\t{\n\t\tif (!mapEl.current) return;\n\t\tconst el = mapEl.current;\n\t\tfunction setSize()\n\t\t{\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tv.window.w = el.clientWidth;\n\t\t\t\tv.window.h = el.clientHeight;\n\t\t\t\tif (v.toCenter)\n\t\t\t\t{\n\t\t\t\t\tv.toCenter = false;\n\t\t\t\t\tif (fillOnStart)\n\t\t\t\t\t\tv.zoom = Math.max(v.window.w / imgW, v.window.h / imgH);\n\t\t\t\t\telse\n\t\t\t\t\t\tv.zoom = Math.min(v.window.w / imgW, v.window.h / imgH);\n\t\t\t\t\tv.w = imgW * v.zoom;\n\t\t\t\t\tv.h = imgH * v.zoom;\n\t\t\t\t\tv.x = (v.window.w - v.w) / 2;\n\t\t\t\t\tv.y = (v.window.h - v.h) / 2;\n\t\t\t\t}\n\t\t\t\treturn { ...v };\n\t\t\t});\n\t\t}\n\t\tsetSize();\n\t\twindow.addEventListener(\"resize\", setSize);\n\t\treturn () =>\n\t\t{\n\t\t\twindow.removeEventListener(\"resize\", setSize);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [mapEl, state.v.toCenter, imgH, imgW]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!mapEl.current) return;\n\t\tconst el = mapEl.current;\n\n\t\tfunction onMouseDown(e: MouseEvent)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tv.moving.active = true;\n\t\t\t\tv.moving.sx = e.screenX;\n\t\t\t\tv.moving.sy = e.screenY;\n\t\t\t\tv.moving.six = v.x;\n\t\t\t\tv.moving.siy = v.y;\n\t\t\t\treturn { ...v };\n\t\t\t});\n\t\t}\n\t\tfunction onMouseMove(e: MouseEvent)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tif (!v.moving.active) return v;\n\t\t\t\tconst dx = (e.screenX - v.moving.sx);\n\t\t\t\tconst dy = (e.screenY - v.moving.sy);\n\t\t\t\tv.x = v.moving.six + dx;\n\t\t\t\tv.y = v.moving.siy + dy;\n\t\t\t\tconst d = dx * dx + dy * dy;\n\t\t\t\tif (d > 100) v.markClick = undefined;\n\t\t\t\tapplyBoundaries(v);\n\t\t\t\treturn { ...v };\n\t\t\t});\n\t\t}\n\t\tfunction onMouseUp(e: MouseEvent)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tv.moving.active = false;\n\t\t\t\tif (v.markClick)\n\t\t\t\t{\n\t\t\t\t\tconst markClick = v.markClick;\n\t\t\t\t\tv.markClick = undefined;\n\t\t\t\t\tsetTimeout(markClick);\n\t\t\t\t}\n\t\t\t\treturn { ...v };\n\t\t\t});\n\t\t}\n\t\tfunction rezoom(v: MapState, oldZ: number)\n\t\t{\n\t\t\tv.zoom = Math.max(Math.min(v.zoom, zoomMax), Math.min(v.window.w / imgW, v.window.h / imgH) * zoomMin);\n\t\t\tv.x -= v.window.w / 2;\n\t\t\tv.y -= v.window.h / 2;\n\t\t\tv.x /= oldZ;\n\t\t\tv.y /= oldZ;\n\t\t\tv.x *= v.zoom;\n\t\t\tv.y *= v.zoom;\n\t\t\tv.x += v.window.w / 2;\n\t\t\tv.y += v.window.h / 2;\n\t\t\tv.w = imgW * v.zoom;\n\t\t\tv.h = imgH * v.zoom;\n\t\t\tapplyBoundaries(v);\n\t\t}\n\t\tfunction applyBoundaries(v: MapState)\n\t\t{\n\t\t\tif (disablePadding)\n\t\t\t{\n\t\t\t\tif (v.w < v.window.w)\n\t\t\t\t\tv.x = (v.window.w - v.w) / 2;\n\t\t\t\telse\n\t\t\t\t\tv.x = Math.max(Math.min(v.x, 0), -(v.w - v.window.w));\n\t\t\t\tif (v.h < v.window.h)\n\t\t\t\t\tv.y = (v.window.h - v.h) / 2;\n\t\t\t\telse\n\t\t\t\t\tv.y = Math.max(Math.min(v.y, 0), -(v.h - v.window.h));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tv.x = Math.max(Math.min(v.x, v.window.w / 2), -(v.w - v.window.w / 2));\n\t\t\t\tv.y = Math.max(Math.min(v.y, v.window.h / 2), -(v.h - v.window.h / 2));\n\t\t\t}\n\t\t}\n\t\tfunction onWheel(e: WheelEvent)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tconst z = v.zoom;\n\t\t\t\tv.zoom = e.deltaY < 0 ? v.zoom * 1.1 : v.zoom / 1.1;\n\t\t\t\trezoom(v, z);\n\t\t\t\treturn { ...v };\n\t\t\t});\n\t\t}\n\t\tfunction onTouchStart(e: TouchEvent)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tif (e.touches.length == 1)\n\t\t\t\t{\n\t\t\t\t\tv.moving.active = true;\n\t\t\t\t\tv.moving.sx = e.touches[0].clientX;\n\t\t\t\t\tv.moving.sy = e.touches[0].clientY;\n\t\t\t\t\tv.moving.six = v.x;\n\t\t\t\t\tv.moving.siy = v.y;\n\t\t\t\t\treturn { ...v };\n\t\t\t\t}\n\t\t\t\telse if (e.touches.length == 2)\n\t\t\t\t{\n\t\t\t\t\tv.moving.active = false;\n\t\t\t\t\tv.zooming.active = true;\n\t\t\t\t\tconst x1 = e.touches[0].clientX;\n\t\t\t\t\tconst y1 = e.touches[0].clientY;\n\t\t\t\t\tconst x2 = e.touches[1].clientX;\n\t\t\t\t\tconst y2 = e.touches[1].clientY;\n\t\t\t\t\tconst dx = (x1 - x2);\n\t\t\t\t\tconst dy = (y1 - y2);\n\t\t\t\t\tv.zooming.sd = dx * dx + dy * dy;\n\t\t\t\t\tv.zooming.sz = v.zoom;\n\t\t\t\t\treturn { ...v };\n\t\t\t\t}\n\t\t\t\treturn v;\n\t\t\t});\n\t\t};\n\t\tfunction onTouchMove(e: TouchEvent)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tif (v.moving.active && e.touches.length == 1)\n\t\t\t\t{\n\t\t\t\t\tconst dx = (e.touches[0].clientX - v.moving.sx);\n\t\t\t\t\tconst dy = (e.touches[0].clientY - v.moving.sy);\n\t\t\t\t\tv.x = v.moving.six + dx;\n\t\t\t\t\tv.y = v.moving.siy + dy;\n\t\t\t\t\tconst d = dx * dx + dy * dy;\n\t\t\t\t\tif (d > 100) v.markClick = undefined;\n\t\t\t\t\tapplyBoundaries(v);\n\t\t\t\t\treturn { ...v };\n\t\t\t\t}\n\t\t\t\tif (v.zooming.active && e.touches.length == 2)\n\t\t\t\t{\n\t\t\t\t\tconst z = v.zoom;\n\t\t\t\t\tconst x1 = e.touches[0].clientX;\n\t\t\t\t\tconst y1 = e.touches[0].clientY;\n\t\t\t\t\tconst x2 = e.touches[1].clientX;\n\t\t\t\t\tconst y2 = e.touches[1].clientY;\n\t\t\t\t\tconst dx = (x1 - x2);\n\t\t\t\t\tconst dy = (y1 - y2);\n\t\t\t\t\tconst d = dx * dx + dy * dy;\n\t\t\t\t\tv.zoom = v.zooming.sz * Math.sqrt(d / v.zooming.sd);\n\t\t\t\t\tv.markClick = undefined;\n\t\t\t\t\trezoom(v, z);\n\t\t\t\t\treturn { ...v };\n\t\t\t\t}\n\t\t\t\treturn v;\n\t\t\t});\n\t\t};\n\t\tfunction onTouchEnd(e: TouchEvent)\n\t\t{\n\t\t\te.preventDefault();\n\t\t\tstate.set(v =>\n\t\t\t{\n\t\t\t\tv.moving.active = false;\n\t\t\t\tv.zooming.active = false;\n\t\t\t\tif (e.touches.length == 1)\n\t\t\t\t{\n\t\t\t\t\tv.moving.active = true;\n\t\t\t\t\tv.moving.sx = e.touches[0].clientX;\n\t\t\t\t\tv.moving.sy = e.touches[0].clientY;\n\t\t\t\t\tv.moving.six = v.x;\n\t\t\t\t\tv.moving.siy = v.y;\n\t\t\t\t}\n\t\t\t\tif (v.markClick)\n\t\t\t\t{\n\t\t\t\t\tconst markClick = v.markClick;\n\t\t\t\t\tv.markClick = undefined;\n\t\t\t\t\tsetTimeout(markClick);\n\t\t\t\t}\n\t\t\t\treturn { ...v };\n\t\t\t});\n\t\t};\n\t\tel.addEventListener(\"wheel\", onWheel);\n\t\tel.addEventListener(\"mousedown\", onMouseDown);\n\t\tel.addEventListener(\"mousemove\", onMouseMove);\n\t\tel.addEventListener(\"mouseup\", onMouseUp);\n\t\tel.addEventListener(\"touchstart\", onTouchStart);\n\t\tel.addEventListener(\"touchmove\", onTouchMove);\n\t\tel.addEventListener(\"touchend\", onTouchEnd);\n\t\treturn () =>\n\t\t{\n\t\t\tel.removeEventListener(\"wheel\", onWheel);\n\t\t\tel.removeEventListener(\"mousedown\", onMouseDown);\n\t\t\tel.removeEventListener(\"mousemove\", onMouseMove);\n\t\t\tel.removeEventListener(\"mouseup\", onMouseUp);\n\t\t\tel.removeEventListener(\"touchstart\", onTouchStart);\n\t\t\tel.removeEventListener(\"touchmove\", onTouchMove);\n\t\t\tel.removeEventListener(\"touchend\", onTouchEnd);\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [mapEl, zoomMin, zoomMax, disablePadding, imgH, imgW])\n\n\tfunction setMarkClick(onClick: (() => void) | undefined)\n\t{\n\t\tstate.set(v =>\n\t\t{\n\t\t\tv.markClick = onClick;\n\t\t\treturn { ...v };\n\t\t})\n\t}\n\n\treturn (\n\t\t<div className={styles.root} ref={mapEl}>\n\t\t\t<div className={styles.map} style={{\n\t\t\t\t\"--x\": `${state.v.x}px`,\n\t\t\t\t\"--y\": `${state.v.y}px`,\n\t\t\t\t\"--w\": `${state.v.w}px`,\n\t\t\t\t\"--h\": `${state.v.h}px`,\n\t\t\t} as React.CSSProperties}>\n\t\t\t\t<img src={img} alt=\"Карта\" />\n\t\t\t\t{((objects || []).filter(v => !!v) as MapObject[]).map((v, i) => <div\n\t\t\t\t\tkey={i}\n\t\t\t\t\tclassName={styles.mark}\n\t\t\t\t\tonMouseDown={() => setMarkClick(v.onClick)}\n\t\t\t\t\tonTouchStart={() => setMarkClick(v.onClick)}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tleft: `${v.x}%`,\n\t\t\t\t\t\ttop: `${v.y}%`,\n\t\t\t\t\t\twidth: `${v.w}%`,\n\t\t\t\t\t\theight: `${v.h}%`,\n\t\t\t\t\t\topacity: objectsOpacity,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<img src={v.img} alt=\"Метка\" />\n\t\t\t\t\t<div className={styles.mark__mark} style={{ \"animationDelay\": `-${i * 150}ms` }}>!</div>\n\t\t\t\t</div>)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface InteractiveMapProps\n{\n\timg: string;\n\timgW: number;\n\timgH: number;\n\tzoomMin?: number;\n\tzoomMax?: number;\n\tdisablePadding?: boolean;\n\tfillOnStart?: boolean;\n\tobjectsOpacity?: number;\n\tobjects?: (MapObject | null)[];\n}\ninterface MapObject\n{\n\tx: number;\n\ty: number;\n\tw: number;\n\th: number;\n\timg: string;\n\tonClick?: () => void;\n}\n\ninterface MapState\n{\n\tx: number;\n\ty: number;\n\tw: number;\n\th: number;\n\tzoom: number;\n\ttoCenter: boolean;\n\tmarkClick: (() => void) | undefined;\n\twindow: {\n\t\tw: number,\n\t\th: number,\n\t}\n\tmoving: {\n\t\tactive: boolean;\n\t\tsx: number;\n\t\tsy: number;\n\t\tsix: number;\n\t\tsiy: number;\n\t}\n\tzooming: {\n\t\tactive: boolean,\n\t\tsd: number,\n\t\tsz: number,\n\t}\n}","import styles from \"./styles.module.css\"\nimport map1 from \"./map1.png\";\nimport map2 from \"./map2.png\";\nimport map3 from \"./map3.png\";\nimport mark_0 from \"./marks/0.png\";\nimport mark_1_1 from \"./marks/1_1.png\";\nimport mark_1_2 from \"./marks/1_2.png\";\nimport mark_1_3 from \"./marks/1_3.png\";\nimport mark_2_1 from \"./marks/2_1.png\";\nimport mark_2_2 from \"./marks/2_2.png\";\nimport Layout from \"../../components/Layout\";\nimport Footer from \"../../components/Footer\";\nimport useStateObj, { useStateObjExt } from \"../../utils/useStateObj\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport GameDialogGreetings from \"../../components/GameDialogGreetings\";\nimport classNames from \"../../utils/classNames\";\nimport Textbox from \"../../components/Textbox\";\nimport StyledWindow from \"../../components/StyledWindow\";\nimport InteractiveMap from \"./InteractiveMap\";\nimport useGameDialog from \"../../components/GameDialog\";\nimport { useMutationOpenQuest, useQuests, type Quest } from \"../../api/quest\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { Link } from \"react-router-dom\";\nimport usePreloadGameDialogImgs from \"../../components/GameDialog/usePreloadGameDialogImgs\";\nimport usePreloadImgs from \"../../utils/usePreloadImgs\";\nimport Title from \"../../components/Title\";\n\nexport default function MapPage()\n{\n\tuseTitle(\"Карта\");\n\tusePreloadGameDialogImgs();\n\tusePreloadImgs(map1, map2, map3, mark_0, mark_1_1, mark_1_2, mark_1_3, mark_2_1, mark_2_2);\n\tconst dialog = useGameDialog();\n\tconst mutationOpen = useMutationOpenQuest();\n\tconst openedQuest = useStateObjExt<Quest | null>(null, v =>\n\t{\n\t\tif (v && v.dialogId != null && !v.opened)\n\t\t\tdialog.run(v.dialogId, () =>\n\t\t\t{\n\t\t\t\tmutationOpen.mutate(v.id);\n\t\t\t\tv.opened = true;\n\t\t\t});\n\t});\n\tconst quests = useQuests();\n\tconst map = useStateObj(0, () => openedQuest.set(null));\n\n\tfunction questMark(id: number, img: string, x: number, y: number, w: number, h: number)\n\t{\n\t\tif (!quests.isSuccess) return null;\n\t\tconst quest = quests.data.find(v => v.id == id);\n\t\tif (!quest || quest.completed) return null;\n\t\treturn {\n\t\t\timg, x, y, w, h,\n\t\t\tonClick: () => openedQuest.set(quest),\n\t\t}\n\t}\n\t// function questMarkDepends(dependsOnId: number, id: number, img: string, x: number, y: number, w: number, h: number)\n\t// {\n\t// \tif (!quests.isSuccess) return null;\n\t// \tconst questDepends = quests.data.find(v => v.id == dependsOnId);\n\t// \tif (!questDepends?.completed) return null;\n\t// \tconst quest = quests.data.find(v => v.id == id);\n\t// \tif (!quest || quest.completed) return null;\n\t// \treturn {\n\t// \t\timg, x, y, w, h,\n\t// \t\tonClick: () => openedQuest.set(quest),\n\t// \t}\n\t// }\n\n\treturn (\n\t\t<Layout centeredPage className={styles.root} footer={<Footer curPage=\"map\" />}>\n\t\t\t{dialog.el()}\n\t\t\t<GameDialogGreetings />\n\t\t\t{quests.isLoading && <Spinner />}\n\t\t\t<Title className={styles.title} />\n\t\t\t<StyledWindow className={styles.window} onClose={() => openedQuest.set(null)}>\n\t\t\t\t{displayError(quests)}\n\t\t\t\t<div className={styles.map} style={{ display: openedQuest.v ? \"none\" : \"\" }}>\n\t\t\t\t\t<InteractiveMap\n\t\t\t\t\t\timg={[map1, map2, map3][map.v]}\n\t\t\t\t\t\timgW={[2366, 2366, 1971][map.v]}\n\t\t\t\t\t\timgH={[2560, 2560, 1841][map.v]}\n\t\t\t\t\t\tzoomMin={1}\n\t\t\t\t\t\tdisablePadding\n\t\t\t\t\t\tfillOnStart\n\t\t\t\t\t\t// objectsOpacity={0.5}\n\t\t\t\t\t\tobjects={quests.isSuccess ? [[\n\t\t\t\t\t\t\tquestMark(1, mark_0, 1.4, 1.7, 13, 9.8),\n\t\t\t\t\t\t\tquestMark(2, mark_1_1, 22.8, 38.4, 10.8, 9.6),\n\t\t\t\t\t\t\tquestMark(3, mark_1_2, 49.7, 42.3, 10.9, 9.7),\n\t\t\t\t\t\t\tquestMark(4, mark_1_3, 31.7, 80.8, 10.9, 9.7),\n\t\t\t\t\t\t], [\n\t\t\t\t\t\t\tquestMark(1, mark_0, 1.4, 1.7, 13, 9.8),\n\t\t\t\t\t\t\tquestMark(5, mark_2_1, 82.4, 9.2, 16.1, 10.3),\n\t\t\t\t\t\t\tquestMark(6, mark_2_2, 48.1, 21.5, 20.7, 10),\n\t\t\t\t\t\t], [], []][map.v] : []}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{openedQuest.v &&\n\t\t\t\t\t<div className={styles.quest}>\n\t\t\t\t\t\t<Textbox small btn className={styles.quest__back}>\n\t\t\t\t\t\t\t<button className={\"clearBtn\"} onClick={() => openedQuest.set(null)}>назад</button>\n\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t<div className={styles.quest__title}>\n\t\t\t\t\t\t\t<span>{openedQuest.v.name}</span>\n\t\t\t\t\t\t\t<span>{openedQuest.v.reward} М</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Textbox small>\n\t\t\t\t\t\t\t<div className={styles.quest__description}>{openedQuest.v.description || \"Нет описания\"}</div>\n\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t{openedQuest.v.dialogId != null &&\n\t\t\t\t\t\t\t<Textbox small btn>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={classNames(styles.quest__dialog, \"clearBtn\")}\n\t\t\t\t\t\t\t\t\tonClick={() => openedQuest.v && openedQuest.v.dialogId != null && dialog.run(openedQuest.v.dialogId)}\n\t\t\t\t\t\t\t\t>Вступление</button>\n\t\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div className={styles.quest__spacer}></div>\n\t\t\t\t\t\t<Textbox small btn className={styles.quest__scanner}>\n\t\t\t\t\t\t\t<Link to=\"/scanner\" className={styles.quest__scanner__link}>\n\t\t\t\t\t\t\t\t<div className=\"title\">Сдать</div>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t</div>}\n\t\t\t</StyledWindow>\n\t\t\t<div className={styles.btns}>\n\t\t\t\t<Textbox small btn highlight={map.v == 0}>\n\t\t\t\t\t<button onClick={() => map.set(0)} className={classNames(styles.btn, \"clearBtn\")}>Этаж 1</button>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox small btn highlight={map.v == 1}>\n\t\t\t\t\t<button onClick={() => map.set(1)} className={classNames(styles.btn, \"clearBtn\")}>Этаж 2</button>\n\t\t\t\t</Textbox>\n\t\t\t\t<Textbox small btn highlight={map.v == 2}>\n\t\t\t\t\t<button onClick={() => map.set(2)} className={classNames(styles.btn, \"clearBtn\")}>маркет</button>\n\t\t\t\t</Textbox>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { useEffect } from \"react\";\n\nexport default function usePreloadImgs(...imgs: string[])\n{\n\tuseEffect(() =>\n\t{\n\t\tconst els = imgs.map(v =>\n\t\t{\n\t\t\tconst el = document.createElement(\"link\");\n\t\t\tel.rel = \"preload\";\n\t\t\tel.href = v;\n\t\t\tel.as = \"image\";\n\t\t\tdocument.head.appendChild(el);\n\t\t\treturn el;\n\t\t});\n\t\treturn () =>\n\t\t{\n\t\t\tels.forEach(el => document.head.removeChild(el))\n\t\t}\n\t}, [imgs]);\n}","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\n\nexport default function QrCode({ code, scale = 10, margin = 1, color = \"#000000\", colorBg = \"#ffffff\" }: QrCodeProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale, margin, color: { dark: color, light: colorBg } }, (e, url) => setQrcode(url));\n\t}, [code, color, scale, margin, colorBg]);\n\n\treturn (\n\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t);\n}\n\ninterface QrCodeProps\n{\n\tscale?: number\n\tmargin?: number\n\tcode?: string,\n\tcolor?: string,\n\tcolorBg?: string,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__sSzNc\",\"qr\":\"styles_qr__cpZSD\"};","import useUser from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport QrCode from \"../../components/QrCode\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function PromotePage({ role }: PromoteProps)\n{\n\tuseTitle(\"Повышение\");\n\tconst user = useUser();\n\tconst roleText = {\n\t\t\"worker\": \"волонтёра\",\n\t\t\"manager\": \"управляющего\",\n\t}[role];\n\tconst roleText2 = {\n\t\t\"worker\": \"волонтёром\",\n\t\t\"manager\": \"управляющим\",\n\t}[role];\n\tif (!roleText) return <Layout>Ошибка!</Layout>;\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\" height100 className={styles.root} homeBtn forStaff>\n\t\t\t<h1>Повышение до {roleText}</h1>\n\t\t\t<div className={styles.qr}>\n\t\t\t\t<QrCode code={`promote_${role}_${user.data?.id}`} colorBg=\"#ffffff00\" scale={13} />\n\t\t\t</div>\n\t\t\t<h3>После сканирования посетитель становиться {roleText2}</h3>\n\t\t</Layout>\n\t);\n}\n\ninterface PromoteProps\n{\n\trole: \"worker\" | \"manager\",\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__CEdGL\",\"background\":\"styles_background__dxeLP\",\"body\":\"styles_body__o-6ZK\",\"window\":\"styles_window__ASnVo\",\"title\":\"styles_title__6wHPv\",\"btn\":\"styles_btn__lL+tu\",\"btn_empty\":\"styles_btn_empty__3NneV\",\"items\":\"styles_items__yJ9sj\",\"quests\":\"styles_quests__58NxQ\",\"quest\":\"styles_quest__65tbN\",\"quest_completed\":\"styles_quest_completed__6XOvB\",\"questDescription\":\"styles_questDescription__bMEbk\",\"questDescription__body\":\"styles_questDescription__body__-HZ3d\"};","import { useMutationOpenQuest, useQuests, type Quest } from \"../../api/quest\";\nimport Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport items from \"./items.png\"\nimport btn from \"./btn.png\"\nimport styles from \"./styles.module.css\"\nimport StyledWindow from \"../../components/StyledWindow\";\nimport { useStateObjExt } from \"../../utils/useStateObj\";\nimport { Link } from \"react-router-dom\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport classNames from \"../../utils/classNames\";\nimport useGameDialog from \"../../components/GameDialog\";\n\nexport default function QuestPage()\n{\n\tuseTitle(\"Квесты\");\n\tconst dialog = useGameDialog();\n\tconst mutationOpen = useMutationOpenQuest();\n\tconst openQuest = useStateObjExt<Quest | null>(null, v =>\n\t{\n\t\tif (v && v.dialogId != null && !v.opened)\n\t\t\tdialog.run(v.dialogId, () =>\n\t\t\t{\n\t\t\t\tmutationOpen.mutate(v.id);\n\t\t\t\tv.opened = true;\n\t\t\t});\n\t});\n\tconst quests = useQuests();\n\n\treturn (\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer curPage=\"quest\" />}>\n\t\t\t{dialog.el()}\n\t\t\t<div className={styles.background}></div>\n\t\t\t<h1 className={styles.title}>Underparty</h1>\n\t\t\t{quests.isLoading && <Spinner />}\n\t\t\t<div className={styles.body}>\n\t\t\t\t<StyledWindow\n\t\t\t\t\tclassName={styles.window}\n\t\t\t\t\ttitle=\"Квесты\"\n\t\t\t\t\tfooter={<img className={styles.items} src={items} alt=\"\" />}\n\t\t\t\t\tonClose={() => openQuest.set(null)}\n\t\t\t\t>\n\t\t\t\t\t{openQuest.v ?\n\t\t\t\t\t\t<div className={styles.questDescription}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={classNames(styles.quest, openQuest.v.completed && styles.quest_completed)}\n\t\t\t\t\t\t\t\tkey={openQuest.v.id}\n\t\t\t\t\t\t\t\tonClick={() => openQuest.set(null)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>{openQuest.v.name}</span>\n\t\t\t\t\t\t\t\t<span>{renderReward(openQuest.v.reward)}</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{openQuest.v && openQuest.v.dialogId != null ?\n\t\t\t\t\t\t\t\t<button onClick={() => openQuest.v && openQuest.v.dialogId != null && dialog.run(openQuest.v.dialogId)}>Вступление</button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<div className={styles.questDescription__body}>{openQuest.v.description || \"Нет описания\"}</div>\n\t\t\t\t\t\t\t<Link to=\"/scanner\" className={styles.btn}>\n\t\t\t\t\t\t\t\t<img src={btn} alt=\"Сдать\" />\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div className={styles.quests}>\n\t\t\t\t\t\t\t{displayError(quests)}\n\t\t\t\t\t\t\t{quests.data && (fakeQuests.concat(quests.data)).map(quest =>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={classNames(styles.quest, quest.completed && styles.quest_completed)}\n\t\t\t\t\t\t\t\t\tkey={quest.id}\n\t\t\t\t\t\t\t\t\tonClick={() => openQuest.set(quest)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>{quest.name}</span>\n\t\t\t\t\t\t\t\t\t<span>{renderReward(quest.reward)}</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>}\n\t\t\t\t</StyledWindow>\n\t\t\t\t{!openQuest.v ?\n\t\t\t\t\t<Link to=\"/scanner\" className={styles.btn}>\n\t\t\t\t\t\t<img src={btn} alt=\"Сдать\" />\n\t\t\t\t\t</Link>\n\t\t\t\t\t: <div className={styles.btn_empty}></div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n\nconst fakeQuests: Quest[] = [\n\t{\n\t\tid: -1,\n\t\tname: \"Барахолка\",\n\t\tdescription: \"Сдайте одно [БАРАХЛО], чтобы обменять его на другое [БАРАХЛО] или виртуальную валюту GGG!\",\n\t\treward: Infinity,\n\t\tcompleted: false,\n\t\tdialogId: -1,\n\t\topened: false,\n\t}\n]\n\nfunction renderReward(reward: number)\n{\n\tif (!isFinite(reward)) return \"∞\";\n\treturn reward + \"G\";\n}\n","import { useMutation, useQueryClient } from \"react-query\";\nimport { fetchJsonPost } from \"../utils/fetch\";\nimport { createEmptyUser, type User } from \"./user\";\nimport { queryInvalidate } from \"../utils/query\";\n\n\nexport default function useMutationScanner(onSuccess?: (data: ScannerRes) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (scannerData: ScannerData) =>\n\t\t{\n\t\t\tconst res = await fetchJsonPost<ScannerRes>(\"/api/scanner\", scannerData)\n\t\t\tqueryClient.setQueryData<User>(\"user\", user =>\n\t\t\t{\n\t\t\t\tuser = user || createEmptyUser();\n\t\t\t\tuser.balance = res.balance;\n\t\t\t\tif (res.res == \"ok\" && res.action == \"promote\")\n\t\t\t\t\tqueryInvalidate(queryClient, \"user\");\n\t\t\t\tif (res.res == \"ok\" && res.action == \"quest\")\n\t\t\t\t\tqueryInvalidate(queryClient, \"quests\");\n\t\t\t\treturn user;\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tonSuccess: onSuccess,\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\ninterface ScannerData\n{\n\tcode: string,\n}\n\nexport interface ScannerRes\n{\n\tres: \"ok\" | \"wrong\" | \"error\",\n\taction: \"quest\" | \"store\" | \"send\" | \"promote\",\n\tvalue: number,\n\tmsg: string,\n\tbalance: number,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__QdJnV\",\"msg\":\"styles_msg__plnAU\",\"msg_visible\":\"styles_msg_visible__G0rDm\",\"msg_dimmed\":\"styles_msg_dimmed__0Xs60\",\"bar\":\"styles_bar__VuYbs\",\"bar_full\":\"styles_bar_full__poY0b\"};","// extracted by mini-css-extract-plugin\nexport default {\"error\":\"styles_error__EtK3I\",\"video\":\"styles_video__b88Zl\"};","import { useEffect } from \"react\";\nimport useStateObj from \"./useStateObj\";\nimport useStateBool from \"./useStateBool\";\n\nexport default function useSound(url: string, loop = false)\n{\n\tconst audio = useStateObj<HTMLAudioElement>(new Audio());\n\tconst playing = useStateBool(false);\n\n\tuseEffect(() =>\n\t{\n\t\taudio.set(() =>\n\t\t{\n\t\t\tconst audio = new Audio(url)\n\t\t\taudio.preload = \"auto\";\n\t\t\tif (loop)\n\t\t\t\taudio.addEventListener(\"ended\", audio.play);\n\t\t\tif (playing.v)\n\t\t\t\taudio.play();\n\t\t\treturn audio;\n\t\t});\n\t\t// eslint-disable-next-line\n\t}, [url, loop]);\n\n\tuseEffect(() =>\n\t{\n\t\tif (playing.v)\n\t\t{\n\t\t\taudio.v.currentTime = 0;\n\t\t\taudio.v.play();\n\t\t}\n\t\telse\n\t\t{\n\t\t\taudio.v.pause();\n\t\t}\n\t}, [playing.v, audio.v])\n\n\treturn { play: playing.setT, stop: playing.setF };\n};\n","import styles from \"./styles.module.css\"\nimport beep from \"./beep.mp3\";\nimport { useEffect, useState } from \"react\";\nimport useSound from \"../useSound\";\nimport QrScanner from \"qr-scanner\";\n\nlet onScan = (r: string) => { };\nlet onError = () => { };\nlet error = false;\nlet scannerEl: HTMLDivElement | null = null;\nlet scanner: QrScanner | null = null;\n\nexport default function useScanner(pause = false, afterScanTimeout = 500)\n{\n\tif (!scanner)\n\t{\n\t\tscannerEl = document.createElement(\"div\");\n\t\tdocument.body.appendChild(scannerEl);\n\t\tscannerEl.style.display = \"flex\";\n\t\tscannerEl.style.backgroundColor = \"black\";\n\n\t\tconst video = document.createElement(\"video\");\n\t\tscannerEl.appendChild(video);\n\t\tscanner = new QrScanner(\n\t\t\tvideo,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t);\n\t}\n\n\tuseEffect(() =>\n\t{\n\t\tsetTimeout(() =>\n\t\t\tscanner?.start().catch(() =>\n\t\t\t{\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tscanner?.start().catch(() => onError());\n\t\t\t\t}, 250)\n\t\t\t}), 100)\n\t\treturn () =>\n\t\t{\n\t\t\tscanner?.stop();\n\t\t}\n\t}, []);\n\n\tconst [isTimeout, setIsTimeout] = useState(false);\n\tconst [scanned, setScanned] = useState(\"\");\n\tconst [isError, setIsError] = useState(error);\n\tconst playBeep = useSound(beep);\n\n\tonScan = (r: string) =>\n\t{\n\t\tif (isTimeout || pause) return;\n\t\tsetScanned(r);\n\t\tsetIsTimeout(true);\n\t\tplayBeep.play();\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\tsetScanned(\"\");\n\t\t\tsetIsTimeout(false);\n\t\t}, afterScanTimeout);\n\t}\n\tonError = () =>\n\t{\n\t\terror = true;\n\t\tsetIsError(true);\n\t}\n\n\tif (isError)\n\t\treturn {\n\t\t\tscanned,\n\t\t\tscanner: <div className={styles.error}>\n\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t</div>\n\t\t};\n\n\treturn {\n\t\tscanned,\n\t\tscanner: <div>\n\t\t\t<div\n\t\t\t\tref={ref =>\n\t\t\t\t{\n\t\t\t\t\tif (!ref) return;\n\t\t\t\t\tref.innerHTML = \"\";\n\t\t\t\t\tref.appendChild(scannerEl!);\n\t\t\t\t}}\n\t\t\t\tclassName={styles.video}\n\t\t\t></div>\n\t\t</div>\n\t};\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport useScanner from \"../../utils/useScanner\";\nimport { UseMutationResult } from \"react-query\";\nimport { formatError } from \"../../utils/displayError\";\nimport Spinner from \"../Spinner\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function Scanner<Res, Data>({ useMutation, onScan, formatMsg, onRes, className, pause }: ScannerProps<Res, Data>)\n{\n\tconst [msg, setMsg] = useState(\"\");\n\tconst [err, setErr] = useState(\"\");\n\tconst barRef = useRef<HTMLDivElement>(null);\n\tconst mutation = useMutation(r =>\n\t{\n\t\tsetMsg(formatMsg(r));\n\t\tsetErr(\"\");\n\t\tonMutated();\n\t\tonRes?.(r);\n\t}, err =>\n\t{\n\t\tsetMsg(\"\");\n\t\tsetErr(formatError(err));\n\t\tonMutated();\n\t});\n\tconst { scanned, scanner } = useScanner(!mutation.isIdle || pause);\n\n\tfunction onMutated()\n\t{\n\t\tsetTimeout(() => mutation.reset(), 1000);\n\t\tbarRef.current?.classList.add(styles.bar_full);\n\t\tsetTimeout(() => barRef.current?.classList.remove(styles.bar_full), 100);\n\t}\n\n\tuseEffect(() =>\n\t{\n\t\tif (scanned == \"\" || !mutation.isIdle) return;\n\t\tsetMsg(\"\");\n\t\tsetErr(\"\");\n\t\tconst data = onScan(scanned);\n\t\tif (data)\n\t\t\tmutation.mutate(data);\n\t\telse\n\t\t\tsetErr(\"Не опознано\");\n\t\t// eslint-disable-next-line\n\t}, [scanned])\n\n\treturn <div className={classNames(styles.root, className)}>\n\t\t{mutation.isLoading && <Spinner />}\n\t\t{scanner}\n\t\t<div className={classNames(styles.msg, (msg || err) && styles.msg_visible, (msg || err) && mutation.isIdle && styles.msg_dimmed)}>\n\t\t\t<h2>{msg}</h2>\n\t\t\t<h2>{err}</h2>\n\t\t</div>\n\t\t<div ref={barRef} className={styles.bar}></div>\n\t</div>\n}\n\ninterface ScannerProps<Res, Data>\n{\n\tuseMutation: (onSuccess: (data: Res) => void, onError: (err: any) => void) => UseMutationResult<Res, any, Data, unknown>,\n\tonScan: (scanned: string) => Data | null,\n\tonRes?: (res: Res) => void,\n\tformatMsg: (res: Res) => string,\n\tclassName?: string,\n\tpause?: boolean,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__CrawG\",\"background\":\"styles_background__sRVhE\",\"anim-background\":\"styles_anim-background__FEgkK\",\"body\":\"styles_body__WfmVk\",\"gold\":\"styles_gold__NCkdw\",\"tb\":\"styles_tb__YjTWG\"};","import { useNavigate } from \"react-router-dom\";\nimport useMutationScanner, { type ScannerRes } from \"../../api/scanner\";\nimport Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\nimport Popup from \"../../components/Popup\";\nimport Scanner from \"../../components/Scanner\";\nimport StyledWindow from \"../../components/StyledWindow\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport Title from \"../../components/Title\";\nimport Textbox from \"../../components/Textbox\";\n\nexport default function ScannerPage()\n{\n\tuseTitle(\"Сканер\");\n\tconst popupOpen = useStateBool(false);\n\tconst res = useStateObj<ScannerRes | null>(null, popupOpen.setT);\n\tconst navigate = useNavigate();\n\n\treturn (\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer />} homeBtn>\n\t\t\t{/* <div className={styles.background}></div> */}\n\t\t\t<StyledWindow title=\"QR-Активатор\" disableScroll className={styles.body} onClose={() => navigate(-1)}>\n\t\t\t\t<Scanner\n\t\t\t\t\tuseMutation={useMutationScanner}\n\t\t\t\t\tpause={popupOpen.v}\n\t\t\t\t\tonScan={scanned =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconst actions = [\"quest_\", \"item_\", \"send_\", \"promote_\"];\n\t\t\t\t\t\tfor (const action of actions)\n\t\t\t\t\t\t\tif (scanned.startsWith(action))\n\t\t\t\t\t\t\t\treturn { code: scanned };\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}}\n\t\t\t\t\tformatMsg={r => ({\n\t\t\t\t\t\t\"ok\": \"\",\n\t\t\t\t\t\t\"wrong\": \"Недействующий QR\",\n\t\t\t\t\t\t\"error\": r.msg,\n\t\t\t\t\t}[r.res] ?? r.res)}\n\t\t\t\t\tonRes={r =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (r.res == \"ok\")\n\t\t\t\t\t\t\tres.set(r);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</StyledWindow>\n\t\t\t<Popup title=\"Активировано\" open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t\t{res.v?.action == \"quest\" && <>\n\t\t\t\t\t<Title small text=\"Квест завершён!\" />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Textbox small className={styles.tb}>{res.v.msg}</Textbox>\n\t\t\t\t\t<br />\n\t\t\t\t\t<h2>\n\t\t\t\t\t\t<span>Награда: </span>\n\t\t\t\t\t\t<span className={styles.gold}>{res.v.value}М</span>\n\t\t\t\t\t</h2>\n\t\t\t\t</>}\n\t\t\t\t{res.v?.action == \"store\" && <>\n\t\t\t\t\t<Title small text=\"Куплено!\" />\n\t\t\t\t\t<br />\n\t\t\t\t\t<Textbox small className={styles.tb}>{res.v.msg}</Textbox>\n\t\t\t\t\t<br />\n\t\t\t\t\t<h2>\n\t\t\t\t\t\t<span>Потрачено: </span>\n\t\t\t\t\t\t<span className={styles.gold}>{res.v.value}М</span>\n\t\t\t\t\t</h2>\n\t\t\t\t</>}\n\t\t\t\t{res.v?.action == \"send\" && <>\n\t\t\t\t\t<Title small text={res.v.value > 0 ? \"Пополнено\" : \"Вычтено\"} />\n\t\t\t\t\t<br />\n\t\t\t\t\t<h1 className={styles.gold}>{res.v.value > 0 ? \"+\" : \"\"}{res.v.value}М</h1>\n\t\t\t\t</>}\n\t\t\t\t{res.v?.action == \"promote\" && <>\n\t\t\t\t\t<Title small text=\"Назначение\" />\n\t\t\t\t\t<br />\n\t\t\t\t\t<h2>Теперь вы {{\n\t\t\t\t\t\t\"worker\": \"волонтёр\",\n\t\t\t\t\t\t\"manager\": \"управляющий\",\n\t\t\t\t\t}[res.v.msg] || \"неизвестно\"}</h2>\n\t\t\t\t</>}\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"block\":\"styles_block__jLSvl\",\"value\":\"styles_value__AMUT8\",\"action\":\"styles_action__S+Amy\",\"reusable\":\"styles_reusable__AlAhN\",\"checkbox\":\"styles_checkbox__5B3El\",\"qr\":\"styles_qr__NIQPC\",\"send\":\"styles_send__R5BDM\",\"check\":\"styles_check__tkMiQ\",\"notUsed\":\"styles_notUsed__BJDX-\",\"used\":\"styles_used__GIw2A\"};","import { useMutationSend, type Send, useMutationCheckSend } from \"../../api/send\";\nimport Layout from \"../../components/Layout\";\nimport Popup from \"../../components/Popup\";\nimport QrCode from \"../../components/QrCode\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function SendPage()\n{\n\tuseTitle(\"Казначейство\");\n\tconst popupOpen = useStateBool(false);\n\tconst send = useStateObj<Send | null>(null, popupOpen.setT);\n\tconst mutation = useMutationSend(send.set);\n\tconst mutationCheck = useMutationCheckSend();\n\n\tconst reusable = useStateBool(false);\n\tconst value = useStateObj(1);\n\n\tfunction submit(positive: boolean)\n\t{\n\t\tmutation.mutate({\n\t\t\tvalue: value.v,\n\t\t\tpositive,\n\t\t\treusable: reusable.v,\n\t\t});\n\t\tmutationCheck.reset();\n\t}\n\n\treturn (\n\t\t<Layout centered homeBtn forStaff>\n\t\t\t<h2>Казначейство</h2>\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t{mutationCheck.isLoading && <Spinner />}\n\t\t\t{displayError(mutation)}\n\t\t\t<div className={styles.block}>\n\t\t\t\t<input\n\t\t\t\t\tclassName={styles.value}\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tname=\"value\"\n\t\t\t\t\tvalue={value.v}\n\t\t\t\t\tonChange={e => value.set(Math.max(1, e.target.valueAsNumber))}\n\t\t\t\t/>\n\t\t\t\t<label className={styles.reusable}>\n\t\t\t\t\t<span>Многоразовый</span>\n\t\t\t\t\t<div className={styles.checkbox}>\n\t\t\t\t\t\t<input type=\"checkbox\" checked={reusable.v} onChange={e => reusable.set(e.target.checked)} />\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.action}>\n\t\t\t\t\t<button onClick={() => submit(true)}>\n\t\t\t\t\t\tНачислить\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => submit(false)}>\n\t\t\t\t\t\tСписать\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Popup title={send.v?.reusable ? \"Многоразовый\" : \"Одноразовый\"} open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t\t<div className={styles.qr}>\n\t\t\t\t\t<QrCode code={\"send_\" + send.v?.id} colorBg=\"#ffffff00\" scale={13} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.send}>\n\t\t\t\t\t<h2>{send.v?.positive ? \"Зачисление\" : \"Списание\"}</h2>\n\t\t\t\t\t<h1>{send.v?.positive ? \"+\" : \"-\"}{send.v?.value} G</h1>\n\t\t\t\t</div>\n\t\t\t\t{displayError(mutationCheck)}\n\t\t\t\t{!send.v?.reusable &&\n\t\t\t\t\t<div className={styles.check}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonClick={() => mutationCheck.mutate(send.v?.id || \"\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tПроверить\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={mutationCheck.data?.successful ? styles.used : styles.notUsed}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{mutationCheck.data?.successful ? \"Успешный перевод\" : \"Не использован\"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","import { useMutation } from \"react-query\";\nimport { fetchJsonPost } from \"../utils/fetch\";\n\n\nexport interface Send\n{\n\tid: string,\n\tvalue: number,\n\tpositive: boolean,\n\treusable: boolean,\n}\n\nexport function useMutationSend(onSuccess?: (send: Send) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: SendData) =>\n\t\t\tawait fetchJsonPost<Send>(\"/api/send\", data),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\ninterface SendData\n{\n\tvalue: number,\n\tpositive: boolean,\n\treusable: boolean,\n}\n\nexport function useMutationCheckSend(onSuccess?: (data: CheckSendData) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (sendId: string) =>\n\t\t\tawait fetchJsonPost<CheckSendData>(\"/api/send_check\", { id: sendId }),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\ninterface CheckSendData\n{\n\tsuccessful: boolean,\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__0CejE\",\"list\":\"styles_list__4uN5e\",\"items\":\"styles_items__n-Fvc\",\"item\":\"styles_item__zIxt2\",\"item__img\":\"styles_item__img__r3iEr\",\"item__desc\":\"styles_item__desc__wbcAM\",\"item__desc__inner\":\"styles_item__desc__inner__HRATa\",\"item_few\":\"styles_item_few__nkL6C\",\"item_ended\":\"styles_item_ended__Mn60C\",\"title\":\"styles_title__u3Xt9\"};","import { useStoreItems } from \"../../api/store\";\nimport Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport styles from \"./styles.module.css\"\nimport StyledWindow from \"../../components/StyledWindow\";\nimport { Link } from \"react-router-dom\";\nimport classNames from \"../../utils/classNames\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport Textbox from \"../../components/Textbox\";\nimport Title from \"../../components/Title\";\n\nexport default function StorePage()\n{\n\tuseTitle(\"Магазин\");\n\tconst items = useStoreItems()\n\n\treturn (\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer curPage=\"store\" />}>\n\t\t\t{items.isLoading && <Spinner />}\n\t\t\t<Title className={styles.title} />\n\t\t\t<StyledWindow title=\"Магазин\" className={styles.list}>\n\t\t\t\t<div className={styles.items}>\n\t\t\t\t\t{displayError(items)}\n\t\t\t\t\t{items?.data?.map(item =>\n\t\t\t\t\t\t<Link to=\"/scanner\" className={classNames(styles.item, item.count == \"few\" && styles.item_few, item.count == \"no\" && styles.item_ended)} key={item.id}>\n\t\t\t\t\t\t\t<div className={styles.item__img}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{item.img ? <img src={item.img} alt=\"Товар\" /> : <div></div>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Textbox small dark btn className={styles.item__desc}>\n\t\t\t\t\t\t\t\t<div className={styles.item__desc__inner}>\n\t\t\t\t\t\t\t\t\t<span>{item.name} - </span>\n\t\t\t\t\t\t\t\t\t<span>{item.price}М</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</StyledWindow>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E5y+5\",\"body\":\"styles_body__nvDgq\",\"list\":\"styles_list__6yPeV\",\"items\":\"styles_items__UxmDm\",\"item\":\"styles_item__F46+o\",\"item_title\":\"styles_item_title__X67MD\",\"btns\":\"styles_btns__Ctsik\",\"btn\":\"styles_btn__pG0e4\",\"title\":\"styles_title__3QqY9\"};","import styles from \"./styles.module.css\"\nimport Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\nimport StyledWindow from \"../../components/StyledWindow\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport Textbox from \"../../components/Textbox\";\nimport classNames from \"../../utils/classNames\";\nimport Title from \"../../components/Title\";\n\nexport default function TimetablePage()\n{\n\tuseTitle(\"Расписание\");\n\tconst timetable = useStateObj(0);\n\tconst items = [\n\t\tdata_timetable,\n\t\tdata_autograph,\n\t\tdata_lections,\n\t\tdata_tournaments,\n\t][timetable.v];\n\n\treturn (\n\t\t<Layout centeredPage className={styles.root} footer={<Footer curPage=\"timetable\" />}>\n\t\t\t<Title className={styles.title} />\n\t\t\t<div className={styles.body}>\n\t\t\t\t<StyledWindow className={styles.list} scrollUpdate={timetable.v}>\n\t\t\t\t\t<div className={styles.items}>\n\t\t\t\t\t\t{items.map((el, i) => el.title ?\n\t\t\t\t\t\t\t<div className={styles.item_title} key={i}>{el.text}</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Textbox small dark key={i}><div className={styles.item}>{el.text}</div></Textbox>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</StyledWindow>\n\t\t\t\t<div className={styles.btns}>\n\t\t\t\t\t<Textbox small btn highlight={timetable.v == 0}>\n\t\t\t\t\t\t<button onClick={() => timetable.set(0)} className={classNames(styles.btn, \"title\")}>Сцены</button>\n\t\t\t\t\t</Textbox>\n\t\t\t\t\t{/* <Textbox small btn highlight={timetable.v == 1}>\n\t\t\t\t\t\t<button onClick={() => timetable.set(1)} className={classNames(styles.btn, \"title\")}>Автограф</button>\n\t\t\t\t\t</Textbox>\n\t\t\t\t\t<Textbox small btn highlight={timetable.v == 2}>\n\t\t\t\t\t\t<button onClick={() => timetable.set(2)} className={classNames(styles.btn, \"title\")}>Лекции</button>\n\t\t\t\t\t</Textbox> */}\n\t\t\t\t\t<Textbox small btn highlight={timetable.v == 3}>\n\t\t\t\t\t\t<button onClick={() => timetable.set(3)} className={classNames(styles.btn, \"title\")}>Турниры</button>\n\t\t\t\t\t</Textbox>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n\ninterface TimetableData\n{\n\ttext: string;\n\ttitle?: boolean;\n}\n\nconst data_timetable: TimetableData[] = [\n\t{ text: \"Главная сцена:\", title: true },\n\t{ text: \"12:50 - Открытие\" },\n\t{ text: \"13:00 - Шима Нори - Undertale на рояле\" },\n\t{ text: \"13:30 - Косплей дефиле блок 1\" },\n\t{ text: \"14:00 - Музыкальный блок гостей\" },\n\t{ text: \"14:30 - Косплей дефиле блок 2\" },\n\t{ text: \"15:00 - Музыкальный блок участников\" },\n\t{ text: \"15:30 - Аукцион\" },\n\t{ text: \"16:00 - Выступление Empire of Geese\" },\n\t{ text: \"17:00 - Underevent презентация\" },\n\t{ text: \"17:30 - Голосование за лучшего Санса\" },\n\t{ text: \"18:00 - Награждение\" },\n\t{ text: \"18:40 - Блок анимаций\" },\n\t{ text: \"19:40 - Закрытие\" },\n\t{ text: \"Малая сцена:\", title: true },\n\t{ text: \"12:00 - Ответы на вопросы от ютуберов\" },\n\t{ text: \"12:40 - Лотерея\" },\n\t{ text: \"13:00 - Undertale Quiz AU\" },\n\t{ text: \"13:30 - Jackbox с ютуберами\" },\n\t{ text: \"14:20 - WonderNope автограф сессия\" },\n\t{ text: \"14:40 - Игорь Чай автограф сессия\" },\n\t{ text: \"15:00 - Лотерея\" },\n\t{ text: \"15:10 - Марсильез автограф сессия\" },\n\t{ text: \"15:30 - Предпоказ песни FolkStudio\" },\n\t{ text: \"15:40 - Sirus и Folkstudio автограф сессия\" },\n\t{ text: \"16:00 - презентация игры Insult Goatbro\" },\n\t{ text: \"16:10 - InkBlot презентация вселенной и автограф сессия\" },\n\t{ text: \"16:40 - Undertale quiz original\" },\n\t{ text: \"17:00 - Лотерея\" },\n\t{ text: \"17:30 - Marina aka mari презентация вселенной Kamitale\" },\n\t{ text: \"17:50 - Sansация Презентация фильма\" },\n\t{ text: \"18:00 - Итоги конкурсов маркета\" },\n\t{ text: \"18:10 - Everybody 1-2 switch\" },\n\t{ text: \"19:00 - Дискотека\" },\n\t{ text: \"19:50 - Закрытие\" },\n];\n\nconst data_autograph: TimetableData[] = [\n\t{ text: \"13:30 - АнтиКек\" },\n\t{ text: \"14:00 - Бемон\" },\n\t{ text: \"14:30 - JF Voice и FolkStudio\" },\n\t{ text: \"15:00 - Неадекват Рекордс\" },\n\t{ text: \"15:30 - WonderNope\" },\n\t{ text: \"16:00 - Игорь Чай (тв)\" },\n\t{ text: \"16:30 - Щищ (игра в Uno)\" },\n];\n\nconst data_lections: TimetableData[] = [\n\t{ text: \"13:00 - О франшизе Hylics\" },\n\t{ text: \"13:40 - Инди игры как искусство\" },\n\t{ text: \"14:10 - Как найти ✨ту самую✨ идею для игры\" },\n\t{ text: \"14:40 - Краудфандинг авторской игры\" },\n\t{ text: \"15:20 - Что такое Touhou Project и как его употреблять?\" },\n\t{ text: \"16:00 - Производственный ад в игровой индустрии\" },\n\t{ text: \"16:40 - Анализ игр для гейм-дизайнеров и обзорщиков\" },\n];\n\nconst data_tournaments: TimetableData[] = [\n\t{ text: \"Турниры:\", title: true },\n\t{ text: \"Unfair Undyne 11:00 - 17:30\" },\n\t{ text: \"Endless Sans 11:00 - 17:30\" },\n\t{ text: \"Underverse Battles 14:00\" },\n\t{ text: \"Ретро турниры:\", title: true },\n\t{ text: \"Sega - Ultimate Mortal Combat 3 - 13:00\" },\n\t{ text: \"Ps 1 - Tekken 3 - 15:00\" },\n\t{ text: \"Snes - Super Tetris 3 - 17:00\" },\n]\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Users\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage homeBtn gap={8} forDev>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"styles_btn__w12Ul\"};","import { Link } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\"\nimport styles from \"./styles.module.css\"\nimport { useHasPermission } from \"../../api/operations\";\n\nexport default function WorkerPage()\n{\n\treturn (\n\t\t<Layout centered homeBtn gap=\"1rem\" forStaff>\n\t\t\t{useHasPermission(\"manage_store\") && <Link to={\"/manage_store\"} className={styles.btn}>Управление магазином</Link>}\n\t\t\t{useHasPermission(\"manage_quest\") && <Link to={\"/manage_quest\"} className={styles.btn}>Управление квестами</Link>}\n\t\t\t{useHasPermission(\"page_worker_quest\") && <Link to={\"/worker_quest\"} className={styles.btn}>Для квестовиков</Link>}\n\t\t\t{useHasPermission(\"page_worker_store\") && <Link to={\"/worker_store\"} className={styles.btn}>Для продавцов</Link>}\n\t\t\t{useHasPermission(\"send_any\") && <Link to={\"/send\"} className={styles.btn}>Казначейство</Link>}\n\t\t\t{useHasPermission(\"promote_worker\") && <Link to={\"/promote_worker\"} className={styles.btn}>Повысить до волонтёра</Link>}\n\t\t\t{useHasPermission(\"promote_manager\") && <Link to={\"/promote_manager\"} className={styles.btn}>Повысить до управляющего</Link>}\n\t\t\t{useHasPermission(\"manage_games\") && <Link to={\"/game_settings\"} className={styles.btn}>Игра</Link>}\n\t\t\t{useHasPermission(\"page_stats\") && <Link to={\"/stats\"} className={styles.btn}>Статистика</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Ch43Y\",\"quests\":\"styles_quests__CJF3F\",\"quest\":\"styles_quest__la9IG\",\"quest_hidden\":\"styles_quest_hidden__895fL\",\"qr\":\"styles_qr__CpwFg\",\"questCard\":\"styles_questCard__LUpC3\"};","import { useQuestsFull, type QuestFull } from \"../../api/quest\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport styles from \"./styles.module.css\"\nimport Popup from \"../../components/Popup\";\nimport QrCode from \"../../components/QrCode\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function WorkerQuestPage()\n{\n\tuseTitle(\"Qr Квесты\");\n\tconst quests = useQuestsFull();\n\tconst popupOpen = useStateBool(false);\n\tconst selectedQuest = useStateObj<QuestFull | null>(null, popupOpen.setT);\n\n\treturn (\n\t\t<Layout centered homeBtn gap=\"1rem\" height100 className={styles.root} forStaff>\n\t\t\t{quests.isLoading && <Spinner />}\n\t\t\t{displayError(quests)}\n\t\t\t<h2>Какой квест вы проводите?</h2>\n\t\t\t<div className={styles.quests}>\n\t\t\t\t{quests.data?.map(quest =>\n\t\t\t\t\t<button key={quest.id} onClick={() => selectedQuest.set(quest)} className={classNames(styles.quest, quest.hidden && styles.quest_hidden)}>\n\t\t\t\t\t\t{quest.name}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<Popup title=\"Код квеста\" open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t\t<div className={styles.qr}>\n\t\t\t\t\t<QrCode code={`quest_${selectedQuest.v?.id_big}`} colorBg=\"#ffffff00\" scale={13} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.questCard}>\n\t\t\t\t\t<div>{selectedQuest.v?.name}</div>\n\t\t\t\t\t<div>{selectedQuest.v?.reward} G</div>\n\t\t\t\t</div>\n\t\t\t\t<h3>QR-код для зачёта квеста</h3>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"items\":\"styles_items__ph2vL\",\"item\":\"styles_item__t2Q7S\",\"item__img\":\"styles_item__img__9MSeY\",\"item__desc\":\"styles_item__desc__vFBVd\",\"qr\":\"styles_qr__Sgcly\",\"item_small\":\"styles_item_small__EPwTh\"};","import Layout from \"../../components/Layout\"\nimport styles from \"./styles.module.css\"\nimport { useStoreItemsFull, type StoreItemFull } from \"../../api/store\";\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\nimport Popup from \"../../components/Popup\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport QrCode from \"../../components/QrCode\";\nimport { useTitle } from \"../../utils/useTtile\";\n\nexport default function WorkerStorePage()\n{\n\tuseTitle(\"Qr Товары\");\n\tconst items = useStoreItemsFull()\n\tconst popupOpen = useStateBool(false);\n\tconst selectedItem = useStateObj<StoreItemFull | null>(null, popupOpen.setT);\n\n\treturn (\n\t\t<Layout centeredPage gap=\"1rem\" height100 homeBtn forStaff>\n\t\t\t<h1>Продажа</h1>\n\t\t\t{items.isLoading && <Spinner />}\n\t\t\t{displayError(items)}\n\t\t\t<div className={styles.items}>\n\t\t\t\t{items?.data?.map(item =>\n\t\t\t\t\t<button className={styles.item} key={item.id} onClick={() => selectedItem.set(item)}>\n\t\t\t\t\t\t<div className={styles.item__img}>\n\t\t\t\t\t\t\t{item.img ? <img src={item.img} alt=\"Товар\" /> : <div></div>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.item__desc}>\n\t\t\t\t\t\t\t<span>{item.name}</span>\n\t\t\t\t\t\t\t<span>{item.price} G</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<Popup title=\"Код товара\" open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t\t<div className={styles.qr}>\n\t\t\t\t\t<QrCode code={`item_${selectedItem.v?.id_big}`} colorBg=\"#ffffff00\" scale={13} />\n\t\t\t\t</div>\n\t\t\t\t<div className={styles.item_small}>\n\t\t\t\t\t<div className={styles.item__img}>\n\t\t\t\t\t\t{selectedItem.v?.img ? <img src={selectedItem.v?.img} alt=\"Товар\" /> : <div></div>}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>{selectedItem.v?.name}</div>\n\t\t\t\t\t<div>{selectedItem.v?.price} G</div>\n\t\t\t\t</div>\n\t\t\t\t<h3>QR-код для продажи товара</h3>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__lfouU\",\"title2\":\"styles_title2__U2DmF\",\"title3\":\"styles_title3__eIdeM\",\"subtitle\":\"styles_subtitle__FPJqV\",\"window\":\"styles_window__hv3AU\",\"text\":\"styles_text__LeEDg\",\"chooseTeam\":\"styles_chooseTeam__5JofH\",\"chooseTeam__btn\":\"styles_chooseTeam__btn__8OQcR\",\"press\":\"styles_press__jAlFs\",\"press__btn\":\"styles_press__btn__w-3Uv\",\"circle\":\"styles_circle__+PsDd\",\"anim-circle\":\"styles_anim-circle__cc5jy\",\"title\":\"styles_title__VD3jB\",\"tourney_winners\":\"styles_tourney_winners__N9K6Q\",\"tourney_winner\":\"styles_tourney_winner__k-D2b\"};","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport type { UserGroup } from \"./user\";\n\nexport type State = \"wait\" | \"start\" | \"going\" | \"end\" | \"tourneyEnd\";\n\nexport interface GameState\n{\n\tstate: State,\n\topponent1Id: number | null,\n\topponent2Id: number | null,\n\twinner: UserGroup,\n\tcounter: number,\n\tstart: string,\n\tshowGame: boolean,\n\tteam: number,\n\ttourneyWinner1: number,\n\ttourneyWinner2: number,\n\ttourneyWinner3: number,\n}\nexport interface GameStateFull extends GameState\n{\n\tclicks1: number,\n\tclicks2: number,\n}\nexport interface GameDuration\n{\n\tduration: number,\n}\nexport interface GameCounter\n{\n\tcounter: number,\n}\nexport interface GameStartStr\n{\n\tstartStr: string,\n}\n\nexport function useGameState()\n{\n\treturn useQuery(\"gameState\", async () =>\n\t\tawait fetchJsonGet<GameState>(\"/api/game/state\")\n\t);\n}\n\nexport function useGameStateFull()\n{\n\treturn useQuery(\"gameStateFull\", async () =>\n\t\tawait fetchJsonGet<GameStateFull>(\"/api/game/state_full\")\n\t);\n}\n\nexport function useMutationSendClick(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (count: number) =>\n\t\t\tawait fetchJsonPost<GameState>(\"/api/game/click\", { count }),\n\t\tonSuccess: (state: GameState) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"gameState\", state);\n\t\t\tonSuccess?.();\n\t\t},\n\t\tonError,\n\t});\n\treturn mutation;\n}\n\n\nexport function useGameDuration()\n{\n\treturn useQuery(\"gameDuration\", async () =>\n\t\tawait fetchJsonGet<GameDuration>(\"/api/game/duration\")\n\t);\n}\n\nexport function useGameCounter()\n{\n\treturn useQuery(\"gameCounter\", async () =>\n\t\tawait fetchJsonGet<GameCounter>(\"/api/game/counter\")\n\t);\n}\n\nexport function useGameStartStr()\n{\n\treturn useQuery(\"gameStartStr\", async () =>\n\t\tawait fetchJsonGet<GameStartStr>(\"/api/game/startStr\")\n\t);\n}\n\n\nexport function useMutationGameDuration(onSuccess?: (data: GameDuration) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (duration: number) =>\n\t\t\tawait fetchJsonPost<GameDuration>(\"/api/game/duration\", { duration }),\n\t\tonSuccess: (data: GameDuration) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"gameDuration\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationGameCounter(onSuccess?: (data: GameCounter) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (counter: number) =>\n\t\t\tawait fetchJsonPost<GameCounter>(\"/api/game/counter\", { counter }),\n\t\tonSuccess: (data: GameCounter) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"gameCounter\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationGameStartStr(onSuccess?: (data: GameStartStr) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (startStr: string) =>\n\t\t\tawait fetchJsonPost<GameStartStr>(\"/api/game/startStr\", { startStr }),\n\t\tonSuccess: (data: GameStartStr) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"gameStartStr\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationGameSelectTeam(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (team: number) =>\n\t\t\tawait fetchJsonPost<GameState>(\"/api/game/select_team\", { team }),\n\t\tonSuccess: (data: GameState) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"gameState\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t\tonError,\n\t});\n\treturn mutation;\n}\n","import { useEffect } from \"react\";\nimport useUser, { useMutationOpenGame } from \"../../api/user\";\nimport useGameDialog from \"../GameDialog\";\n\nexport default function GameDialogGame()\n{\n\tconst user = useUser();\n\tconst dialog = useGameDialog();\n\tconst markAsOpen = useMutationOpenGame();\n\n\tuseEffect(() =>\n\t{\n\t\tif (user.data && !user.data.gameOpened)\n\t\t\tdialog.run(2, () => markAsOpen.mutate());\n\t\t// eslint-disable-next-line\n\t}, [user.data])\n\n\treturn <>\n\t\t{dialog.el()}\n\t</>;\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { fetchDelete, fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\nimport type { ImgData } from \"./dataTypes\";\nimport { queryListAddItem, queryListDeleteItem, queryListUpdateItem } from \"../utils/query\";\n\n\nexport interface TourneyData\n{\n\ttree: TreeNode,\n\tthird: number,\n\tcurGameNodeId: number,\n\tshowGame: boolean,\n\tended: boolean,\n}\n\nexport interface TreeNode\n{\n\tid: number,\n\tcharacterId: number,\n\tleft: TreeNode | null,\n\tright: TreeNode | null,\n}\n\nexport function useTourneyCharacters()\n{\n\treturn useQuery(\"tourneyCharacters\", async () =>\n\t\tawait fetchJsonGet<TourneyCharacter[]>(`/api/tourney/characters`)\n\t);\n}\n\nexport function characterById(characters: TourneyCharacter[] | undefined | null, id: number | undefined | null)\n{\n\treturn characters?.find(ch => ch.id == id);\n}\n\n\nexport function useTourneyData()\n{\n\treturn useQuery(\"tourney\", async () =>\n\t\tawait fetchJsonGet<TourneyData>(`/api/tourney`)\n\t);\n}\n\nexport interface TourneyCharacter\n{\n\tid: number,\n\tname: string,\n\tcolor: string,\n\timg: string,\n}\n\nexport function useMutationAddTourneyCharacter(onSuccess?: (data: TourneyCharacter) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (characterData: TourneyCharacterData) =>\n\t\t\tawait fetchJsonPost<TourneyCharacter>(\"/api/tourney/characters\", characterData),\n\t\tonSuccess: (data: TourneyCharacter) =>\n\t\t{\n\t\t\tqueryListAddItem(queryClient, \"tourneyCharacters\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport interface TourneyCharacterData\n{\n\tname: string,\n\tcolor: string,\n\timg?: ImgData,\n}\n\nexport function useMutationEditTourneyCharacter(characterId: number, onSuccess?: (data: TourneyCharacter) => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (characterData: TourneyCharacterData) =>\n\t\t\tawait fetchJsonPost<TourneyCharacter>(`/api/tourney/characters/${characterId}`, characterData),\n\t\tonSuccess: (data: TourneyCharacter) =>\n\t\t{\n\t\t\tqueryListUpdateItem(queryClient, \"tourneyCharacters\", data);\n\t\t\tonSuccess?.(data);\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\nexport function useMutationDeleteTourneyCharacter(characterId: number, onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async () =>\n\t\t\tawait fetchDelete(`/api/tourney/characters/${characterId}`),\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryListDeleteItem(queryClient, \"tourneyCharacters\", characterId);\n\t\t\tonSuccess?.();\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n\n\nexport function useMutationTourneyEditNode(nodeId: number, onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction((nodeData: TourneyNodeData) => [`/api/tourney/nodes/${nodeId}`, nodeData], onSuccess, onError);\n}\n\nexport interface TourneyNodeData\n{\n\tcharacterId: number,\n}\n\nexport function useMutationTourneyEditThird(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction((nodeData: TourneyNodeData) => [`/api/tourney/third`, nodeData], onSuccess, onError);\n}\n\nexport function useMutationTourneyStartGameAtNode(nodeId: number, onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction(() => [`/api/tourney/start_game_at_node`, { nodeId }], onSuccess, onError);\n}\n\nexport function useMutationTourneySelectNextGame(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction(() => `/api/tourney/select_next_game`, onSuccess, onError);\n}\n\nexport function useMutationTourneyStartGame(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction(() => `/api/tourney/start_game`, onSuccess, onError);\n}\n\nexport function useMutationTourneyEndGame(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction(() => `/api/tourney/end_game`, onSuccess, onError);\n}\n\nexport function useMutationTourneyEndTourney(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction(() => `/api/tourney/end_tourney`, onSuccess, onError);\n}\n\nexport function useMutationTourneyUnendTourney(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction(() => `/api/tourney/unend_tourney`, onSuccess, onError);\n}\n\nexport function useMutationTourneyReset(onSuccess?: () => void, onError?: (err: any) => void)\n{\n\treturn useMutationAction(() => `/api/tourney/reset`, onSuccess, onError);\n}\n\n\nfunction useMutationAction<T = void>(mutationFn: (v: T) => string | [string, any], onSuccess?: () => void, onError?: (err: any) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (v: T) =>\n\t\t{\n\t\t\tconst params = mutationFn(v);\n\t\t\tconst newLocal = typeof params == \"string\" ? [params, undefined] as [string, undefined] : params;\n\t\t\treturn await fetchJsonPost<TourneyData>(...newLocal);\n\t\t},\n\t\tonSuccess: (data: TourneyData) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"tourney\", data);\n\t\t\tonSuccess?.();\n\t\t},\n\t\tonError: onError,\n\t});\n\treturn mutation;\n}\n","import Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\nimport classNames from \"../../utils/classNames\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport useStateObj from \"../../utils/useStateObj\";\nimport { useGameState, useMutationGameSelectTeam, useMutationSendClick } from \"../../api/game\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useEffect } from \"react\";\nimport StyledWindow from \"../../components/StyledWindow\";\nimport { useDisableZoom } from \"../../utils/useDisableZoom\";\nimport randomInt from \"../../utils/randomInt\";\nimport GameDialogGame from \"../../components/GameDialogGame\";\nimport { useTourneyCharacters } from \"../../api/tourney\";\nimport { characterById } from \"../../api/tourney\";\nimport Title from \"../../components/Title\";\nimport Textbox from \"../../components/Textbox\";\n\n\nexport default function GamePage()\n{\n\tuseTitle(\"Игра\");\n\tuseDisableZoom();\n\tconst state = useGameState();\n\tconst characters = useTourneyCharacters();\n\tconst counter = useStateObj(0);\n\tconst clicks = useStateObj(0);\n\tconst sendDelay = useStateObj(0);\n\tconst lastClickSend = useStateObj(Date.now());\n\tconst sendClick = useMutationSendClick(() => lastClickSend.set(Date.now()), () => lastClickSend.set(Date.now()));\n\tconst selectTeam = useMutationGameSelectTeam();\n\n\tconst characterLeft = characterById(characters.data, state.data?.opponent1Id);\n\tconst characterRight = characterById(characters.data, state.data?.opponent2Id);\n\tconst characterWinner = state.data?.winner == 1 ? characterLeft : state.data?.winner == 2 ? characterRight : null;\n\tconst characterTeam = state.data?.team == 1 ? characterLeft : state.data?.team == 2 ? characterRight : null;\n\n\tconst characterTourneyWinner1 = characterById(characters.data, state.data?.tourneyWinner1);\n\tconst characterTourneyWinner2 = characterById(characters.data, state.data?.tourneyWinner2);\n\tconst characterTourneyWinner3 = characterById(characters.data, state.data?.tourneyWinner3);\n\n\tuseEffect(() =>\n\t{\n\t\tif (state.isFetching) return;\n\t\tif (state.data?.state == \"going\") return;\n\n\t\tif (clicks.v != 0) clicks.set(0);\n\t\tconst t = setTimeout(() => state.refetch(), 5000);\n\n\t\treturn () => clearTimeout(t);\n\t\t// eslint-disable-next-line\n\t}, [state.isFetching])\n\n\tuseEffect(() =>\n\t{\n\t\tif (!state.data) return;\n\t\tcounter.set(state.data.counter);\n\t\tif (state.data.counter < 0) return;\n\t\tconst t = setInterval(() =>\n\t\t{\n\t\t\tcounter.set(v =>\n\t\t\t{\n\t\t\t\tv = Math.max(v - 1, 0);\n\t\t\t\tif (v == 0)\n\t\t\t\t{\n\t\t\t\t\tstate.refetch();\n\t\t\t\t\tclearInterval(t);\n\t\t\t\t}\n\t\t\t\treturn v;\n\t\t\t});\n\t\t}, 1000);\n\t\treturn () => clearInterval(t);\n\t\t// eslint-disable-next-line\n\t}, [state.data])\n\n\tuseEffect(() =>\n\t{\n\t\tif (state.data?.state != \"going\") return;\n\n\t\tconst t = setInterval(() =>\n\t\t{\n\t\t\tstate.refetch();\n\t\t}, 5000);\n\t\tconst ct = () => clearInterval(t);\n\n\t\tif (clicks.v <= 0 || sendClick.isLoading) return ct;\n\t\tif (Date.now() - lastClickSend.v < sendDelay.v) return ct;\n\n\t\tsendClick.mutate(clicks.v);\n\t\tclicks.set(0);\n\t\tsendDelay.set(randomInt(1000, 3000));\n\t\treturn ct;\n\t\t// eslint-disable-next-line\n\t}, [clicks.v, state.data?.state]);\n\n\treturn (<>\n\t\t{state.data?.state == \"start\" && <GameDialogGame />}\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer curPage=\"game\" />}>\n\t\t\t<Title className={styles.title} />\n\t\t\t{state.isLoading && <Spinner />}\n\t\t\t{displayError(state)}\n\t\t\t{selectTeam.isLoading && <Spinner />}\n\t\t\t{displayError(selectTeam)}\n\t\t\t<StyledWindow className={styles.window}>\n\t\t\t\t{(state.isLoading || state.data?.state == \"wait\") && <>\n\t\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>Чтобы определить какой санс лучший приходите на сцену</span>\n\t\t\t\t\t\t\t{state.data?.start && <span> в {state.data.start}</span>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\t\t\t\t{state.data?.team == 0 && (state.data?.state == \"start\" || state.data?.state == \"going\") ? <>\n\t\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t\t<div className={styles.title2}>Победить должен</div>\n\t\t\t\t\t\t<div className={styles.chooseTeam}>\n\t\t\t\t\t\t\t<Textbox small btn className={styles.chooseTeam__btn}>\n\t\t\t\t\t\t\t\t<button className=\"clearBtn\" onClick={() => selectTeam.mutate(1)}>{characterLeft?.name || \"N/A\"}</button>\n\t\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t\t<Textbox small btn className={styles.chooseTeam__btn}>\n\t\t\t\t\t\t\t\t<button className=\"clearBtn\" onClick={() => selectTeam.mutate(2)}>{characterRight?.name || \"N/A\"}</button>\n\t\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</> : <>\n\t\t\t\t\t{state.data?.state == \"start\" && <>\n\t\t\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t\t\t<div className={styles.title2}>{characterTeam?.name || \"N/A\"} победит!</div>\n\t\t\t\t\t\t\t<h2 className={styles.subtitle}>Дождитесь начала</h2>\n\t\t\t\t\t\t\t<h1 className={styles.title}>{Math.floor(counter.v / 60)}:{(counter.v % 60).toString().padStart(2, \"0\")}</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t{state.data?.state == \"going\" && <button\n\t\t\t\t\t\tclassName={classNames(styles.press, \"clearBtn\")}\n\t\t\t\t\t\tonClick={e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tanimateBtnPress(e.target as HTMLElement);\n\t\t\t\t\t\t\tclicks.set(v => v + 1);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<h1 className={styles.title2}>{characterTeam?.name || \"N/A\"} победит!</h1>\n\t\t\t\t\t\t{/* <h1 className={styles.title}>{Math.floor(counter.v / 60)}:{(counter.v % 60).toString().padStart(2, \"0\")}</h1> */}\n\t\t\t\t\t\t{/* <h1 className={styles.title}>{clicks.v}</h1> */}\n\t\t\t\t\t\t<div className={styles.press__btn}>Жми!!!</div>\n\t\t\t\t\t</button>}\n\t\t\t\t</>}\n\t\t\t\t{state.data?.state == \"end\" && <>\n\t\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t\t<div className={styles.title2}>{characterWinner?.name || \"...\"} побеждает!</div>\n\t\t\t\t\t\t<h1 className={styles.title3}>\n\t\t\t\t\t\t\t{state.data.winner == 0 ? \"Игра завершена!\" :\n\t\t\t\t\t\t\t\tstate.data.team == state.data.winner ? \"Победа!\" : \"Проигрыш!\"}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\t\t\t\t{state.data?.state == \"tourneyEnd\" && <>\n\t\t\t\t\t<div className={styles.text}>\n\t\t\t\t\t\t<div className={styles.title2}>Турнир завершён!</div>\n\t\t\t\t\t\t<div className={styles.tourney_winners}>\n\t\t\t\t\t\t\t<Textbox small className={styles.tourney_winner}>\n\t\t\t\t\t\t\t\t<img src={characterTourneyWinner1?.img} alt={characterTourneyWinner1?.name || \"N/A\"} />\n\t\t\t\t\t\t\t\t<div>1 место</div>\n\t\t\t\t\t\t\t\t<div>{characterTourneyWinner1?.name || \"N/A\"}</div>\n\t\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t\t<Textbox small className={styles.tourney_winner}>\n\t\t\t\t\t\t\t\t<img src={characterTourneyWinner2?.img} alt={characterTourneyWinner2?.name || \"N/A\"} />\n\t\t\t\t\t\t\t\t<div>2 место</div>\n\t\t\t\t\t\t\t\t<div>{characterTourneyWinner2?.name || \"N/A\"}</div>\n\t\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t\t<Textbox small className={styles.tourney_winner}>\n\t\t\t\t\t\t\t\t<img src={characterTourneyWinner3?.img} alt={characterTourneyWinner3?.name || \"N/A\"} />\n\t\t\t\t\t\t\t\t<div>3 место</div>\n\t\t\t\t\t\t\t\t<div>{characterTourneyWinner3?.name || \"N/A\"}</div>\n\t\t\t\t\t\t\t</Textbox>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</>}\n\t\t\t</StyledWindow>\n\t\t</Layout>\n\t</>);\n}\n\nfunction animateBtnPress(el: HTMLElement)\n{\n\tconst btn = (el instanceof HTMLButtonElement ? el : el.parentElement) as HTMLButtonElement;\n\n\tconst circle = document.createElement(\"div\");\n\tbtn.appendChild(circle);\n\tcircle.classList.add(styles.circle)\n\n\tsetTimeout(() => btn.removeChild(circle), 1000);\n}","import { useEffect } from \"react\"\n\nexport function useDisableZoom()\n{\n\tuseEffect(() =>\n\t{\n\t\tconst meta = document.querySelector('meta[name=\"viewport\"]');\n\t\tif (!meta) return;\n\t\tconst content = meta.getAttribute(\"content\") || \"\";\n\t\tmeta.setAttribute(\"content\", \"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\");\n\t\treturn () => meta.setAttribute(\"content\", content);\n\t}, []);\n}\n","export default function randomInt(max: number): number;\nexport default function randomInt(min: number, max: number): number;\nexport default function randomInt(maxmin: number, max?: number)\n{\n\tif (max != undefined)\n\t\treturn Math.floor(Math.random() * (maxmin - max)) + max;\n\treturn Math.floor(Math.random() * maxmin);\n}","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"styles_input__xbjXW\",\"openScreen\":\"styles_openScreen__MsUEq\",\"start\":\"styles_start__RrOg2\",\"tourney\":\"styles_tourney__LbJvy\",\"hidden\":\"styles_hidden__l9l0C\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__5HVzG\",\"curGameState\":\"styles_curGameState__gIzIY\",\"characterName\":\"styles_characterName__UzYST\",\"node\":\"styles_node__0tgzb\",\"nodeC\":\"styles_nodeC__prjKp\",\"nodeCollapsed\":\"styles_nodeCollapsed__47HCo\",\"nodeId\":\"styles_nodeId__rEPYi\",\"nodeData\":\"styles_nodeData__mDSf1\",\"img\":\"styles_img__fag15\",\"btn\":\"styles_btn__T4qpB\",\"winnerSelect\":\"styles_winnerSelect__xkBSA\",\"ctrlBtns\":\"styles_ctrlBtns__a0fV2\",\"collapseBtn\":\"styles_collapseBtn__Mfde+\",\"third\":\"styles_third__XWyfv\"};","export default function IconPlay()\n{\n\treturn (\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\" height=\"1em\" width=\"1em\" fill=\"currentColor\">\n\t\t\t<path d=\"M320-273v-414q0-17 12-28.5t28-11.5q5 0 10.5 1.5T381-721l326 207q9 6 13.5 15t4.5 19q0 10-4.5 19T707-446L381-239q-5 3-10.5 4.5T360-233q-16 0-28-11.5T320-273Zm80-207Zm0 134 210-134-210-134v268Z\" />\n\t\t</svg>\n\t)\n}\n","import { useEffect } from \"react\";\nimport { useMutationTourneyEditNode, useMutationTourneyEditThird, useMutationTourneyStartGameAtNode, useTourneyCharacters, useTourneyData, type TourneyCharacter, type TourneyData, type TreeNode } from \"../../../api/tourney\";\nimport Spinner from \"../../../components/Spinner\";\nimport classNames from \"../../../utils/classNames\";\nimport displayError from \"../../../utils/displayError\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport IconCancel from \"../../../icons/cancel\";\nimport IconSave from \"../../../icons/save\";\nimport IconPlay from \"../../../icons/play\";\nimport PopupConfirm from \"../../../components/PopupConfirm\";\nimport IconEdit from \"../../../icons/edit\";\nimport { type UseQueryResult } from \"react-query\";\nimport { characterById } from \"../../../api/tourney\";\n\nexport default function TourneyEdit()\n{\n\tconst tourney = useTourneyData();\n\tconst characters = useTourneyCharacters();\n\n\tconst curGame = findNode(tourney.data?.tree, tourney.data?.curGameNodeId || 0, tourney.data?.third || -1);\n\tconst curGameWinner = characterById(characters.data, curGame?.characterId);\n\tconst curGameCharacterLeft = characterById(characters.data, curGame?.left?.characterId);\n\tconst curGameCharacterRight = characterById(characters.data, curGame?.right?.characterId);\n\n\tconst errors = tourney.data?.tree && characters.data && checkTreeForErrors(tourney.data.tree, characters.data);\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t{characters.isLoading && <Spinner />}\n\t\t\t{displayError(characters)}\n\t\t\t{tourney.data && characters.data && <>\n\t\t\t\t<div className={styles.curGameState}>\n\t\t\t\t\t<span>Текущая игра: </span>\n\t\t\t\t\t{!curGame ? <span>не запущено</span> : <span>\n\t\t\t\t\t\t<span className={styles.characterName}>{curGameCharacterLeft?.name ?? \"N/A\"}</span>\n\t\t\t\t\t\t<span> vs </span>\n\t\t\t\t\t\t<span className={styles.characterName}>{curGameCharacterRight?.name ?? \"N/A\"}</span>\n\t\t\t\t\t\t<CancelGameBtn />\n\t\t\t\t\t</span>}\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<span>Победитель: </span>\n\t\t\t\t\t\t<EditWinnerBtn tourney={tourney} winner={curGameWinner} oponent1={curGameCharacterLeft} oponent2={curGameCharacterRight} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Турнирная таблица:</div>\n\t\t\t\t{errors && errors.map(e => <h3 style={{ color: \"tomato\" }}>{e}</h3>)}\n\t\t\t\t<Tree tree={tourney.data.tree} characters={characters.data} />\n\t\t\t\t<div style={{ marginTop: \"0.5rem\" }}>Третье место:</div>\n\t\t\t\t<ThirdPlace tree={tourney.data.tree} third={tourney.data.third} characters={characters.data} />\n\t\t\t</>}\n\t\t</div>\n\t);\n}\n\nfunction CancelGameBtn()\n{\n\tconst canceling = useStateBool(false);\n\n\treturn <>\n\t\t<button className={styles.btn} onClick={canceling.setT}><IconCancel /></button>\n\t\t<PopupConfirm\n\t\t\ttitle={\"Сбросить текущую игру\"}\n\t\t\titemId={-1} mutationFn={useMutationTourneyStartGameAtNode}\n\t\t\topen={canceling.v} close={canceling.setF}\n\t\t/>\n\t</>\n}\n\nfunction EditWinnerBtn({ tourney, winner, oponent1, oponent2 }: { tourney: UseQueryResult<TourneyData>, winner: TourneyCharacter | undefined, oponent1: TourneyCharacter | undefined, oponent2: TourneyCharacter | undefined })\n{\n\tconst winnerId = useStateObj(winner?.id || -1);\n\tconst editing = useStateBool(false);\n\tconst editNode = useMutationTourneyEditNode(tourney.data?.curGameNodeId || -1);\n\n\t// eslint-disable-next-line\n\tuseEffect(() => { winnerId.set(winner?.id || -1) }, [winner?.id]);\n\n\tconst winnerName =\n\t\twinnerId.v == winner?.id ? winner.name :\n\t\t\twinnerId.v == oponent1?.id ? oponent1.name :\n\t\t\t\twinnerId.v == oponent2?.id ? oponent2.name : \"отсутствует\";\n\n\treturn <>\n\t\t{editNode.isLoading && <Spinner />}\n\t\t{displayError(editNode)}\n\t\t{!editing.v ? <>\n\t\t\t<span className={styles.characterName}>{winnerName}</span>\n\t\t\t{oponent1 && oponent2 &&\n\t\t\t\t<button className={styles.btn} onClick={() =>\n\t\t\t\t{\n\t\t\t\t\ttourney.refetch()\n\t\t\t\t\tediting.setT();\n\t\t\t\t}}><IconEdit /></button>\n\t\t\t}\n\t\t</> : <>\n\t\t\t{tourney.isFetching && <Spinner />}\n\t\t\t<select className={styles.winnerSelect} value={winnerId.v} onChange={e => winnerId.set(parseInt(e.target.value, 10))}>\n\t\t\t\t<option value=\"-1\">отсутствует</option>\n\t\t\t\t<option value={oponent1?.id || \"-1\"}>{oponent1?.name ?? \"N/A\"}</option>\n\t\t\t\t<option value={oponent2?.id || \"-1\"}>{oponent2?.name ?? \"N/A\"}</option>\n\t\t\t</select>\n\t\t\t<button className={styles.btn} onClick={() =>\n\t\t\t{\n\t\t\t\teditNode.mutate({ characterId: winnerId.v });\n\t\t\t\tediting.setF();\n\t\t\t}}>\n\t\t\t\t<IconSave />\n\t\t\t</button>\n\t\t\t<button className={styles.btn} onClick={editing.setF}><IconCancel /></button>\n\t\t</>}\n\t</>\n}\n\n\nfunction Tree({ tree, characters, c = false }: { tree: TreeNode, characters: TourneyCharacter[], c?: boolean })\n{\n\tconst collapsed = useStateBool(true);\n\tconst starting = useStateBool(false);\n\tconst characterId = useStateObj(tree.characterId);\n\tconst character = characters.find(ch => ch.id == characterId.v);\n\tconst editNode = useMutationTourneyEditNode(tree.id);\n\n\tconst characterLeft = characterById(characters, tree.left?.characterId);\n\tconst characterRight = characterById(characters, tree.right?.characterId);\n\n\t// eslint-disable-next-line\n\tuseEffect(() => { characterId.set(tree.characterId) }, [tree.characterId]);\n\n\treturn (\n\t\t<div className={classNames(styles.node, c && styles.nodeC, collapsed.v && styles.nodeCollapsed)}>\n\t\t\t<div className={styles.nodeId}>{tree.id}</div>\n\t\t\t<div className={styles.nodeData}>\n\t\t\t\t{character ? <>\n\t\t\t\t\t<img src={character?.img} alt={character?.name} />\n\t\t\t\t\t<div>{character?.name}</div>\n\t\t\t\t</> : <>\n\t\t\t\t\t<div className={styles.img}></div>\n\t\t\t\t\t<div>Нет победителя</div>\n\t\t\t\t</>}\n\t\t\t\t<div style={{ flexGrow: 1 }}></div>\n\t\t\t\t{editNode.isLoading && <Spinner block />}\n\t\t\t\t{displayError(editNode)}\n\t\t\t\t{characterId.v != tree.characterId && <span className={styles.ctrlBtns}>\n\t\t\t\t\t<button onClick={() => editNode.mutate({ characterId: characterId.v })}><IconSave /></button>\n\t\t\t\t\t<button onClick={() => { characterId.set(tree.characterId); editNode.reset(); }}><IconCancel /></button>\n\t\t\t\t</span>}\n\t\t\t\t{characterLeft && characterRight && <button onClick={starting.setT}><IconPlay /></button>}\n\t\t\t\t<select value={characterId.v} onChange={e => characterId.set(parseInt(e.target.value, 10))}>\n\t\t\t\t\t<option value=\"-1\">Нет победителя</option>\n\t\t\t\t\t{characters.map(ch => <option value={ch.id} key={ch.id}>{ch.name}</option>)}\n\t\t\t\t</select>\n\t\t\t\t{(tree.left || tree.right) && <button className={styles.collapseBtn} onClick={collapsed.toggle}></button>}\n\t\t\t</div>\n\t\t\t<PopupConfirm\n\t\t\t\ttitle={<><h3>Выбрать для запуска</h3><h4>{characterLeft?.name ?? \"N/A\"} vs {characterRight?.name ?? \"N/A\"}</h4></>}\n\t\t\t\titemId={tree.id} mutationFn={useMutationTourneyStartGameAtNode}\n\t\t\t\topen={starting.v} close={starting.setF}\n\t\t\t/>\n\t\t\t{tree.left && <Tree tree={tree.left} characters={characters} c={!c} />}\n\t\t\t{tree.right && <Tree tree={tree.right} characters={characters} c={c} />}\n\t\t</div>\n\t);\n}\n\nfunction findNode(tree: TreeNode | null | undefined, id: number, third: number): TreeNode | null\n{\n\tif (!tree) return null;\n\tif (tree.id == id) return tree;\n\tif (id == -3)\n\t{\n\t\tconst left = { id: -2, characterId: (!tree.left?.characterId || tree.left?.characterId == -1 ? null : tree.left.left?.characterId == tree.left?.characterId ? tree.left.right?.characterId : tree.left.left?.characterId) || -1, left: null, right: null };\n\t\tconst right = { id: -2, characterId: (!tree.right?.characterId || tree.right?.characterId == -1 ? null : tree.right.left?.characterId == tree.right?.characterId ? tree.right.right?.characterId : tree.right.left?.characterId) || -1, left: null, right: null };\n\t\treturn { id: -3, characterId: third, left, right, };\n\t}\n\treturn findNode(tree.left, id, third) || findNode(tree.right, id, third);\n}\n\nfunction ThirdPlace({ tree, third, characters }: { tree: TreeNode, third: number, characters: TourneyCharacter[] })\n{\n\tconst starting = useStateBool(false);\n\tconst characterId = useStateObj(third);\n\tconst character = characterById(characters, characterId.v);\n\tconst editNode = useMutationTourneyEditThird();\n\n\tconst characterLeftId = !tree.left?.characterId || tree.left?.characterId == -1 ? null : tree.left.left?.characterId == tree.left?.characterId ? tree.left.right?.characterId : tree.left.left?.characterId;\n\tconst characterRightId = !tree.right?.characterId || tree.right?.characterId == -1 ? null : tree.right.left?.characterId == tree.right?.characterId ? tree.right.right?.characterId : tree.right.left?.characterId;\n\tconst characterLeft = characterById(characters, characterLeftId);\n\tconst characterRight = characterById(characters, characterRightId);\n\n\t// eslint-disable-next-line\n\tuseEffect(() => { characterId.set(third) }, [third]);\n\n\treturn (\n\t\t<div className={styles.third}>\n\t\t\t<div className={styles.node}>\n\t\t\t\t<div className={styles.nodeData}>\n\t\t\t\t\t{character ? <>\n\t\t\t\t\t\t<img src={character?.img} alt={character?.name} />\n\t\t\t\t\t\t<div>{character?.name}</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div className={styles.img}></div>\n\t\t\t\t\t\t<div>Нет победителя</div>\n\t\t\t\t\t</>}\n\t\t\t\t\t<div style={{ flexGrow: 1 }}></div>\n\t\t\t\t\t{editNode.isLoading && <Spinner block />}\n\t\t\t\t\t{displayError(editNode)}\n\t\t\t\t\t{characterId.v != third && <span className={styles.ctrlBtns}>\n\t\t\t\t\t\t<button onClick={() => editNode.mutate({ characterId: characterId.v })}><IconSave /></button>\n\t\t\t\t\t\t<button onClick={() => { characterId.set(third); editNode.reset(); }}><IconCancel /></button>\n\t\t\t\t\t</span>}\n\t\t\t\t\t{characterLeft && characterRight && <button onClick={starting.setT}><IconPlay /></button>}\n\t\t\t\t\t<select value={characterId.v} onChange={e => characterId.set(parseInt(e.target.value, 10))}>\n\t\t\t\t\t\t<option value=\"-1\">Нет победителя</option>\n\t\t\t\t\t\t{characters.map(ch => <option value={ch.id} key={ch.id}>{ch.name}</option>)}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<PopupConfirm\n\t\t\t\t\ttitle={<><h3>Запустить игру</h3><h4>{characterLeft?.name ?? \"N/A\"} vs {characterRight?.name ?? \"N/A\"}</h4></>}\n\t\t\t\t\titemId={-3} mutationFn={useMutationTourneyStartGameAtNode}\n\t\t\t\t\topen={starting.v} close={starting.setF}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={styles.node}>\n\t\t\t\t<div className={styles.nodeData}>\n\t\t\t\t\t{characterLeft ? <>\n\t\t\t\t\t\t<img src={characterLeft?.img} alt={characterLeft?.name} />\n\t\t\t\t\t\t<div>{characterLeft?.name}</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div className={styles.img}></div>\n\t\t\t\t\t\t<div>Нет проигравшего</div>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={styles.node}>\n\t\t\t\t<div className={styles.nodeData}>\n\t\t\t\t\t{characterRight ? <>\n\t\t\t\t\t\t<img src={characterRight?.img} alt={characterRight?.name} />\n\t\t\t\t\t\t<div>{characterRight?.name}</div>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<div className={styles.img}></div>\n\t\t\t\t\t\t<div>Нет проигравшего</div>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction checkTreeForErrors(tree: TreeNode, characters: TourneyCharacter[])\n{\n\tlet parents = [tree];\n\tlet children = [] as TreeNode[];\n\tlet errors = [];\n\twhile (parents.length != 0)\n\t{\n\t\tfor (const node of parents)\n\t\t{\n\t\t\tif (node.characterId == -1) continue;\n\t\t\tconst same = parents.filter(n => n.characterId == node.characterId);\n\t\t\tif (same.length > 1)\n\t\t\t\terrors.push(`Ноды с id=[${same.map(n => n.id).join(\", \")}] имеют одинакового противника: ${characterById(characters, node.characterId)?.name}`);\n\t\t}\n\t\tfor (const p of parents)\n\t\t{\n\t\t\tif (p.left) children.push(p.left);\n\t\t\tif (p.right) children.push(p.right);\n\t\t\tif (p.characterId != -1 && (p.left || p.right))\n\t\t\t{\n\t\t\t\tif (p.characterId != p.left?.characterId && p.characterId != p.right?.characterId)\n\t\t\t\t\terrors.push(`Победитель ноды id=${p.id} не совпадает с противниками: ${characterById(characters, p.characterId)?.name} != [${characterById(characters, p.left?.characterId)?.name}, ${characterById(characters, p.right?.characterId)?.name}]`);\n\t\t\t}\n\t\t}\n\t\tparents = children;\n\t\tchildren = [];\n\t}\n\treturn Array.from(new Set(errors));\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"styles_btn__l5n2e\"};","import type { UseMutationResult } from \"react-query\";\nimport displayError from \"../../utils/displayError\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport Popup from \"../Popup\";\nimport Spinner from \"../Spinner\";\nimport styles from \"./styles.module.css\"\n\nexport default function ConfirmingButton({ h, bt, rt, disabled, className, mutation, children }: ConfirmingButtonProps)\n{\n\tconst popupOpen = useStateBool(false);\n\tconst popupOpen2 = useStateBool(false);\n\tconst err = useStateObj(null);\n\n\tconst mutate = mutation(popupOpen2.setT, err.set)\n\n\treturn <>\n\t\t{mutate.isLoading && <Spinner />}\n\t\t<button className={className} disabled={disabled} onClick={popupOpen.setT}>{children}</button>\n\t\t<Popup open={popupOpen.v} close={popupOpen.setF} closeOnOutclick>\n\t\t\t<h2>{h}</h2>\n\t\t\t<br />\n\t\t\t<button className={styles.btn} onClick={() =>\n\t\t\t{\n\t\t\t\tpopupOpen.setF();\n\t\t\t\tmutate.mutate();\n\t\t\t}}>{bt}</button>\n\t\t</Popup>\n\t\t<Popup open={popupOpen2.v} close={popupOpen2.setF} closeOnOutclick>\n\t\t\t<h2>{rt}</h2>\n\t\t</Popup>\n\t\t<Popup open={!!err.v} close={() => err.set(null)} closeOnOutclick>\n\t\t\t{displayError(mutate)}\n\t\t</Popup>\n\t</>\n}\n\ninterface ConfirmingButtonProps extends React.PropsWithChildren\n{\n\th: string,\n\tbt: string,\n\trt: string,\n\tdisabled?: boolean,\n\tclassName?: string,\n\tmutation: (onSuccess?: () => void, onError?: (err: any) => void) => UseMutationResult<any, any, void, unknown>\n}\n","import { Link } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\";\nimport IconCancel from \"../../icons/cancel\";\nimport IconSave from \"../../icons/save\";\nimport styles from \"./styles.module.css\"\nimport useStateObj from \"../../utils/useStateObj\";\nimport { useMutationGameCounter, useMutationGameDuration, useMutationGameStartStr, useGameCounter, useGameDuration, useGameStartStr } from \"../../api/game\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useEffect } from \"react\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport TourneyEdit from \"./TourneyEdit\";\nimport { useMutationTourneyEndGame, useMutationTourneyEndTourney, useMutationTourneyReset, useMutationTourneySelectNextGame, useMutationTourneyStartGame, useMutationTourneyUnendTourney, useTourneyData } from \"../../api/tourney\";\nimport ConfirmingButton from \"../../components/ConfirmingButton\";\nimport type { UseMutationResult, UseQueryResult } from \"react-query\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function GameSettingsPage()\n{\n\tuseTitle(\"Настройки игры\");\n\tconst tourney = useTourneyData();\n\n\treturn (\n\t\t<Layout centeredPage homeBtn gap=\"2rem\" forStaff>\n\t\t\t<h1>Настройки игры</h1>\n\t\t\t{tourney.isLoading && <Spinner />}\n\t\t\t{displayError(tourney)}\n\t\t\t<Link to=\"/tourney_screen\" className={styles.openScreen}>Открыть экран</Link>\n\t\t\t<Link to=\"/game_characters\" className={styles.openScreen}>Персонажи турнира</Link>\n\t\t\t<Input text=\"Время начала\" type=\"text\" query={useGameStartStr} getv={d => d?.startStr || \"\"} newv={inp => inp.value} mutation={useMutationGameStartStr} />\n\t\t\t<Input text=\"Длительность игры (сек.)\" type=\"number\" query={useGameDuration} getv={d => d?.duration || 0} newv={inp => inp.valueAsNumber} mutation={useMutationGameDuration} />\n\t\t\t<Input text=\"Обратный отсчёт (сек.)\" type=\"number\" query={useGameCounter} getv={d => d?.counter || 0} newv={inp => inp.valueAsNumber} mutation={useMutationGameCounter} />\n\t\t\t<div className={styles.tourney}>\n\t\t\t\t<h3>Управление турниром</h3>\n\t\t\t\t<div>\n\t\t\t\t\t<ConfirmingButton className={styles.start} h=\"Выбрать следующую игру?\" bt=\"Выбрать\" rt=\"Игра выбрана!\" disabled={!tourney.data || tourney.data?.showGame} mutation={useMutationTourneySelectNextGame}>Выбрать следующую игру</ConfirmingButton>\n\t\t\t\t\t<ConfirmingButton className={styles.start} h=\"Запустить игру?\" bt=\"Запустить\" rt=\"Игра запущена!\" disabled={!tourney.data || tourney.data?.showGame || tourney.data.curGameNodeId == -1} mutation={useMutationTourneyStartGame}>Запустить игру</ConfirmingButton>\n\t\t\t\t\t<ConfirmingButton className={styles.start} h=\"Завершить игру?\" bt=\"Завершить\" rt=\"Игра завершена!\" disabled={!tourney.data?.showGame} mutation={useMutationTourneyEndGame}>Завершить игру</ConfirmingButton>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div style={{ flexGrow: 1 }}></div>\n\t\t\t\t\t<ConfirmingButton className={classNames(styles.start, !tourney.data?.ended && styles.hidden)} h=\"Отменить завершение турнира?\" bt=\"Отменить\" rt=\"Завершение турнира отменено!\" mutation={useMutationTourneyUnendTourney}>Отменить завершение турнира</ConfirmingButton>\n\t\t\t\t\t<ConfirmingButton className={classNames(styles.start, tourney.data?.ended && styles.hidden)} h=\"Завершить турнир?\" bt=\"Завершить\" rt=\"Турнир завершён!\" mutation={useMutationTourneyEndTourney}>Завершить турнир</ConfirmingButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<TourneyEdit />\n\t\t\t<ConfirmingButton className={styles.start} h=\"Сбросить весь турнир?\" bt=\"Сбросить\" rt=\"Весь турнир сброшен!\" mutation={useMutationTourneyReset}>Сбросить весь турнир</ConfirmingButton>\n\t\t</Layout>\n\t);\n}\n\nfunction Input<T, K extends number | string>({ text, type, getv, newv, query, mutation }: { text: string, type: \"number\" | \"text\", getv: (data?: T) => K, newv: (inp: HTMLInputElement) => K, query: () => UseQueryResult<T, unknown>, mutation: () => UseMutationResult<T, any, K, unknown> })\n{\n\tconst value = useStateObj(getv());\n\tconst queryR = query();\n\tconst mutate = mutation();\n\n\t// eslint-disable-next-line\n\tuseEffect(() => value.set(getv(queryR.data)), [queryR.data]);\n\n\treturn (\n\t\t<div className={styles.input}>\n\t\t\t{queryR.isLoading && <Spinner />}\n\t\t\t{mutate.isLoading && <Spinner />}\n\t\t\t{displayError(queryR)}\n\t\t\t{displayError(mutate)}\n\t\t\t<span>{text}</span>\n\t\t\t<input type={type} value={value.v} onChange={e => value.set(newv(e.target))} />\n\t\t\t{queryR.data && value.v != getv(queryR.data) && <>\n\t\t\t\t<button onClick={() => mutate.mutate(value.v)}><IconSave /></button>\n\t\t\t\t<button onClick={() => value.set(getv(queryR.data))}><IconCancel /></button>\n\t\t\t</>}\n\t\t</div>\n\t)\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__rT4Gh\",\"back\":\"styles_back__awg9C\",\"barShake\":\"styles_barShake__Ur9jk\",\"going\":\"styles_going__+UF8o\",\"shake\":\"styles_shake__zxQyZ\",\"bar\":\"styles_bar__U71pT\",\"bar__img\":\"styles_bar__img__JCN39\",\"barLeft\":\"styles_barLeft__XSCZr\",\"barRight\":\"styles_barRight__GNhlX\",\"dot\":\"styles_dot__QlpbG\",\"nums\":\"styles_nums__QEHWB\",\"msg\":\"styles_msg__5G-O7\",\"soundBtn\":\"styles_soundBtn__VzFT+\",\"frame\":\"styles_frame__aLrbS\",\"rects\":\"styles_rects__tHlp8\",\"rect\":\"styles_rect__BhPFH\"};","import { useEffect } from \"react\";\nimport type { GameStateFull } from \"../../api/game\";\nimport { formatError } from \"../../utils/displayError\";\nimport { fetchJsonGet } from \"../../utils/fetch\";\nimport useStateObj from \"../../utils/useStateObj\";\nimport { useNavigate, type NavigateFunction } from \"react-router-dom\";\n\nclass Game\n{\n\tpublic barPercent = \"50\";\n\tpublic error: string | null = null;\n\tpublic get isGoing() { return this.state?.state == \"going\"; }\n\tpublic get opponentLeftId() { return this.state?.opponent1Id || -1; }\n\tpublic get opponentRightId() { return this.state?.opponent2Id || -1; }\n\tpublic get winnerId() { return this.state?.winner == 1 ? this.opponentLeftId : this.state?.winner == 2 ? this.opponentRightId : -1; }\n\tpublic get titleType()\n\t{\n\t\tif (this.error) return \"error\";\n\t\treturn ({\n\t\t\twait: \"wait\",\n\t\t\tstart: \"counter\",\n\t\t\tgoing: \"counter\",\n\t\t\tend: \"winner\",\n\t\t\ttourneyEnd: \"tourneyEnd\",\n\t\t\t\"\": \"\"\n\t\t}[this.state?.state || \"\"] || \"load\") as \"error\" | \"wait\" | \"counter\" | \"winner\" | \"load\" | \"tourneyEnd\";\n\t}\n\n\tprivate updateScreen?: () => void;\n\tprivate navigate: NavigateFunction | null = null;\n\tprivate state: GameStateFull | null = null;\n\tprivate counterV = 0;\n\tprivate startI = 0;\n\tprivate counterTimer?: NodeJS.Timer;\n\tprivate stoped = false;\n\n\tpublic start(updateScreen: () => void, navigate: NavigateFunction)\n\t{\n\t\tthis.stoped = false;\n\t\tthis.startI++;\n\t\tthis.state = null;\n\t\tthis.navigate = navigate;\n\t\tthis.updateScreen = updateScreen;\n\t\tthis.updateState(this.startI);\n\t\tthis.counterTimer = setInterval(() => this.counter(), 1000);\n\t}\n\n\tpublic stop()\n\t{\n\t\tthis.stoped = true;\n\t\tthis.startI++;\n\t\tclearInterval(this.counterTimer);\n\t}\n\n\tprivate counter()\n\t{\n\t\tif (this.stoped || !this.state) return;\n\n\t\tif (this.counterV > 0)\n\t\t{\n\t\t\tthis.counterV--;\n\t\t\tthis.updateScreen?.();\n\t\t}\n\t}\n\n\tprivate async updateState(startI: number)\n\t{\n\t\tif (startI != this.startI) return;\n\t\tconst updateStart = new Date();\n\t\ttry\n\t\t{\n\t\t\tconst newState = await fetchJsonGet<GameStateFull>(\"/api/game/state_full\");\n\t\t\tif (startI != this.startI) return;\n\t\t\tthis.state = newState;\n\t\t\tthis.error = null;\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tif (startI != this.startI) return;\n\t\t\tthis.state = null;\n\t\t\tthis.error = formatError(e);\n\t\t\tthis.updateScreen?.();\n\t\t\treturn;\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tif (startI != this.startI) return;\n\t\t\tconst now = new Date();\n\t\t\tconst dt = +now - +updateStart;\n\t\t\tconst delay = 1000;\n\t\t\tsetTimeout(() => this.updateState(startI), Math.max(0, delay - dt));\n\t\t}\n\t\tthis.onNewState();\n\t\tthis.updateScreen?.();\n\t}\n\n\tprivate onNewState()\n\t{\n\t\tif (!this.state) return;\n\n\t\tthis.barPercent = this.getBarPercent(this.state);\n\t\tif (Math.abs(this.counterV - this.state.counter) > 2)\n\t\t\tthis.counterV = this.state.counter;\n\n\t\tif (!this.state.showGame || this.state.state == \"tourneyEnd\")\n\t\t\tthis.navigate?.(\"/tourney_screen\");\n\t}\n\n\tpublic getCounter()\n\t{\n\t\tif (!this.state) return \"0:00\";\n\t\treturn `${Math.floor(this.counterV / 60)}:${(this.counterV % 60).toString().padStart(2, \"0\")}`;\n\t}\n\n\tprivate getBarPercent(data: GameStateFull)\n\t{\n\t\tconst sum = data.clicks1 + data.clicks2;\n\t\tif (sum == 0) return \"50\";\n\t\treturn `${data.clicks1 / sum * 100}`;\n\t}\n}\n\nconst game = new Game();\nexport function useGame()\n{\n\tconst navigate = useNavigate();\n\tconst update = useStateObj(0);\n\tuseEffect(() =>\n\t{\n\t\tgame.start(() => update.set(v => v + 1), navigate);\n\t\treturn () => game.stop();\n\t\t// eslint-disable-next-line\n\t}, []);\n\treturn game;\n}\n","import styles from \"./styles.module.css\"\nimport ost from \"./ost.mp3\"\nimport { useEffect, useRef } from \"react\";\nimport useStateBool from \"../../utils/useStateBool\";\nimport useSound from \"../../utils/useSound\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport classNames from \"../../utils/classNames\";\nimport { useGame } from \"./game\";\nimport { useTourneyCharacters } from \"../../api/tourney\";\nimport { characterById } from \"../../api/tourney\";\n\nexport default function GameScreenPage()\n{\n\tuseTitle(\"Игра\");\n\tconst game = useGame();\n\tconst characters = useTourneyCharacters();\n\tconst ostSound = useSound(ost, true);\n\tconst soundEnable = useStateBool(false);\n\tconst rectsEl = useRef<HTMLDivElement>(null);\n\n\tconst characterLeft = characterById(characters.data, game.opponentLeftId);\n\tconst characterRight = characterById(characters.data, game.opponentRightId);\n\tconst characterWinner = characterById(characters.data, game.winnerId);\n\n\tuseEffect(() =>\n\t{\n\t\tif (!soundEnable.v) return;\n\n\t\tif (game.isGoing)\n\t\t\tostSound.play();\n\t\telse\n\t\t\tostSound.stop();\n\t\t// eslint-disable-next-line\n\t}, [game.isGoing, soundEnable.v])\n\n\tuseEffect(() =>\n\t{\n\t\tif (!rectsEl.current || !game.isGoing) return;\n\t\tconst t = setInterval(() =>\n\t\t{\n\t\t\tif (!game.isGoing) return;\n\t\t\tif (rectsEl.current)\n\t\t\t\tspawnRect(rectsEl.current);\n\t\t}, 100);\n\t\treturn () => clearInterval(t);\n\t}, [rectsEl, game.isGoing])\n\n\treturn (\n\t\t<div className={classNames(styles.root, game.isGoing && styles.going)} style={{ \"--bar\": game.barPercent } as React.CSSProperties}>\n\t\t\t<div className={styles.rects} ref={rectsEl}></div>\n\t\t\t<div className={styles.frame}></div>\n\t\t\t<div className={styles.barShake}>\n\t\t\t\t<div className={styles.bar}>\n\t\t\t\t\t<div className={styles.barLeft} style={{ \"--color\": characterLeft?.color } as React.CSSProperties}>\n\t\t\t\t\t\t<span>{characterLeft?.name}</span>\n\t\t\t\t\t\t<div className={styles.bar__img}><img src={characterLeft?.img} alt={characterLeft?.name} /></div>\n\t\t\t\t\t\t<div className={styles.nums}></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.barRight} style={{ \"--color\": characterRight?.color } as React.CSSProperties}>\n\t\t\t\t\t\t<div className={styles.bar__img}><img src={characterRight?.img} alt={characterRight?.name} /></div>\n\t\t\t\t\t\t<span>{characterRight?.name}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={styles.msg}>\n\t\t\t\t<div>\n\t\t\t\t\t{game.titleType == \"error\" && <h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{game.error}</h3>}\n\t\t\t\t\t{game.titleType == \"load\" && <span>Загрузка...</span>}\n\t\t\t\t\t{game.titleType == \"wait\" && <span>Скоро начало!</span>}\n\t\t\t\t\t{game.titleType == \"counter\" && <span>{game.getCounter()}</span>}\n\t\t\t\t\t{game.titleType == \"winner\" && <>\n\t\t\t\t\t\t<span>Побеждает </span>\n\t\t\t\t\t\t<span className=\"title\" style={{ marginLeft: \"0.25em\" }}>{characterWinner?.name}</span>\n\t\t\t\t\t\t<span>!</span>\n\t\t\t\t\t</>}\n\t\t\t\t\t{!soundEnable.v && <button\n\t\t\t\t\t\tclassName={styles.soundBtn}\n\t\t\t\t\t\tonClick={soundEnable.setT}\n\t\t\t\t\t>\n\t\t\t\t\t\tВключить звук\n\t\t\t\t\t</button>}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction spawnRect(parent: HTMLDivElement)\n{\n\tconst rect = document.createElement(\"div\");\n\tparent.appendChild(rect);\n\trect.style.top = `${Math.random() * 100}%`;\n\trect.style.left = `${Math.random() * 100}%`;\n\n\tsetTimeout(() => parent.removeChild(rect), 1000);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__szDCT\",\"img\":\"styles_img__Csllz\",\"form\":\"styles_form__nIKFj\"};","import { useRef } from \"react\";\nimport type { ImgData } from \"../../../api/dataTypes\";\nimport Popup from \"../../../components/Popup\"\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAddTourneyCharacter } from \"../../../api/tourney\";\nimport Spinner from \"../../../components/Spinner\";\nimport displayError from \"../../../utils/displayError\";\nimport { Form, FormField } from \"../../../components/Form\";\nimport imagefileToData from \"../../../utils/imagefileToData\";\n\nexport default function AddCharacter()\n{\n\tconst popupOpen = useStateBool(false);\n\tconst imgData = useStateObj<ImgData | null>(null);\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst colorRef = useRef<HTMLInputElement>(null);\n\tconst mutationAdd = useMutationAddTourneyCharacter(() =>\n\t{\n\t\timgData.set(null);\n\t\tpopupOpen.setF();\n\t\tif (nameRef.current)\n\t\t\tnameRef.current.value = \"\";\n\t});\n\n\treturn <>\n\t\t<button className={styles.root} onClick={popupOpen.setT}>Добавить</button>\n\t\t<Popup title=\"Добавление персонажа\" open={popupOpen.v} close={popupOpen.setF}>\n\t\t\t{mutationAdd.isLoading && <Spinner />}\n\t\t\t{displayError(mutationAdd)}\n\t\t\t{imgData.v?.data == \"\" && <Spinner />}\n\t\t\t<Form\n\t\t\t\tclassName={styles.form}\n\t\t\t\tonSubmit={() =>\n\t\t\t\t{\n\t\t\t\t\tconst name = nameRef.current?.value;\n\t\t\t\t\tconst color = colorRef.current?.value;\n\t\t\t\t\tif (name && color && imgData.v && imgData.v.data != \"\")\n\t\t\t\t\t\tmutationAdd.mutate({\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\timg: imgData.v,\n\t\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<FormField label=\"Изображение\">\n\t\t\t\t\t<div className={styles.img}>\n\t\t\t\t\t\t{imgData.v && <img src={imgData.v.data} alt=\"Изображение\" />}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\taccept=\"image/png, image/jpeg, image/gif\"\n\t\t\t\t\t\tstyle={{ position: \"absolute\", opacity: 0 }}\n\t\t\t\t\t\tonChange={async e =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\timgData.set({ data: \"\", name: \"\" });\n\t\t\t\t\t\t\timgData.set(await imagefileToData(e.target?.files?.[0]!, \"\"));\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Имя\">\n\t\t\t\t\t<input ref={nameRef} required type=\"text\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Цвет\">\n\t\t\t\t\t<input ref={colorRef} required type=\"color\" />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField>\n\t\t\t\t\t<button type=\"submit\">Добавить</button>\n\t\t\t\t</FormField>\n\t\t\t</Form>\n\t\t</Popup>\n\t</>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__kxT4-\",\"error\":\"styles_error__B1x55\",\"id\":\"styles_id__Ykhw5\",\"img\":\"styles_img__-VBvV\",\"inputs\":\"styles_inputs__lWaKt\",\"changed\":\"styles_changed__No1PX\",\"buttons\":\"styles_buttons__DnTOD\",\"btnMinus\":\"styles_btnMinus__XR9tq\"};","import { useEffect } from \"react\";\nimport type { ImgData } from \"../../../api/dataTypes\";\nimport { useMutationDeleteTourneyCharacter, useMutationEditTourneyCharacter, type TourneyCharacter } from \"../../../api/tourney\";\nimport useStateBool from \"../../../utils/useStateBool\";\nimport useStateObj from \"../../../utils/useStateObj\";\nimport styles from \"./styles.module.css\"\nimport classNames from \"../../../utils/classNames\";\nimport Spinner from \"../../../components/Spinner\";\nimport displayError from \"../../../utils/displayError\";\nimport PopupConfirm from \"../../../components/PopupConfirm\";\nimport imagefileToData from \"../../../utils/imagefileToData\";\nimport IconDelete from \"../../../icons/delete\";\nimport IconSave from \"../../../icons/save\";\nimport IconCancel from \"../../../icons/cancel\";\n\nexport default function Character({ character }: CharacterProps)\n{\n\tconst changed = useStateBool(false);\n\tconst deleting = useStateBool(false);\n\tconst imgData = useStateObj<ImgData | null>(null, changed.setT);\n\tconst name = useStateObj(character.name, changed.setT);\n\tconst color = useStateObj(character.color, changed.setT);\n\n\tconst mutationEdit = useMutationEditTourneyCharacter(character.id, reset, () => reset());\n\n\tfunction reset(newcharacter?: TourneyCharacter)\n\t{\n\t\timgData.set(null);\n\t\tconst data = newcharacter || character;\n\t\tname.set(data.name);\n\t\tchanged.setF();\n\t}\n\n\t// eslint-disable-next-line\n\tuseEffect(reset, [character])\n\n\treturn (\n\t\t<div className={classNames(styles.root, changed.v && styles.changed)}>\n\t\t\t{mutationEdit.isLoading && <Spinner block r=\"0.5rem\" />}\n\t\t\t{imgData.v?.data == \"\" && <Spinner block r=\"0.5rem\" />}\n\t\t\t{displayError(mutationEdit, err => <div className={styles.error}>\n\t\t\t\t<div>{err}</div>\n\t\t\t\t<button onClick={() => mutationEdit.reset()}>ОК</button>\n\t\t\t</div>)}\n\t\t\t<PopupConfirm title={\"Удалить персонажа: \" + name.v} itemId={character.id} mutationFn={useMutationDeleteTourneyCharacter} open={deleting.v} close={deleting.setF} />\n\t\t\t<div className={styles.id}>{character.id}</div>\n\t\t\t<label className={styles.img}>\n\t\t\t\t{(character.img || imgData.v) && <img src={imgData.v?.data || character.img} alt=\"Картинка\" />}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\taccept=\"image/png, image/jpeg, image/gif\"\n\t\t\t\t\tonChange={async e =>\n\t\t\t\t\t{\n\t\t\t\t\t\timgData.set({ data: \"\", name: \"\" });\n\t\t\t\t\t\timgData.set(await imagefileToData(e.target?.files?.[0]!, \"\"));\n\t\t\t\t\t\te.target.value = \"\";\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t\t<div className={styles.inputs}>\n\t\t\t\t<div>Имя</div>\n\t\t\t\t<input type=\"text\" value={name.v} onChange={inp => name.set(inp.target.value)} />\n\t\t\t\t<div>Цвет</div>\n\t\t\t\t<input type=\"color\" value={color.v} onChange={inp => color.set(inp.target.value)} />\n\t\t\t</div>\n\t\t\t<div className={styles.buttons}>\n\t\t\t\t{!changed.v && <button onClick={deleting.setT}><IconDelete /></button>}\n\t\t\t\t{changed.v && <button\n\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tmutationEdit.mutate({\n\t\t\t\t\t\t\tname: name.v,\n\t\t\t\t\t\t\tcolor: color.v,\n\t\t\t\t\t\t\timg: imgData.v || undefined,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<IconSave />\n\t\t\t\t</button>}\n\t\t\t\t{changed.v && <button onClick={() => reset()}><IconCancel /></button>}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ninterface CharacterProps\n{\n\tcharacter: TourneyCharacter\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"characters\":\"styles_characters__5+NeE\"};","import { useTourneyCharacters } from \"../../api/tourney\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport AddCharacter from \"./AddCharacter\";\nimport Character from \"./Character\";\nimport styles from \"./styles.module.css\"\n\nexport default function GameCharactersPage()\n{\n\tuseTitle(\"Турнир | Персонажи\");\n\tconst characters = useTourneyCharacters();\n\n\treturn (\n\t\t<Layout centeredPage gap=\"0.5rem\" homeBtn forStaff>\n\t\t\t<div className=\"calmBack\"></div>\n\t\t\t{characters.isLoading && <Spinner />}\n\t\t\t{displayError(characters)}\n\n\t\t\t<h1>Управление персонажами турнира</h1>\n\n\t\t\t<AddCharacter />\n\n\t\t\t<div className={styles.characters}>\n\t\t\t\t{characters.data?.map(character => <Character key={character.id} character={character} />)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__ghv+v\"};","import type { TreeNode as ITreeNode, TourneyData } from \"../../api/tourney\";\n\n\nexport class Tree\n{\n\tprivate tree: TreeNode;\n\tprivate third: TreeNode;\n\tprivate transform = { dx: 0, dy: 0, s: 1 };\n\tprivate anim: ((dt: number, w: number, h: number) => boolean)[] = [];\n\n\tprivate readonly RECT = { x: -10.5 * TreeNode.S, y: -5.5 * TreeNode.S, w: 24 * TreeNode.S, h: 12 * TreeNode.S };\n\tprivate readonly RECT_ENDEN = { x: -1 * TreeNode.S, y: -2 * TreeNode.S, w: 5 * TreeNode.S, h: 7.5 * TreeNode.S };\n\tprivate showRect = this.RECT;\n\n\tconstructor(\n\t\tdata: TourneyData,\n\t\tprivate characters: TourneyCharactersTreeData,\n\t)\n\t{\n\t\tthis.tree = new TreeNode(this.characters, { id: -1, characterId: -1 }, -1);\n\t\tthis.third = new TreeNode(this.characters, { id: -1, characterId: -1 }, -1);\n\t\tthis.updateData(data)\n\t\t// @ts-ignore\n\t\twindow.setTourneyTransform = (dx: number, dy: number, s: number) => this.transform = { dx, dy, s };\n\t\t// @ts-ignore\n\t\twindow.setTourneyTransform(-50, -100, 0.35);\n\t\t// @ts-ignore\n\t\twindow.setTourneyTransform(-50, -100, 0.6);\n\t}\n\n\tpublic updateData(data: TourneyData)\n\t{\n\t\tconst init = this.tree.data.id == -1;\n\t\tif (init) this.tree = createTree(data.tree, data.curGameNodeId, this.characters);\n\t\telse this.tree.updateData(data.tree, data.curGameNodeId);\n\n\t\tconst leftNode = data.tree.left;\n\t\tconst rightNode = data.tree.right;\n\t\tif (leftNode && rightNode)\n\t\t{\n\t\t\tconst left =\n\t\t\t\t(leftNode.characterId <= 0 ? null :\n\t\t\t\t\tleftNode.characterId == leftNode.left?.characterId ? leftNode.right : leftNode.left)\n\t\t\t\t|| { id: -2, characterId: -1, left: null, right: null };\n\t\t\tconst right =\n\t\t\t\t(rightNode.characterId <= 0 ? null :\n\t\t\t\t\trightNode.characterId == rightNode.left?.characterId ? rightNode.right : rightNode.left)\n\t\t\t\t|| { id: -2, characterId: -1, left: null, right: null };\n\t\t\tconst lnode = new TreeNode(this.characters, left, data.curGameNodeId);\n\t\t\tconst rnode = new TreeNode(this.characters, right, data.curGameNodeId);\n\t\t\tif (init)\n\t\t\t{\n\t\t\t\tthis.third = new TreeNode(this.characters, { id: -3, characterId: data.third },\n\t\t\t\t\tdata.curGameNodeId, lnode, rnode);\n\t\t\t\tlnode.parent = this.third;\n\t\t\t\trnode.parent = this.third;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.third.updateData({ id: -3, characterId: data.third, left, right }, data.curGameNodeId)\n\t\t\t}\n\t\t}\n\t\tlet newRect = this.showRect;\n\t\tif (data.ended)\n\t\t{\n\t\t\tnewRect = this.RECT_ENDEN;\n\t\t}\n\t\telse if (data.curGameNodeId >= 0)\n\t\t{\n\t\t\tconst rect = this.tree.getBounds(data.curGameNodeId);\n\t\t\tif (rect) newRect = rect;\n\t\t\telse newRect = this.RECT;\n\t\t}\n\t\telse if (data.curGameNodeId == -3)\n\t\t{\n\t\t\tnewRect = { x: -2 * TreeNode.S, y: 3 * TreeNode.S, w: 7 * TreeNode.S, h: 4 * TreeNode.S };\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewRect = this.RECT;\n\t\t}\n\t\tif (init)\n\t\t{\n\t\t\tthis.showRect = newRect;\n\t\t}\n\t\telse if (JSON.stringify(newRect) != JSON.stringify(this.showRect))\n\t\t{\n\t\t\tconst oldRect = this.showRect;\n\t\t\tconst rect = { ...oldRect };\n\t\t\tthis.showRect = newRect;\n\t\t\tlet t = 0;\n\t\t\tconst lerp = (a: number, b: number) => a + (b - a) * Math.sin(t * Math.PI / 2);\n\t\t\tthis.anim.push((dt, w, h) =>\n\t\t\t{\n\t\t\t\tt += dt / 1000;\n\t\t\t\trect.x = lerp(oldRect.x, newRect.x);\n\t\t\t\trect.y = lerp(oldRect.y, newRect.y);\n\t\t\t\trect.w = lerp(oldRect.w, newRect.w);\n\t\t\t\trect.h = lerp(oldRect.h, newRect.h);\n\t\t\t\tthis.transform.s = this.calcScale(rect, { w, h });\n\t\t\t\tconst { cx, cy } = this.findRectCenter(rect);\n\t\t\t\tthis.transform.dx = w / 2 - cx;\n\t\t\t\tthis.transform.dy = h / 2 - cy;\n\t\t\t\treturn t > 1;\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D)\n\t{\n\t\tctx.save();\n\t\tctx.translate(this.transform.dx, this.transform.dy);\n\t\tctx.scale(this.transform.s, this.transform.s);\n\t\tthis.third.draw(ctx, -1);\n\t\tthis.tree.draw(ctx);\n\t\tctx.strokeStyle = \"red\";\n\t\tctx.lineWidth = 4;\n\t\t// ctx.strokeRect(this.showRect.x, this.showRect.y, this.showRect.w, this.showRect.h);\n\t\tctx.restore();\n\t}\n\n\tpublic update(dt: number, w: number, h: number)\n\t{\n\t\tif (this.anim.length == 0)\n\t\t{\n\t\t\tthis.transform.s = this.calcScale(this.showRect, { w, h });\n\t\t\tconst { cx, cy } = this.findRectCenter(this.showRect);\n\t\t\tthis.transform.dx = w / 2 - cx;\n\t\t\tthis.transform.dy = h / 2 - cy;\n\t\t\tthis.tree.update(dt);\n\t\t\tthis.third.update(dt);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let i = this.anim.length - 1; i >= 0; i--)\n\t\t\t\tif (this.anim[i](dt, w, h))\n\t\t\t\t\tthis.anim.splice(i, 1);\n\t\t}\n\t}\n\n\tprivate calcScale(rect: ISize, canvas: ISize, paddingR = 0.05)\n\t{\n\t\tconst padding = { x: canvas.w * paddingR, y: canvas.h * paddingR };\n\t\treturn Math.min(canvas.w / (rect.w + padding.x * 2), canvas.h / (rect.h + padding.y * 2));\n\t}\n\n\tprivate findRectCenter(rect: IRect)\n\t{\n\t\treturn {\n\t\t\tcx: (rect.x + rect.w / 2) * this.transform.s,\n\t\t\tcy: (rect.y + rect.h / 2) * this.transform.s,\n\t\t}\n\t}\n}\n\ninterface IRect\n{\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n}\ninterface ISize\n{\n\tw: number,\n\th: number,\n}\n\ninterface TourneyCharacterTreeData\n{\n\tid: number,\n\tname: string,\n\tcolor: string,\n\timg: HTMLImageElement,\n}\n\nexport interface TourneyCharactersTreeData\n{\n\t[id: number]: TourneyCharacterTreeData;\n}\n\nclass TreeNode\n{\n\tpublic static readonly S = 100;\n\tpublic readonly S = TreeNode.S;\n\tprivate t = 0;\n\tprivate newCharacterId: number;\n\tpublic parent?: TreeNode;\n\tconstructor(\n\t\tprivate characters: TourneyCharactersTreeData,\n\t\tpublic data: NodeData,\n\t\tprivate curGameNodeId: number,\n\t\tprivate left: TreeNode | null = null,\n\t\tprivate right: TreeNode | null = null,\n\t)\n\t{\n\t\tthis.newCharacterId = data.characterId;\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D, type = 1)\n\t{\n\t\tctx.save();\n\t\tconst imgRight = [4, 5, 6, 7].includes(type);\n\t\tconst character = this.characters[this.data.characterId];\n\n\t\tif (type == -1) ctx.translate(0, this.S * 4);\n\n\t\tctx.fillStyle = \"#fff2b5\";\n\t\tif (type == 1) ctx.fillStyle = \"#f9e064\";\n\t\tif (this.data.id == this.curGameNodeId) ctx.fillStyle = \"#ffab40\";\n\t\tctx.fillRect(0, 0, this.S * 3, this.S);\n\n\t\tif (character)\n\t\t{\n\t\t\tctx.drawImage(character.img, imgRight ? this.S * 2 : 0, 0, this.S, this.S);\n\t\t\tctx.font = \"20px monsterfriendforerusbylya, ZeroCool, Arial\";\n\t\t\tctx.fillStyle = \"#4a0001\";\n\t\t\tctx.fillText(character.name, imgRight ? this.S * 0.05 : this.S * 1.05, this.S / 2 + 10, this.S * 1.9);\n\t\t}\n\n\t\tctx.strokeStyle = \"gray\";\n\t\tif (character) ctx.strokeStyle = character.color;\n\t\tctx.lineWidth = 4;\n\t\tctx.strokeRect(0, 0, this.S * 3, this.S);\n\t\tctx.strokeRect(imgRight ? this.S * 2 : 0, 0, this.S, this.S);\n\n\t\t// ctx.font = \"40px ZeroCool, Arial\";\n\t\t// ctx.fillStyle = \"magenta\";\n\t\t// ctx.fillText(`${type}`, this.S * 0.1, this.S / 2 - 10, this.S * 0.8);\n\t\t// ctx.fillText(`${this.data.id}`, this.S * 0.1, this.S / 2 + 30, this.S * 0.8);\n\n\t\tctx.font = \"20px monsterfriendforerusbylya, ZeroCool, Arial\";\n\t\tctx.fillStyle = \"#ff7700\";\n\t\tif (type == 1 && this.data.characterId != -1)\n\t\t{\n\t\t\tctx.fillText(\"Победитель\", this.S * 1.05, 30, this.S * 1.9);\n\t\t}\n\t\tif (type == -1 && this.data.characterId != -1)\n\t\t{\n\t\t\tctx.fillText(\"Третье место\", this.S * 1.05, 30, this.S * 1.9);\n\t\t}\n\t\tif (this.parent && this.parent.data.characterId != -1)\n\t\t{\n\t\t\tif ((type == 2 || type == 3) && this.parent.data.characterId != this.data.characterId)\n\t\t\t{\n\t\t\t\tctx.fillText(\"Второе место\", this.S * 1.05, 30, this.S * 1.9);\n\t\t\t}\n\t\t\telse if (this.parent.data.characterId != this.data.characterId)\n\t\t\t{\n\t\t\t\tctx.fillStyle = \"#00000055\";\n\t\t\t\tctx.fillRect(0, 0, this.S * 3, this.S);\n\t\t\t}\n\t\t}\n\n\t\tctx.strokeStyle = \"gray\";\n\t\tctx.lineWidth = 4;\n\n\t\tif (type == 1)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(0, -this.S * 1.5)\n\t\t\tif (this.left) this.left.draw(ctx, 2);\n\t\t\tctx.translate(0, this.S * 3);\n\t\t\tif (this.right) this.right.draw(ctx, 3);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 1.5, 0);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, 0], [0, -0.5]],\n\t\t\t\t[[0, 1], [0, 0.5]],\n\t\t\t\ttrue,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t}\n\t\telse if (type == 2)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(-this.S * 4.5, this.S * 0.9);\n\t\t\tif (this.left) this.left.draw(ctx, 4);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 5);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 1.5, 0);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, -0.5], [-2, 0], [0, 2.5], [-0.5, 0], [0, -0.5], [-0.5, 0]],\n\t\t\t\t[[0, -0.5], [-2, 0], [0, 2.5], [-0.5, 0], [0, 0.5], [-0.5, 0]],\n\t\t\t)\n\t\t}\n\t\telse if (type == 3)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(this.S * 4.5, -this.S * 2.1);\n\t\t\tif (this.left) this.left.draw(ctx, 8);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 9);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 1.5, this.S * 1);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, 0.5], [2, 0], [0, -2.5], [0.5, 0], [0, -0.5], [0.5, 0]],\n\t\t\t\t[[0, 0.5], [2, 0], [0, -2.5], [0.5, 0], [0, 0.5], [0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 4)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(-this.S * 2, -this.S * 3.4);\n\t\t\tif (this.left) this.left.draw(ctx, 6);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 7);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 2, 0);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, -2.3], [-0.5, 0], [0, -0.5], [-0.5, 0]],\n\t\t\t\t[[0, -2.3], [-0.5, 0], [0, 0.5], [-0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 5)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(-this.S * 2, this.S * 2.2);\n\t\t\tif (this.left) this.left.draw(ctx, 6);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 7);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 2, this.S * 1);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, 2.3], [-0.5, 0], [0, -0.5], [-0.5, 0]],\n\t\t\t\t[[0, 2.3], [-0.5, 0], [0, 0.5], [-0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 6)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(-this.S * 4, -this.S * 1.5);\n\t\t\tif (this.left) this.left.draw(ctx, 6);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 7);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(0, this.S * 0.5);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[-0.5, 0], [0, -0.9], [-0.5, 0]],\n\t\t\t\t[[-0.5, 0], [0, -0.9], [-0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 7)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(-this.S * 4, this.S * 0.3);\n\t\t\tif (this.left) this.left.draw(ctx, 6);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 7);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(0, this.S * 0.5);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[-0.5, 0], [0, 0.9], [-0.5, 0]],\n\t\t\t\t[[-0.5, 0], [0, 0.9], [-0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 8)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(this.S * 2, -this.S * 3.4);\n\t\t\tif (this.left) this.left.draw(ctx, 10);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 11);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 1, 0);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, -2.3], [0.5, 0], [0, -0.5], [0.5, 0]],\n\t\t\t\t[[0, -2.3], [0.5, 0], [0, 0.5], [0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 9)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(this.S * 2, this.S * 2.2);\n\t\t\tif (this.left) this.left.draw(ctx, 10);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 11);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 1, this.S * 1);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, 2.3], [0.5, 0], [0, -0.5], [0.5, 0]],\n\t\t\t\t[[0, 2.3], [0.5, 0], [0, 0.5], [0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 10)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(this.S * 4, -this.S * 1.5);\n\t\t\tif (this.left) this.left.draw(ctx, 10);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 11);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 3, this.S * 0.5);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0.5, 0], [0, -0.9], [0.5, 0]],\n\t\t\t\t[[0.5, 0], [0, -0.9], [0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == 11)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(this.S * 4, this.S * 0.3);\n\t\t\tif (this.left) this.left.draw(ctx, 10);\n\t\t\tctx.translate(0, this.S * 1.2);\n\t\t\tif (this.right) this.right.draw(ctx, 11);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 3, this.S * 0.5);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0.5, 0], [0, 0.9], [0.5, 0]],\n\t\t\t\t[[0.5, 0], [0, 0.9], [0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == -1)\n\t\t{\n\t\t\tctx.save();\n\t\t\tctx.translate(-this.S * 2, this.S * 1.4);\n\t\t\tif (this.left) this.left.draw(ctx, -2);\n\t\t\tctx.translate(this.S * 4, 0);\n\t\t\tif (this.right) this.right.draw(ctx, -3);\n\t\t\tctx.restore();\n\n\t\t\tctx.translate(this.S * 1.5, this.S * 1);\n\t\t\tthis.drawLines(ctx,\n\t\t\t\t[[0, 0.9], [-0.5, 0]],\n\t\t\t\t[[0, 0.9], [0.5, 0]],\n\t\t\t);\n\t\t}\n\t\telse if (type == -2)\n\t\t{\n\t\t\tctx.translate(this.S * 1.5, 0);\n\t\t\tthis.drawLine0(ctx, [[0, -4.9]]);\n\t\t\tconst newCharacter = this.characters[this.newCharacterId];\n\t\t\tif (newCharacter) ctx.strokeStyle = newCharacter.color;\n\t\t\tconst t = this.data.characterId == this.newCharacterId ? 1 : this.t;\n\t\t\t// this.drawLine0(ctx, [[0, -4.9]], true, t);\n\t\t\tthis.drawLine0(ctx, [[0, -4.9], [-0.5, 0], [0, 0.5], [-0.5, 0]], true, t);\n\t\t}\n\t\telse if (type == -3)\n\t\t{\n\t\t\tctx.translate(this.S * 1.5, 0);\n\t\t\tthis.drawLine0(ctx, [[0, -4.9]]);\n\t\t\tconst newCharacter = this.characters[this.newCharacterId];\n\t\t\tif (newCharacter) ctx.strokeStyle = newCharacter.color;\n\t\t\tconst t = this.data.characterId == this.newCharacterId ? 1 : this.t;\n\t\t\t// this.drawLine0(ctx, [[0, -2.4]], true, t);\n\t\t\tthis.drawLine0(ctx, [[0, -4.9], [0.5, 0], [0, 0.5], [0.5, 0]], true, t);\n\t\t}\n\n\t\tctx.restore();\n\t}\n\n\tpublic update(dt: number)\n\t{\n\t\tthis.t += dt / 1500;\n\t\tif (this.t > 1)\n\t\t{\n\t\t\tthis.data.characterId = this.newCharacterId;\n\t\t}\n\n\t\tthis.left?.update(dt);\n\t\tthis.right?.update(dt);\n\t}\n\n\tprivate drawLine(ctx: CanvasRenderingContext2D, points: [number, number][], reverse = false, t = 1)\n\t{\n\t\tif (points.length == 0) return;\n\t\tpoints = points.map(v => ([v[0] * this.S, v[1] * this.S]));\n\t\tconst len = points.reduce((p, v) => p + Math.abs(v[0]) + Math.abs(v[1]), 0) * t;\n\t\tif (reverse)\n\t\t{\n\t\t\tlet x = points[0][0];\n\t\t\tlet y = points[0][1];\n\t\t\tfor (let i = 1; i < points.length; i++)\n\t\t\t{\n\t\t\t\tx += points[i][0];\n\t\t\t\ty += points[i][1];\n\t\t\t\tpoints[i][0] *= -1;\n\t\t\t\tpoints[i][1] *= -1;\n\t\t\t}\n\t\t\tpoints.push([x, y]);\n\t\t\tpoints.reverse();\n\t\t\tpoints.pop();\n\t\t}\n\t\tctx.beginPath();\n\t\tlet x = points[0][0];\n\t\tlet y = points[0][1];\n\t\tctx.moveTo(x, y);\n\t\tlet l = 0;\n\t\tfor (let i = 1; i < points.length; i++)\n\t\t{\n\t\t\tif (l > len) break;\n\t\t\tconst dl = Math.abs(points[i][0]) + Math.abs(points[i][1]);\n\t\t\tconst lt = l + dl < len ? 1 : (len - l) / dl;\n\t\t\tl += dl;\n\t\t\tx += points[i][0] * lt;\n\t\t\ty += points[i][1] * lt;\n\t\t\tctx.lineTo(x, y);\n\t\t}\n\t\tctx.stroke();\n\t}\n\n\tprivate _drawLine(ctx: CanvasRenderingContext2D, points: [number, number][], t = 1)\n\t{\n\t\tif (points.length == 0) return;\n\t\tpoints = points.map(v => ([v[0] * this.S, v[1] * this.S]));\n\t\tctx.beginPath();\n\t\tlet x = points[0][0];\n\t\tlet y = points[0][1];\n\t\tctx.moveTo(x, y);\n\t\tfor (let i = 1; i < points.length; i++)\n\t\t{\n\t\t\tx += points[i][0] * t;\n\t\t\ty += points[i][1] * t;\n\t\t\tctx.lineTo(x, y);\n\t\t}\n\t\tctx.stroke();\n\t}\n\n\tprivate drawLine0(ctx: CanvasRenderingContext2D, points: [number, number][], reverse = false, t = 1)\n\t{\n\t\tthis.drawLine(ctx, [[0, 0], ...points], reverse, t);\n\t}\n\n\tprivate drawLines(ctx: CanvasRenderingContext2D, left: [number, number][], right: [number, number][], reverse = true, zero = true)\n\t{\n\t\tconst _drawLine = zero ? this.drawLine0.bind(this) : this.drawLine.bind(this);\n\t\tconst drawLine = (points: [number, number][], t: number = 1) => _drawLine(ctx, points, reverse, t);\n\t\tconst winner = this.newCharacterId < 0 ? 0 : (this.newCharacterId == this.left?.data.characterId ? -1 : (this.newCharacterId == this.right?.data.characterId ? 1 : 0));\n\t\tconst t = this.data.characterId == this.newCharacterId ? 1 : this.t;\n\t\tif (this.left) drawLine(left);\n\t\tif (this.right) drawLine(right);\n\t\tif (winner != 0)\n\t\t{\n\t\t\tconst character = this.characters[this.newCharacterId];\n\t\t\tif (winner == -1)\n\t\t\t{\n\t\t\t\tif (this.right)\n\t\t\t\t{\n\t\t\t\t\tctx.strokeStyle = this.characters[this.right.data.characterId]?.color;\n\t\t\t\t\tdrawLine(right, t);\n\t\t\t\t}\n\t\t\t\tctx.strokeStyle = character?.color;\n\t\t\t\tif (this.left) drawLine(left, t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.left)\n\t\t\t\t{\n\t\t\t\t\tctx.strokeStyle = this.characters[this.left.data.characterId]?.color;\n\t\t\t\t\tdrawLine(left, t);\n\t\t\t\t}\n\t\t\t\tctx.strokeStyle = character?.color;\n\t\t\t\tif (this.right) drawLine(right, t);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic getBounds(curGameNodeId: number, type = \"1\"): IRect | null | undefined\n\t{\n\t\tconst r = (x: number, y: number, w: number, h: number, nl: string = \"\", nr: string = \"\") =>\n\t\t{\n\t\t\tif (curGameNodeId == this.data.id)\n\t\t\t\treturn { x: x * this.S, y: y * this.S, w: w * this.S, h: h * this.S }\n\t\t\telse\n\t\t\t\treturn this.left?.getBounds(curGameNodeId, nl) || this.right?.getBounds(curGameNodeId, nr);\n\t\t}\n\t\tif (type == \"1\") return r(-1, -2, 5, 5, \"2\", \"3\");\n\t\telse if (type == \"2\") return r(-4.5, -2, 8, 4, \"4\", \"5\");\n\t\telse if (type == \"4\") return r(-6.5, -4, 5, 4.5, \"6\", \"7\");\n\t\telse if (type == \"5\") return r(-6.5, 0.5, 5, 4.5, \"6.5\", \"7.5\");\n\t\telse if (type == \"6\") return r(-10.5, -5.5, 8, 5.2);\n\t\telse if (type == \"7\") return r(-10.5, -5.5, 8, 5.2);\n\t\telse if (type == \"6.5\") return r(-10.5, 1.3, 8, 5.2);\n\t\telse if (type == \"7.5\") return r(-10.5, 1.3, 8, 5.2);\n\t\telse if (type == \"3\") return r(0, -1, 8, 4, \"8\", \"9\");\n\t\telse if (type == \"8\") return r(4.5, -4, 5, 4.5, \"10\", \"11\");\n\t\telse if (type == \"9\") return r(4.5, 0.5, 5, 4.5, \"10.5\", \"11.5\");\n\t\telse if (type == \"10\") return r(5.5, -5.5, 8, 5.2);\n\t\telse if (type == \"11\") return r(5.5, -5.5, 8, 5.2);\n\t\telse if (type == \"10.5\") return r(5.5, 1.3, 8, 5.2);\n\t\telse if (type == \"11.5\") return r(5.5, 1.3, 8, 5.2);\n\t\treturn null;\n\t}\n\n\tpublic updateData(data: ITreeNode, curGameNodeId: number)\n\t{\n\t\tthis.newCharacterId = data.characterId;\n\t\tthis.curGameNodeId = curGameNodeId\n\t\tthis.t = 0;\n\t\tif (data.left) this.left?.updateData(data.left, curGameNodeId);\n\t\tif (data.right) this.right?.updateData(data.right, curGameNodeId);\n\t}\n}\n\ninterface NodeData\n{\n\tid: number,\n\tcharacterId: number,\n}\n\nfunction createTree(tree: ITreeNode, curGameNodeId: number, characters: TourneyCharactersTreeData): TreeNode\n{\n\tconst left = tree.left && createTree(tree.left, curGameNodeId, characters);\n\tconst right = tree.right && createTree(tree.right, curGameNodeId, characters);\n\tconst node = new TreeNode(\n\t\tcharacters,\n\t\t{ id: tree.id, characterId: tree.characterId },\n\t\tcurGameNodeId,\n\t\tleft,\n\t\tright,\n\t);\n\tif (left) left.parent = node;\n\tif (right) right.parent = node;\n\treturn node;\n}\n","import { useEffect } from \"react\";\nimport { fetchJsonGet } from \"../../utils/fetch\";\nimport { type TourneyCharacter, type TourneyData } from \"../../api/tourney\";\nimport { formatError } from \"../../utils/displayError\";\nimport { Tree, type TourneyCharactersTreeData } from \"./tree\";\nimport { useNavigate, type NavigateFunction } from \"react-router-dom\";\n\nclass Tourney\n{\n\tprivate canvas: HTMLCanvasElement | null = null;\n\tprivate ctx: CanvasRenderingContext2D | null = null;\n\tprivate startI = 0;\n\tprivate pt = 0;\n\tprivate stoped = false;\n\tprivate error = \"\";\n\tprivate navigate: NavigateFunction | null = null;\n\n\tprivate state: TourneyData | null = null;\n\tprivate characters?: TourneyCharacter[] | null;\n\tprivate tree?: Tree;\n\n\tprivate x = 0;\n\tprivate y = 0;\n\tprivate dx = 1;\n\tprivate dy = 1;\n\tprivate s = 100;\n\n\tpublic start(navigate: NavigateFunction)\n\t{\n\t\tthis.navigate = navigate;\n\t\tthis.stoped = false;\n\t\tthis.error = \"\";\n\t\tthis.startI++;\n\t\tthis.loadCharacters();\n\t\trequestAnimationFrame(this.loop.bind(this, this.startI));\n\t\tthis.updateState(this.startI);\n\t}\n\n\tpublic stop()\n\t{\n\t\tthis.stoped = true;\n\t\tthis.startI++;\n\t}\n\n\tprivate async updateState(startI: number)\n\t{\n\t\tif (startI != this.startI) return;\n\t\tconst updateStart = new Date();\n\t\tconst oldState = JSON.stringify(this.state);\n\t\ttry\n\t\t{\n\t\t\tconst newState = await fetchJsonGet<TourneyData>(\"/api/tourney\");\n\t\t\tif (startI != this.startI) return;\n\t\t\tthis.state = newState;\n\t\t\tthis.error = \"\";\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tif (startI != this.startI) return;\n\t\t\tthis.state = null;\n\t\t\tthis.error = formatError(e);\n\t\t\treturn;\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tif (startI != this.startI) return;\n\t\t\tconst now = new Date();\n\t\t\tconst dt = +now - +updateStart;\n\t\t\tconst delay = 1000;\n\t\t\tsetTimeout(() => this.updateState(startI), Math.max(0, delay - dt));\n\t\t}\n\t\tif (JSON.stringify(this.state) != oldState)\n\t\t\tthis.onNewState();\n\t}\n\n\tprivate async loadCharacters()\n\t{\n\t\tif (this.characters === null) return;\n\t\ttry\n\t\t{\n\t\t\tthis.characters = await fetchJsonGet<TourneyCharacter[]>(`/api/tourney/characters`);\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tthis.characters = undefined;\n\t\t\tthis.error = formatError(e);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate onNewState()\n\t{\n\t\tif (!this.state || !this.characters) return;\n\t\tif (this.tree)\n\t\t{\n\t\t\tthis.tree.updateData(this.state);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst characters = {} as TourneyCharactersTreeData;\n\t\t\tthis.characters.forEach(ch =>\n\t\t\t{\n\t\t\t\tconst img = new Image();\n\t\t\t\timg.src = ch.img;\n\t\t\t\tcharacters[ch.id] = { ...ch, img };\n\t\t\t});\n\t\t\tthis.tree = new Tree(this.state, characters);\n\t\t}\n\t\tif (!this.state.ended && this.state.showGame)\n\t\t\tthis.navigate?.(\"/game_screen\");\n\t}\n\n\tprivate loop(startI: number, t: number)\n\t{\n\t\tif (startI != this.startI) return;\n\t\tconst dt = t - this.pt;\n\t\tthis.pt = t;\n\n\t\tif (this.canvas)\n\t\t{\n\t\t\tconst w = window.innerWidth;\n\t\t\tconst h = window.innerHeight;\n\t\t\tthis.canvas.width = w;\n\t\t\tthis.canvas.height = h;\n\n\t\t\tif (this.error)\n\t\t\t{\n\t\t\t\tif (this.ctx)\n\t\t\t\t{\n\t\t\t\t\tthis.ctx.save();\n\t\t\t\t\tthis.ctx.font = \"3em ZeroCool, Arial\";\n\t\t\t\t\tthis.ctx.fillStyle = \"orange\";\n\t\t\t\t\tconst tm = this.ctx.measureText(this.error);\n\t\t\t\t\tthis.ctx.fillText(this.error, Math.max(0, (w - tm.width) / 2), (h - tm.actualBoundingBoxAscent) / 2, w);\n\t\t\t\t\tthis.ctx.restore();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!this.state || !this.characters)\n\t\t\t{\n\t\t\t\tif (this.ctx)\n\t\t\t\t{\n\t\t\t\t\tthis.ctx.save();\n\t\t\t\t\tthis.ctx.font = \"3em ZeroCool, Arial\";\n\t\t\t\t\tthis.ctx.fillStyle = \"orange\";\n\t\t\t\t\tconst text = \"Загрузка\";\n\t\t\t\t\tconst tm = this.ctx.measureText(text);\n\t\t\t\t\tthis.ctx.fillText(text, Math.max(0, (w - tm.width) / 2), (h - tm.actualBoundingBoxAscent) / 2, w);\n\t\t\t\t\tthis.ctx.restore();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.x += this.dx * dt * 0.5;\n\t\t\t\tthis.y += this.dy * dt * 0.5;\n\t\t\t\tif (this.x > this.canvas.width - this.s) { this.x = this.canvas.width - this.s; this.dx = -1 };\n\t\t\t\tif (this.x < 0) { this.x = 0; this.dx = 1 };\n\t\t\t\tif (this.y > this.canvas.height - this.s) { this.y = this.canvas.height - this.s; this.dy = -1 };\n\t\t\t\tif (this.y < 0) { this.y = 0; this.dy = 1 };\n\t\t\t\tthis.tree?.update(dt, this.canvas.width, this.canvas.height);\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t}\n\n\t\trequestAnimationFrame(this.loop.bind(this, startI));\n\t}\n\n\tprivate draw()\n\t{\n\t\tif (!this.canvas || !this.ctx || !this.state || !this.characters) return;\n\n\t\t// this.ctx.fillRect(this.x, this.y, this.s, this.s);\n\n\t\tthis.tree?.draw(this.ctx);\n\t}\n\n\tpublic setCanvas(canvas: HTMLCanvasElement)\n\t{\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = canvas.getContext(\"2d\");\n\t\tthis.draw();\n\t}\n}\n\n\nconst tourney = new Tourney();\nexport function useTourney()\n{\n\tconst navigate = useNavigate();\n\tuseEffect(() =>\n\t{\n\t\ttourney.start(navigate);\n\t\treturn () => tourney.stop();\n\t\t// eslint-disable-next-line\n\t}, []);\n\treturn tourney;\n}\n","import { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\nimport { useTourney } from \"./tourney\";\n\nexport default function TourneyPage()\n{\n\tuseTitle(\"Турнир\");\n\tconst tourney = useTourney();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<canvas ref={el => el && tourney.setCanvas(el)}></canvas>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__jBH1M\",\"btn\":\"styles_btn__7+OKB\",\"groupStats\":\"styles_groupStats__Kfs5b\"};","import Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport styles from \"./styles.module.css\"\nimport { useTitle } from \"../../utils/useTtile\";\nimport { useStats, useStatsCacheClear } from \"../../api/other\";\n\nexport default function StatsPage()\n{\n\tuseTitle(\"Статистика\");\n\tconst stats = useStats();\n\tconst clearCache = useStatsCacheClear();\n\n\treturn (\n\t\t<Layout centered homeBtn gap=\"1rem\" height100 className={styles.root} forStaff>\n\t\t\t{stats.isLoading && <Spinner />}\n\t\t\t{displayError(stats)}\n\t\t\t<h2>Статистика</h2>\n\t\t\t<button disabled={stats.isFetching} className={styles.btn} onClick={() => { clearCache(); stats.refetch(); }}>Обновить</button>\n\t\t\t<div className={styles.groupStats}>\n\t\t\t\t<h3>Фракции</h3>\n\t\t\t\t<div>\n\t\t\t\t\t<h4>Группа 1</h4>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>Участников: {stats.data?.group1_members ?? \"N/A\"}</li>\n\t\t\t\t\t\t<li>Всего завершено квестов: {stats.data?.group1_completed ?? \"N/A\"}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h4>Группа 2</h4>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>Участников: {stats.data?.group2_members ?? \"N/A\"}</li>\n\t\t\t\t\t\t<li>Всего завершено квестов: {stats.data?.group2_completed ?? \"N/A\"}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { useQuery, useQueryClient } from \"react-query\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\ninterface Stats\n{\n\tgroup1_members: number,\n\tgroup1_completed: number,\n\tgroup2_members: number,\n\tgroup2_completed: number,\n}\n\nexport function useStats()\n{\n\treturn useQuery(\"stats\", async () =>\n\t\tawait fetchJsonGet<Stats>(\"/api/other/stats\")\n\t);\n}\n\nexport function useStatsCacheClear()\n{\n\tconst queryClient = useQueryClient();\n\treturn () =>\n\t{\n\t\tqueryClient.removeQueries(\"stats\");\n\t}\n}","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\nimport displayError from \"./utils/displayError\";\nimport MessageFromBackend from \"./components/MessageFromBackend\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\n\nimport AuthPage from \"./pages/AuthPage\";\nimport DebugPage from \"./pages/DebugPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport LogPage from \"./pages/LogPage\";\n// import LoginPage from \"./pages/LoginPage\";\nimport ManageQuestPage from \"./pages/ManageQuestPage\";\nimport ManageStorePage from \"./pages/ManageStorePage\";\nimport MapPage from \"./pages/MapPage\";\n// import ProfilePage from \"./pages/ProfilePage\";\nimport PromotePage from \"./pages/PromotePage\";\nimport QuestPage from \"./pages/QuestPage\";\nimport ScannerPage from \"./pages/ScannerPage\";\nimport SendPage from \"./pages/SendPage\";\nimport StorePage from \"./pages/StorePage\";\nimport TimetablePage from \"./pages/TimetablePage\";\nimport UsersPage from \"./pages/UsersPage\";\nimport WorkerPage from \"./pages/WorkerPage\";\nimport WorkerQuestPage from \"./pages/WorkerQuestPage\";\nimport WorkerStorePage from \"./pages/WorkerStorePage\";\nimport GamePage from \"./pages/GamePage\";\nimport GameSettingsPage from \"./pages/GameSettingsPage\";\nimport GameScreenPage from \"./pages/GameScreenPage\";\nimport GameCharactersPage from \"./pages/GameCharactersPage\";\nimport TourneyPage from \"./pages/TourneyPage\";\nimport StatsPage from \"./pages/StatsPage\";\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\t\t<MessageFromBackend />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t{/* <Route path=\"/\" element={<IndexPage />} /> */}\n\t\t\t\t<Route path=\"/\" element={!user.data?.auth ? <IndexPage /> : <Navigate to=\"/map\" />} />\n\t\t\t\t{/* <Route path=\"/login\" element={!user.data?.auth ? <LoginPage /> : <Navigate to=\"/\" />} /> */}\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/timetable\" element={<TimetablePage />} />\n\t\t\t\t<Route path=\"/quest\" element={<QuestPage />} />\n\t\t\t\t<Route path=\"/store\" element={<StorePage />} />\n\t\t\t\t<Route path=\"/map\" element={<MapPage />} />\n\t\t\t\t{ProtectedRoute(null, \"/game\", <GamePage />)}\n\t\t\t\t{ProtectedRoute(null, \"/scanner\", <ScannerPage />)}\n\t\t\t\t{/* {ProtectedRoute(null, \"/profile\", <ProfilePage />)} */}\n\t\t\t\t{ProtectedRoute(\"page_worker\", \"/worker\", <WorkerPage />)}\n\t\t\t\t{ProtectedRoute(\"manage_store\", \"/manage_store\", <ManageStorePage />)}\n\t\t\t\t{ProtectedRoute(\"manage_quest\", \"/manage_quest\", <ManageQuestPage />)}\n\t\t\t\t{ProtectedRoute(\"manage_games\", \"/game_characters\", <GameCharactersPage />)}\n\t\t\t\t{ProtectedRoute(\"manage_games\", \"/game_settings\", <GameSettingsPage />)}\n\t\t\t\t{ProtectedRoute(\"manage_games\", \"/game_screen\", <GameScreenPage />)}\n\t\t\t\t{ProtectedRoute(\"manage_games\", \"/tourney_screen\", <TourneyPage />)}\n\t\t\t\t{ProtectedRoute(\"page_worker_quest\", \"/worker_quest\", <WorkerQuestPage />)}\n\t\t\t\t{ProtectedRoute(\"page_worker_store\", \"/worker_store\", <WorkerStorePage />)}\n\t\t\t\t{ProtectedRoute(\"page_stats\", \"/stats\", <StatsPage />)}\n\t\t\t\t{ProtectedRoute(\"promote_worker\", \"/promote_worker\", <PromotePage role=\"worker\" />)}\n\t\t\t\t{ProtectedRoute(\"promote_manager\", \"/promote_manager\", <PromotePage role=\"manager\" />)}\n\t\t\t\t{ProtectedRoute(\"send_any\", \"/send\", <SendPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/debug\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_users\", \"/users\", <UsersPage />)}\n\t\t\t\t<Route path=\"*\" element={<NotFoundPage />} />\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","Error","async","fetchWithJson","method","input","body","res","fetch","headers","undefined","JSON","stringify","ok","json","msg","fetchPost","fetchDelete","fetchJson","fetchJsonGet","fetchJsonPost","useUser","useQuery","getUser","data","status","auth","id","balance","roles","name","last_name","photo","operations","group","gameOpened","ticketTId","user","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","formatError","error","messageFormater","err","message","displayError","requestRes","render","isError","defaultRender","_jsx","style","color","textAlign","children","classNames","_len","arguments","length","names","Array","_key","filter","v","join","MessageFromBackend","setMessage","useState","timer","setInterval","msgCur","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookie","clearInterval","_jsxs","className","styles","root","visible","close","onClick","trimQuotes","str","at","slice","HeaderBack","navigate","useNavigate","useMutationLogout","onSuccess","queryClient","useQueryClient","useMutation","mutationFn","setQueryData","_","Spinner","_ref","zIndex","block","r","position","borderRadius","spinner","IconHome","xmlns","viewBox","height","width","fill","d","useStateBool","initialState","onSet","set","setFn","setT","setF","toggle","IconExit","IconCode","IconWidgets","SimpleHeader","_user$data3","_user$data4","_user$data5","homeBtn","menuOpen","logout","Link","to","home","gap","img","src","avatar","alt","menu","menuVisible","mutate","disabled","Header","forStaff","forDev","_Fragment","text","TTYPES","Layout","el_styles","centered","centeredPage","height100","header","footer","themeMetaColor","querySelector","prevColor","getAttribute","setAttribute","hasFooter","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefix","prevTitle","t","Form","onSubmit","formRef","useRef","form","ref","e","preventDefault","current","FormData","FormField","_ref2","label","field","AuthPage","setError","inp_login","inp_password","mutation","onError","authData","useMutationAuth","back","isLoading","_inp_login$current","_inp_password$current","login","value","password","type","required","Popup","open","closeOnOutclick","isOpen","setIsOpen","hidden","setHidden","timeout","setTimeout","clearTimeout","target","popup","DebugPage","log","setLog","logTitle","setLogTitle","refLog","viewLog","path","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","parentElement","scrollHeight","x","imagefileToData","file","imgBase64","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","console","useStateObj","useStateObjExt","disableOnSet","pv","nv","Function","Textbox","btn","type2","small","dark","highlight","AuthByTicket","useMutationAuthByTicket","msgWide","msg1","logo","msg2box","msg2","msg_error","msg_error_open","msg3","openFile","display","accept","onChange","_e$target","_e$target$files","imgData","files","qr","QrcodeDecoder","decodeFromImage","code","IndexPage","authOpen","parseLogResponse","responseLog","date","Date","padNum","num","len","padStart","datetimeToString","seconds","getFullYear","getMonth","getDate","dateToString","dateStr","getHours","getMinutes","getSeconds","timeToString","LogPage","_useLogLen$data$len","_useLogLen$data","_log$data","clearCache","removeQueries","invalidateQueries","useLogCacheClear","page","fn","p","map","prefetchQuery","useLog","logLen","btns","isFetching","refetch","Math","max","min","table","minWidth","item","colorizeAction","actionCode","tableName","recordId","userName","userId","changesCell","changes","toggleInp","htmlFor","action","added","deleted","updated","restored","queryStrKey","queryKey","queryInvalidate","exact","queryListAddItem","_queryClient$getQuery","getQueryState","items","queryListUpdateItem","_queryClient$getQuery2","queryListDeleteItem","itemId","_queryClient$getQuery3","useQuests","useQuestsFull","useMutationDeleteQuest","questId","useMutationOpenQuest","useDialog","dialogId","autoEnabled","enabled","useMutationEditDialog","dialogData","useDialogCharacters","characters","forEach","useMutationDeleteCharacter","characterId","usePreloadGameDialogImgs","els","Object","values","el","createElement","rel","href","as","head","appendChild","removeChild","AddQuest","nameRef","rewardRef","hiddenRef","description","popupOpen","mutationAdd","questData","useMutationAddQuest","checked","_nameRef$current","_rewardRef$current","_hiddenRef$current","reward","valueAsNumber","textarea","cols","rows","inp","description_count","description_count_too_many","IconDelete","DialogNode","_characters$data","deleteNode","moveUp","addUp","moveDown","addDown","character","selectName","parseInt","placeholder","buttons","doubleBtn","btnUp","btnPlus","btnDown","IconCancel","IconSave","PopupConfirm","mutatateParams","reset","button","Character","_imgData$v","deleteNew","changed","deleting","orien","characterData","useMutationAddCharacter","mutationEdit","useMutationEditCharacter","newCharacter","inputs","select","ManageCharacters","charactersNew","lastId","addBtn","isSuccess","V","useGameDialogEditor","onClose","update","editor","_data","_onClose","_onCloseMain","GameDialogEditor","_v$_onClose","_v$_onCloseMain","call","moveNode","fromI","toI","nodes","splice","addNode","i","push","copyObj","obj","parse","useGameDialog","dialog","_dialogId","_characters","GameDialog","GameDialogWithLoader","run","runLocal","nodeI","setNodeI","node","dialog_container","img_right","img_center","dialog__title","dialog__body","dialog__text","dialog__btns","dialog__prev","dialog__next","IconEdit","DIALOGID","EditGameDialog","saving","dialogDataQuery","getDialog","isStale","isIdle","EditStartDialog","IconView","IconReload","Quest","_dialog1Id$v","_dialog2Id$v","quest","dialog1Id","dialog2Id","dialog1DataQuery","dialog2DataQuery","dialog1Data","dialog2Data","dialog1Changed","dialog2Changed","useMutationEditQuest","newQuest","state","query","checkbox","n","Fragment","changedHighlight","dialogBtns","dialog1","dialog2","ManageQuestPage","_quests$data","quests","useStoreItemsFull","useMutationDecreaseItem","useMutationDeleteItem","AddStoreItem","priceRef","countRef","itemData","useMutationAddItem","_countRef$current","_priceRef$current","count","price","StoreItem","_imgData$v2","decreasing","useMutationEditItem","newitem","btnMinus","ManageStorePage","_items$data","Footer","curPage","Title","SelectGroup","setGroup","useMutationSetGroup","grid","ink","grid__img1","grid__btn1","grid__img2","grid__btn2","GameDialogGreetings","selectGroup","StyledWindow","scrollUpdate","contentRef","InteractiveMap","imgW","imgH","objects","objectsOpacity","zoomMin","zoomMax","disablePadding","fillOnStart","mapEl","y","w","h","zoom","toCenter","markClick","moving","active","sx","sy","six","siy","zooming","sd","sz","setMarkClick","s","setSize","clientWidth","clientHeight","removeEventListener","onMouseDown","screenX","screenY","onMouseMove","dx","dy","applyBoundaries","onMouseUp","rezoom","oldZ","onWheel","z","deltaY","onTouchStart","touches","clientX","clientY","x1","y1","onTouchMove","sqrt","onTouchEnd","mark","left","top","opacity","mark__mark","MapPage","imgs","usePreloadImgs","map1","map2","map3","mark_0","mark_1_1","mark_1_2","mark_1_3","mark_2_1","mark_2_2","mutationOpen","openedQuest","opened","questMark","find","completed","quest__back","quest__title","quest__description","quest__dialog","quest__spacer","quest__scanner","quest__scanner__link","QrCode","scale","margin","colorBg","qrcode","setQrcode","QRCode","errorCorrectionLevel","light","url","PromotePage","role","roleText","roleText2","QuestPage","openQuest","background","questDescription","quest_completed","renderReward","questDescription__body","fakeQuests","concat","btn_empty","Infinity","isFinite","useMutationScanner","scannerData","useSound","loop","audio","Audio","playing","preload","play","currentTime","pause","stop","onScan","scannerEl","scanner","useScanner","afterScanTimeout","backgroundColor","video","QrScanner","highlightScanRegion","maxScansPerSecond","_scanner","start","catch","_scanner2","_scanner3","isTimeout","setIsTimeout","scanned","setScanned","setIsError","playBeep","beep","innerHTML","Scanner","formatMsg","onRes","setMsg","setErr","barRef","onMutated","_barRef$current","classList","add","bar_full","_barRef$current2","remove","msg_visible","msg_dimmed","bar","ScannerPage","_res$v","_res$v2","_res$v3","_res$v4","disableScroll","actions","startsWith","_ok$wrong$error$r$res","tb","gold","SendPage","_send$v","_send$v2","_send$v3","_send$v4","_send$v5","_send$v6","_mutationCheck$data","_mutationCheck$data2","send","mutationCheck","sendId","useMutationCheckSend","reusable","submit","positive","check","_send$v7","successful","used","notUsed","StorePage","list","item_few","item_ended","item__img","item__desc","item__desc__inner","TimetablePage","timetable","data_timetable","data_autograph","data_lections","data_tournaments","item_title","UsersPage","_users$data","users","userInfo","o","colorizeOperation","colors","get","change","delete","WorkerPage","WorkerQuestPage","_selectedQuest$v","_selectedQuest$v2","_selectedQuest$v3","selectedQuest","quest_hidden","id_big","questCard","WorkerStorePage","_selectedItem$v","_selectedItem$v2","_selectedItem$v3","_selectedItem$v4","_selectedItem$v5","selectedItem","item_small","useGameDuration","useGameCounter","useGameStartStr","useMutationGameDuration","duration","useMutationGameCounter","counter","useMutationGameStartStr","startStr","GameDialogGame","markAsOpen","useMutationOpenGame","useTourneyCharacters","characterById","ch","useTourneyData","useMutationDeleteTourneyCharacter","useMutationTourneyEditNode","nodeId","useMutationAction","nodeData","useMutationTourneyStartGameAtNode","useMutationTourneySelectNextGame","useMutationTourneyStartGame","useMutationTourneyEndGame","useMutationTourneyEndTourney","useMutationTourneyUnendTourney","useMutationTourneyReset","params","newLocal","GamePage","_state$data","_state$data2","_state$data3","_state$data4","_state$data5","_state$data6","_state$data7","_state$data8","_state$data9","_state$data12","_state$data13","_state$data14","_state$data15","_state$data16","_state$data17","_state$data18","_state$data19","_state$data20","_state$data21","_state$data22","meta","content","clicks","sendDelay","lastClickSend","now","sendClick","useMutationSendClick","selectTeam","team","useMutationGameSelectTeam","characterLeft","opponent1Id","characterRight","opponent2Id","characterWinner","winner","characterTeam","characterTourneyWinner1","tourneyWinner1","characterTourneyWinner2","tourneyWinner2","characterTourneyWinner3","tourneyWinner3","_state$data10","_state$data11","ct","maxmin","floor","random","title2","subtitle","toString","press","HTMLButtonElement","circle","animateBtnPress","press__btn","chooseTeam","chooseTeam__btn","title3","tourney_winners","tourney_winner","IconPlay","TourneyEdit","_tourney$data","_tourney$data2","_tourney$data3","_curGame$left","_curGame$right","_tourney$data4","_curGameCharacterLeft","_curGameCharacterRigh","tourney","curGame","findNode","tree","curGameNodeId","third","curGameWinner","curGameCharacterLeft","curGameCharacterRight","right","errors","parents","_characterById","same","_p$left","_p$right","_characterById2","_characterById3","_p$left2","_characterById4","_p$right2","from","Set","checkTreeForErrors","curGameState","characterName","CancelGameBtn","EditWinnerBtn","oponent1","oponent2","marginTop","Tree","ThirdPlace","canceling","_tourney$data5","_oponent1$name","_oponent2$name","winnerId","editing","editNode","winnerName","winnerSelect","_tree$left","_tree$right","_characterLeft$name","_characterRight$name","c","collapsed","starting","nodeC","nodeCollapsed","flexGrow","ctrlBtns","collapseBtn","_tree$left2","_tree$left3","_tree$left$left","_tree$left4","_tree$left$right","_tree$left$left2","_tree$right2","_tree$right3","_tree$right$left","_tree$right4","_tree$right$right","_tree$right$left2","_ref3","_tree$left5","_tree$left6","_tree$left$left3","_tree$left7","_tree$left$right2","_tree$left$left4","_tree$right5","_tree$right6","_tree$right$left3","_tree$right7","_tree$right$right2","_tree$right$left4","_characterLeft$name2","_characterRight$name2","useMutationTourneyEditThird","characterLeftId","characterRightId","ConfirmingButton","bt","rt","popupOpen2","GameSettingsPage","openScreen","Input","getv","newv","showGame","ended","queryR","game","constructor","barPercent","updateScreen","counterV","startI","counterTimer","stoped","isGoing","_this$state","this","opponentLeftId","_this$state2","opponentRightId","_this$state3","_this$state4","_this$state5","titleType","_this$state6","wait","going","end","tourneyEnd","updateState","_this$updateScreen","_this$updateScreen3","updateStart","newState","_this$updateScreen2","dt","delay","onNewState","_this$navigate","getBarPercent","abs","getCounter","sum","clicks1","clicks2","useGame","GameScreenPage","ostSound","ost","soundEnable","rectsEl","parent","rect","spawnRect","rects","frame","barShake","barLeft","bar__img","nums","barRight","marginLeft","soundBtn","AddCharacter","colorRef","useMutationAddTourneyCharacter","_colorRef$current","useMutationEditTourneyCharacter","newcharacter","GameCharactersPage","transform","anim","RECT","TreeNode","S","RECT_ENDEN","showRect","updateData","setTourneyTransform","init","createTree","leftNode","rightNode","_leftNode$left","_rightNode$left","lnode","rnode","newRect","getBounds","oldRect","lerp","a","b","sin","PI","calcScale","cx","cy","findRectCenter","draw","ctx","save","translate","strokeStyle","lineWidth","restore","canvas","paddingR","padding","newCharacterId","imgRight","fillStyle","fillRect","drawImage","font","fillText","strokeRect","drawLines","drawLine0","_this$left","_this$right","drawLine","points","reverse","reduce","pop","beginPath","moveTo","l","dl","lt","lineTo","stroke","_drawLine","_this$left2","_this$right2","bind","_this$characters$this","_this$characters$this2","_this","_this$left3","_this$right3","nl","nr","_this$left4","_this$right4","pt","loadCharacters","requestAnimationFrame","oldState","Image","innerWidth","innerHeight","tm","measureText","actualBoundingBoxAscent","_this$tree","_this$tree2","setCanvas","getContext","useTourney","TourneyPage","StatsPage","_stats$data$group1_me","_stats$data","_stats$data$group1_co","_stats$data2","_stats$data$group2_me","_stats$data3","_stats$data$group2_co","_stats$data4","stats","useStatsCacheClear","groupStats","group1_members","group1_completed","group2_members","group2_completed","App","ProtectedRoute","permission","element","Route","Navigate","Preloader","Routes"],"sourceRoot":""}