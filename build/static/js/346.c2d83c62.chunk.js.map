{"version":3,"file":"static/js/346.c2d83c62.chunk.js","mappings":"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","sources":["api/dataTypes.ts","utils/fetch.ts","api/user.ts","api/operations.ts","utils/scrollToTop.tsx","utils/displayError.tsx","utils/classNames.ts","webpack://event_platform/./src/components/MessageFromBackend/styles.module.css?70b3","components/MessageFromBackend/index.tsx","utils/getCookies.ts","webpack://event_platform/./src/components/HeaderBack/styles.module.css?464d","components/HeaderBack/index.tsx","webpack://event_platform/./src/components/Header/styles.module.css?07e3","api/auth.ts","webpack://event_platform/./src/components/Spinner/styles.module.css?6126","components/Spinner/index.tsx","components/Header/index.tsx","webpack://event_platform/./src/components/Layout/styles.module.css?6939","components/Layout/index.tsx","pages/NotFoundPage/index.tsx","pages/NoPermissionPage/index.tsx","webpack://event_platform/./src/pages/AuthPage/styles.module.css?7367","utils/useTtile.ts","webpack://event_platform/./src/components/Form/styles.module.css?5f34","components/Form/index.tsx","pages/AuthPage/index.tsx","webpack://event_platform/./src/pages/IndexPage/styles.module.css?578a","webpack://event_platform/./src/components/Footer/styles.module.css?e39a","components/Footer/index.tsx","pages/IndexPage/index.tsx","webpack://event_platform/./src/components/Popup/styles.module.css?f1d6","components/Popup/index.tsx","pages/DebugPage/index.tsx","webpack://event_platform/./src/pages/UsersPage/styles.module.css?2339","pages/UsersPage/index.tsx","api/log.ts","utils/nums.ts","utils/dates.ts","webpack://event_platform/./src/pages/LogPage/styles.module.css?478b","pages/LogPage/index.tsx","webpack://event_platform/./src/pages/LoginPage/styles.module.css?34a9","pages/LoginPage/index.tsx","webpack://event_platform/./src/pages/ProfilePage/styles.module.css?79a0","pages/ProfilePage/index.tsx","webpack://event_platform/./src/pages/TimetablePage/styles.module.css?d4b9","pages/TimetablePage/index.tsx","api/quest.ts","webpack://event_platform/./src/pages/QuestPage/styles.module.css?26ae","components/QrCode/index.tsx","pages/QuestPage/index.tsx","webpack://event_platform/./src/pages/StorePage/styles.module.css?2133","pages/StorePage/index.tsx","api/storeItem.ts","webpack://event_platform/./src/utils/useScanner/styles.module.css?1ae4","utils/useScanner/index.tsx","utils/useSound.ts","webpack://event_platform/./src/pages/ScannerQuestPage/styles.module.css?6b57","pages/ScannerQuestPage/index.tsx","webpack://event_platform/./src/pages/WorkerPage/styles.module.css?c125","pages/WorkerPage/index.tsx","webpack://event_platform/./src/pages/ScannerSelectQuestPage/styles.module.css?ceea","pages/ScannerSelectQuestPage/index.tsx","App.tsx"],"sourcesContent":["export class ApiError extends Error { }\n\nexport type Modify<T, R> = Omit<T, keyof R> & R;\nexport interface ResponseMsg\n{\n\tmsg: string,\n}\n","import { ApiError, ResponseMsg } from \"../api/dataTypes\";\n\nasync function fetchWithJson(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetch(input, {\n\t\tmethod,\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: body === undefined ? null : JSON.stringify(body),\n\t});\n\tif (!res.ok) throw new ApiError((await res.json() as ResponseMsg).msg);\n\treturn res;\n}\n\nexport function fetchGet(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"GET\", input, body);\n}\n\nexport function fetchPost(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"POST\", input, body);\n}\n\nexport function fetchDelete(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchWithJson(\"DELETE\", input, body);\n}\n\nasync function fetchJson<T>(method: \"GET\" | \"POST\" | \"DELETE\", input: RequestInfo | URL, body?: any)\n{\n\tconst res = await fetchWithJson(method, input, body);\n\tconst data = await res.json();\n\treturn data as T;\n}\n\nexport function fetchJsonGet<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"GET\", input, body);\n}\n\nexport function fetchJsonPost<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"POST\", input, body);\n}\n\nexport function fetchJsonDelete<T>(input: RequestInfo | URL, body?: any)\n{\n\treturn fetchJson<T>(\"DELETE\", input, body);\n}\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { ApiError, ResponseMsg } from \"./dataTypes\";\nimport { fetchJsonGet, fetchPost } from \"../utils/fetch\";\n\nexport interface User\n{\n\tauth: boolean;\n\tid: number;\n\tbalance: number;\n\tname: string;\n\tlogin: string;\n\troles: string[];\n\toperations: string[];\n}\n\nexport interface UserFull\n{\n\tid: number;\n\tname: string;\n\tlogin: string;\n\troles: string[];\n\tbossId: number | null;\n\tdeleted: boolean;\n\taccess: string[];\n\toperations: string[];\n}\n\nexport interface UserWithPwd extends User\n{\n\tpassword: string;\n}\n\n\nexport default function useUser()\n{\n\treturn useQuery(\"user\", getUser);\n}\n\nasync function getUser(): Promise<User>\n{\n\tconst res = await fetch(\"/api/user\");\n\tconst data = await res.json();\n\n\tif (res.status == 401) return { auth: false, id: -1, balance: 0, login: \"\", roles: [], name: \"\", operations: [] };\n\tif (!res.ok) throw new ApiError((data as ResponseMsg).msg);\n\n\tconst user = data as User;\n\tuser.auth = true;\n\treturn user;\n}\n\nexport function useUsers()\n{\n\treturn useQuery(\"users\", async () =>\n\t\tawait fetchJsonGet<UserFull[]>(\"/api/users\")\n\t);\n}\n\nexport function useMutationChangePassword(onSuccess?: () => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangePasswordData) =>\n\t\t\tawait fetchPost(\"/api/user/change_password\", data),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\n\ninterface ChangePasswordData\n{\n\tpassword: string;\n}\n\nexport function useMutationChangeName(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: async (data: ChangeName) =>\n\t\t{\n\t\t\tawait fetchPost(\"/api/user/change_name\", data);\n\t\t\treturn data;\n\t\t},\n\t\tonSuccess: (data: ChangeName) =>\n\t\t{\n\t\t\tif (queryClient.getQueryState(\"user\")?.status == \"success\")\n\t\t\t\tqueryClient.setQueryData(\"user\", (user?: User) => ({ ...user!, name: data.name }));\n\t\t\tonSuccess?.();\n\t\t},\n\t});\n\treturn mutation;\n}\n\ninterface ChangeName\n{\n\tname: string;\n}","import { UseQueryResult } from \"react-query\";\nimport { User } from \"./user\";\nimport useUser from \"./user\";\n\nconst Operations = {\n\tpage_debug: \"page_debug\",\n\tpage_users: \"page_users\",\n\tpage_worker: \"page_worker\",\n\tpage_scanner_quest: \"page_scanner_quest\",\n\tpage_scanner_store: \"page_scanner_store\",\n}\n\nexport type Operation = keyof typeof Operations;\n\nexport default function hasPermission(user: UseQueryResult<User, unknown>, operation: Operation)\n{\n\treturn !!(user.data?.auth && user.data?.operations.includes(operation));\n}\n\nexport function useHasPermission(operation: Operation)\n{\n\tconst user = useUser();\n\treturn hasPermission(user, operation);\n}\n","import { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport default function ScrollToTop()\n{\n\tconst { pathname } = useLocation();\n\n\tuseEffect(() =>\n\t{\n\t\twindow.scrollTo(0, 0);\n\t}, [pathname]);\n\n\treturn null;\n}\n","import { ReactNode } from \"react\";\nimport { UseMutationResult, UseQueryResult } from \"react-query\";\nimport { ApiError } from \"../api/dataTypes\";\n\nexport default function displayError(requestRes: UseMutationResult<any, any, any, any> | UseQueryResult<any, any>, render?: (error: string) => ReactNode, messageFormater?: (error: string) => string)\n{\n\tif (!requestRes.isError) return null;\n\n\tconst error = requestRes.error instanceof ApiError ? requestRes.error.message : \"Ошибка\";\n\tconst msg = messageFormater ? messageFormater(error) : error;\n\n\tconst renderer = render || defaultRender;\n\treturn renderer(msg);\n}\n\nfunction defaultRender(error: string)\n{\n\treturn (\n\t\t<h3 style={{ color: \"tomato\", textAlign: \"center\" }}>{error}</h3>\n\t)\n}\n","export default function classNames(...names: (string | undefined | null | false)[])\n{\n\treturn names.filter(v => !!v).join(\" \");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__hzHjz\",\"visible\":\"styles_visible__6aD-n\",\"close\":\"styles_close__3L8iW\",\"message\":\"styles_message__oF8zk\"};","import { useEffect, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\nimport getCookie from \"../../utils/getCookies\";\n\nlet msg = \"\";\nexport default function MessageFromBackend()\n{\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() =>\n\t{\n\t\tconst timer = setInterval(() =>\n\t\t{\n\t\t\tconst msgCur = getMsg();\n\t\t\tif (msgCur != msg)\n\t\t\t{\n\t\t\t\tmsg = msgCur || \"\";\n\t\t\t\tsetMessage(msg);\n\t\t\t}\n\t\t}, 1000);\n\t\treturn () =>\n\t\t{\n\t\t\tclearInterval(timer);\n\t\t}\n\t}, [setMessage])\n\n\treturn (\n\t\t<div className={classNames(styles.root, message != \"\" && styles.visible)}>\n\t\t\t<button\n\t\t\t\tclassName={styles.close}\n\t\t\t\tonClick={() => setMessage(\"\")}\n\t\t\t></button>\n\t\t\t<div className={styles.message}>{trimQuotes(message)}</div>\n\t\t</div>\n\t);\n}\n\nfunction trimQuotes(str: string)\n{\n\tif (str.at(0) == '\"') str = str.slice(1);\n\tif (str.at(-1) == '\"') str = str.slice(0, -1);\n\treturn str;\n}\n\nfunction getMsg()\n{\n\treturn getCookie(\"MESSAGE_TO_FRONTEND\");\n}\n","export default function getCookie(name: string)\n{\n\tlet matches = document.cookie.match(new RegExp( // eslint-disable-next-line\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__4DGhY\"};","import { useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function HeaderBack()\n{\n\tconst navigate = useNavigate();\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<button onClick={() => navigate(-1)} className=\"button button_light\">\n\t\t\t\tНазад\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Zvl9c\",\"home\":\"styles_home__o+-s7\",\"block\":\"styles_block__a1SM7\",\"balance\":\"styles_balance__PLLCC\",\"user\":\"styles_user__0ltHf\",\"menu\":\"styles_menu__WWgPh\",\"menuVisible\":\"styles_menuVisible__mMGZn\"};","import { useMutation, useQueryClient } from \"react-query\";\nimport { fetchJsonPost, fetchPost } from \"../utils/fetch\"\nimport { ApiError } from \"./dataTypes\";\nimport { User } from \"./user\";\n\nexport function useMutationAuth(onError?: (msg: string) => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postAuth,\n\t\tonSuccess: (data) =>\n\t\t{\n\t\t\tqueryClient.setQueryData(\"user\", () => data);\n\t\t},\n\t\tonError: (error) =>\n\t\t{\n\t\t\tonError?.(error instanceof ApiError ? error.message : \"Произошла ошибка, попробуйте ещё раз\");\n\t\t}\n\t});\n\treturn mutation;\n}\n\nasync function postAuth(authData: AuthData)\n{\n\tconst user = await fetchJsonPost<User>(\"/api/auth\", authData);\n\tuser.auth = true;\n\treturn user;\n}\n\ninterface AuthData\n{\n\tlogin: string,\n\tpassword: string,\n}\n\n\nexport function useMutationLogout(onSuccess?: () => void)\n{\n\tconst queryClient = useQueryClient();\n\tconst mutation = useMutation({\n\t\tmutationFn: postLogout,\n\t\tonSuccess: () =>\n\t\t{\n\t\t\tqueryClient.invalidateQueries(\"user\");\n\t\t\tonSuccess?.();\n\t\t}\n\t});\n\treturn mutation;\n}\n\nexport async function postLogout()\n{\n\tawait fetchPost(\"/api/logout\");\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__BdzzK\",\"spinner\":\"styles_spinner__rlI86\",\"lds-ring\":\"styles_lds-ring__jnLuB\"};","import styles from \"./styles.module.css\"\n\nexport default function Spinner({ color, zIndex }: SpinnerProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<div className={styles.spinner} style={{ \"--color\": color, zIndex } as React.CSSProperties}><div></div><div></div><div></div><div></div></div>\n\t\t</div>\n\t);\n}\n\ninterface SpinnerProps\n{\n\tcolor?: string,\n\tzIndex?: number,\n}","import { Link, useNavigate } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\nimport { useMutationLogout } from \"../../api/auth\";\nimport useUser from \"../../api/user\";\nimport Spinner from \"../Spinner\";\nimport { useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport hasPermission from \"../../api/operations\";\n\nexport default function Header()\n{\n\tconst [menuOpen, setMenuOpen] = useState(false);\n\tconst navigate = useNavigate();\n\tconst mutation = useMutationLogout(() =>\n\t{\n\t\tsetMenuOpen(false);\n\t});\n\tconst user = useUser();\n\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t<Link to={\"/\"} className={classNames(styles.home, \"material_symbols\")}>home</Link>\n\t\t\t<span className={styles.block}>\n\t\t\t\t<div className={styles.balance}>{user.data?.balance || 0} G</div>\n\t\t\t\t<button className={styles.user} onClick={() => user.data?.auth ? setMenuOpen(v => !v) : navigate(\"/login\")}>\n\t\t\t\t\t<span>{user.data?.auth ? user.data?.name : \"Войти\"}</span>\n\t\t\t\t</button>\n\t\t\t\t<div className={classNames(styles.menu, menuOpen && styles.menuVisible)}>\n\t\t\t\t\t<button onClick={() => navigate(\"/profile\")}>\n\t\t\t\t\t\tПрофиль\n\t\t\t\t\t</button>\n\t\t\t\t\t{hasPermission(user, \"page_debug\") && <Link to=\"/debug\">{`</>`}</Link>}\n\t\t\t\t\t{hasPermission(user, \"page_worker\") && <Link to=\"/worker\" className=\"material_symbols\">deployed_code</Link>}\n\t\t\t\t\t<button onClick={() => mutation.mutate()} disabled={mutation.status != \"idle\"}>\n\t\t\t\t\t\tВыйти\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t\t{mutation.status == \"loading\" && <Spinner />}\n\t\t</div>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__xvR2N\",\"hasFooter\":\"styles_hasFooter__lMS3o\",\"body\":\"styles_body__S-p4X\",\"body_centered\":\"styles_body_centered__NzRPU\",\"body_centeredPage\":\"styles_body_centeredPage__R-EzO\"};","import classNames from \"../../utils/classNames\";\nimport Header from \"../Header\";\nimport styles from \"./styles.module.css\"\n\nexport default function Layout({ children, className, styles: el_styles, centered = false, centeredPage = false, height100 = false, gap = 0, header, footer }: LayoutProps)\n{\n\tif (header === undefined) header = <Header />\n\n\treturn (\n\t\t<div className={classNames(styles.root, !!footer && styles.hasFooter)} style={{ ...el_styles, maxHeight: height100 ? \"100dvh\" : \"\" }}>\n\t\t\t{header || <div></div>}\n\t\t\t<div\n\t\t\t\tclassName={classNames(\n\t\t\t\t\tstyles.body, className,\n\t\t\t\t\tcentered && styles.body_centered,\n\t\t\t\t\tcenteredPage && styles.body_centeredPage,\n\t\t\t\t)}\n\t\t\t\tstyle={{ gap, maxHeight: height100 ? \"100%\" : \"\" }}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t{footer}\n\t\t</div>\n\t);\n}\n\ninterface LayoutProps extends React.PropsWithChildren\n{\n\tcenteredPage?: boolean,\n\tcentered?: boolean,\n\theight100?: boolean,\n\tgap?: number | string,\n\tclassName?: string,\n\theader?: React.ReactNode,\n\tfooter?: React.ReactNode,\n\tstyles?: React.CSSProperties,\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NotFoundPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tТакой страницы нет\n\t\t</Layout>\n\t);\n}\n","import HeaderBack from \"../../components/HeaderBack\";\nimport Layout from \"../../components/Layout\";\n\nexport default function NoPermissionPage()\n{\n\treturn (\n\t\t<Layout centered header={<HeaderBack />}>\n\t\t\tУ вас недостатточно прав на просмотр этой страницы\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"back\":\"styles_back__uuJZO\",\"form\":\"styles_form__n7Rcu\"};","import { useEffect } from \"react\"\n\nexport function useTitle(title: string | (string | undefined | null | false)[], prefis = \"Мероприятие\")\n{\n\tuseEffect(() =>\n\t{\n\t\tconst prevTitle = document.title;\n\t\tconst t = typeof title != \"object\" ? [title] : title;\n\t\tdocument.title = [prefis, ...t].filter(v => !!v).join(\" | \");\n\t\treturn () => { document.title = prevTitle; }\n\t}, [title, prefis]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"styles_form__cFFCH\",\"field\":\"styles_field__5rpBk\"};","import classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport function Form({ className, style, onSubmit, children }: FormProps)\n{\n\treturn (\n\t\t<form\n\t\t\tclassName={classNames(styles.form, className)}\n\t\t\tstyle={style}\n\t\t\tonSubmit={e =>\n\t\t\t{\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit();\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\ninterface FormProps extends React.PropsWithChildren\n{\n\tonSubmit: () => void,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLFormElement>,\n}\n\n\nexport function FormField({ label, className, style, children }: FormFieldProps)\n{\n\treturn (\n\t\t<label className={classNames(styles.field, className)} style={style}>\n\t\t\t<span>{label}</span>\n\t\t\t{children}\n\t\t</label>\n\t);\n}\n\ninterface FormFieldProps extends React.PropsWithChildren\n{\n\tlabel?: string,\n\tclassName?: string,\n\tstyle?: React.StyleHTMLAttributes<HTMLLabelElement>,\n}\n","import { useRef, useState } from \"react\";\nimport styles from \"./styles.module.css\"\nimport { useMutationAuth } from \"../../api/auth\";\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Form, FormField } from \"../../components/Form\";\nimport Spinner from \"../../components/Spinner\";\nimport { Link } from \"react-router-dom\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function AuthPage()\n{\n\tuseTitle(\"Авторизация\");\n\tconst [error, setError] = useState(\"\");\n\tconst inp_login = useRef<HTMLInputElement>(null);\n\tconst inp_password = useRef<HTMLInputElement>(null);\n\tconst mutation = useMutationAuth(setError);\n\n\tfunction onSubmit()\n\t{\n\t\tconst login = inp_login.current?.value || \"\";\n\t\tconst password = inp_password.current?.value || \"\";\n\t\tmutation.mutate({ login, password });\n\t}\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<Link to=\"/\" className={classNames(styles.back, \"material_symbols\")}>arrow_back</Link>\n\t\t\t<h1>Мероприятие</h1>\n\t\t\t{error && <h3>{error}</h3>}\n\t\t\t{mutation.isLoading && <Spinner />}\n\t\t\t<Form className={styles.form} onSubmit={onSubmit}>\n\t\t\t\t<FormField label=\"Логин\">\n\t\t\t\t\t<input ref={inp_login} type=\"text\" name=\"login\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<FormField label=\"Пароль\">\n\t\t\t\t\t<input ref={inp_password} type=\"password\" name=\"password\" required />\n\t\t\t\t</FormField>\n\t\t\t\t<button type=\"submit\" className=\"button button_light button_small\" disabled={mutation.status == \"loading\"}>Войти</button>\n\t\t\t</Form>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__h8xNs\",\"title\":\"styles_title__+su+v\",\"map\":\"styles_map__giu5H\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__cV7H9\"};","import { Link } from \"react-router-dom\";\nimport styles from \"./styles.module.css\"\n\nexport default function Footer({ curPage }: FooterProps)\n{\n\treturn (\n\t\t<div className={styles.root}>\n\t\t\t{curPage != \"map\" && <Link to={\"/\"}>Карта</Link>}\n\t\t\t{curPage != \"timetable\" && <Link to={\"/timetable\"}>Расписание</Link>}\n\t\t\t{curPage != \"quest\" && <Link to={\"/quest\"}>Квесты</Link>}\n\t\t\t{curPage != \"store\" && <Link to={\"/store\"}>Магазин</Link>}\n\t\t\t{/* {curPage != \"race\" && <Link to={\"/race\"}>Гонки</Link>} */}\n\t\t</div>\n\t);\n}\n\ninterface FooterProps\n{\n\tcurPage?: \"map\" | \"timetable\" | \"quest\" | \"store\" | \"race\"\n}\n","import styles from \"./styles.module.css\"\nimport map from \"./map.png\";\nimport Layout from \"../../components/Layout\";\nimport Footer from \"../../components/Footer\";\n\nexport default function IndexPage()\n{\n\treturn (\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer curPage=\"map\" />}>\n\t\t\t<h1 className={styles.title}>Underparty</h1>\n\t\t\t<div className={styles.map}>\n\t\t\t\t<img src={map} alt=\"Карта\" />\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__O0923\",\"hidden\":\"styles_hidden__eYJaf\",\"open\":\"styles_open__35Vcu\",\"popup\":\"styles_popup__L-0H0\",\"header\":\"styles_header__o87wG\",\"close\":\"styles_close__w0Yhz\",\"body\":\"styles_body__t75Nd\"};","import { useEffect, useRef, useState } from \"react\";\nimport classNames from \"../../utils/classNames\";\nimport styles from \"./styles.module.css\"\n\nexport default function Popup({ children, open = false, close, title = \"\", closeOnOutclick=true }: CustomPopupProps)\n{\n\tconst ref = useRef<HTMLDivElement>(null)\n\tconst [isOpen, setIsOpen] = useState(open);\n\tconst [hidden, setHidden] = useState(!open);\n\tuseEffect(() =>\n\t{\n\t\tif (open)\n\t\t{\n\t\t\tsetHidden(false);\n\t\t\tconst timeout = setTimeout(() => setIsOpen(true), 100);\n\t\t\treturn () => clearTimeout(timeout);\n\t\t}\n\t\tsetIsOpen(false);\n\t\tconst timeout = setTimeout(() => setHidden(true), 250);\n\t\treturn () => clearTimeout(timeout);\n\t}, [open]);\n\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\tclassName={classNames(styles.root, isOpen && styles.open, hidden && styles.hidden)}\n\t\t\tonClick={e =>\n\t\t\t{\n\t\t\t\tif (closeOnOutclick && e.target == ref.current)\n\t\t\t\t\tclose?.();\n\t\t\t}}\n\t\t>\n\t\t\t<div className={styles.popup}>\n\t\t\t\t{\n\t\t\t\t\t(title || close) &&\n\t\t\t\t\t<div className={styles.header}>\n\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t{close && <button className={styles.close} onClick={close}></button>}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<div className={styles.body}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport interface PopupProps\n{\n\topen?: boolean,\n\tclose?: () => void,\n\ttitle?: string,\n\tcloseOnOutclick?: boolean,\n}\n\ntype CustomPopupProps = PopupProps & React.PropsWithChildren;","import { useRef, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport Popup from \"../../components/Popup\";\nimport { Link } from \"react-router-dom\";\n\nexport default function DebugPage()\n{\n\tconst [logErrors, setLogErrors] = useState(\"\");\n\tconst [log, setLog] = useState(\"\");\n\tconst refLogErrors = useRef<HTMLPreElement>(null);\n\tconst refLog = useRef<HTMLPreElement>(null);\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\" styles={{ fontFamily: \"'PT Sans', Arial\" }}>\n\t\t\t<Link to=\"/users\">Users</Link>\n\t\t\t<Link to=\"/log\">Log</Link>\n\t\t\t<button onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLogErrors(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_errors\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLogErrors(data);\n\t\t\t\t\tsetTimeout(() => refLogErrors.current?.parentElement?.scrollTo(0, refLogErrors.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLogErrors(JSON.stringify(x)); }\n\t\t\t}}>Log errors</button>\n\t\t\t<button onClick={async () =>\n\t\t\t{\n\t\t\t\tsetLog(\"Loading\");\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst res = await fetch(\"/api/debug/log_info\");\n\t\t\t\t\tconst data = await res.text();\n\t\t\t\t\tsetLog(data);\n\t\t\t\t\tsetTimeout(() => refLog.current?.parentElement?.scrollTo(0, refLog.current?.parentElement?.scrollHeight), 150);\n\t\t\t\t}\n\t\t\t\tcatch (x) { setLog(JSON.stringify(x)); }\n\t\t\t}}>Log requests</button>\n\t\t\t<Popup title=\"logErrors\" open={logErrors != \"\"} close={() => setLogErrors(\"\")}>\n\t\t\t\t<pre ref={refLogErrors}>{logErrors}</pre>\n\t\t\t</Popup>\n\t\t\t<Popup title=\"log\" open={log != \"\"} close={() => setLog(\"\")}>\n\t\t\t\t<pre ref={refLog}>{log}</pre>\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"user\":\"styles_user__WUZvf\",\"title\":\"styles_title__Gd1jL\",\"toggle\":\"styles_toggle__qlIwC\",\"toggleInp\":\"styles_toggleInp__fGE-7\",\"userInfo\":\"styles_userInfo__vgBlw\",\"operations\":\"styles_operations__MGBbv\"};","import { useUsers } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function UsersPage()\n{\n\tuseTitle(\"Пользователи\");\n\tconst users = useUsers()\n\n\treturn (\n\t\t<Layout centeredPage gap={8} styles={{ fontFamily: \"'PT Sans', Arial\" }}>\n\t\t\t{users.isLoading && <h3>Загрузка</h3>}\n\t\t\t{displayError(users)}\n\t\t\t{users.data?.map(v => <div className={styles.user} key={v.id}>\n\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`user${v.id}`} />\n\t\t\t\t<label className={styles.title} htmlFor={`user${v.id}`}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>{v.login}</div>\n\t\t\t\t\t\t<div style={{ color: \"blue\" }}>{v.id}</div>\n\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t<div>{v.name}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{v.deleted && <>\n\t\t\t\t\t\t\t<div style={{ color: \"tomato\" }}>deleted</div>\n\t\t\t\t\t\t\t<div>|</div>\n\t\t\t\t\t\t</>}\n\t\t\t\t\t\t<span>{v.roles.join(\", \")}</span>\n\t\t\t\t\t\t<div className={styles.toggle}></div>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\t<div className={styles.userInfo}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h4>Operations</h4>\n\t\t\t\t\t\t<div className={styles.operations}>\n\t\t\t\t\t\t\t{v.operations.map((o, i) => <div key={i}>{colorizeOperation(o)}</div>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>)}\n\t\t</Layout>\n\t);\n}\n\nfunction colorizeOperation(operation: string)\n{\n\tconst colors = {\n\t\tpage: \"#990099\",\n\t\tadd: \"#008000\",\n\t\tget: \"#008000\",\n\t\tchange: \"#006fb3\",\n\t\tdelete: \"#b30000\",\n\t}\n\tfor (const prefix in colors)\n\t{\n\t\tif (operation.startsWith(prefix))\n\t\t\treturn <>\n\t\t\t\t<span style={{ color: colors[prefix as keyof typeof colors] }}>{prefix}</span>\n\t\t\t\t<span>{operation.slice(prefix.length)}</span>\n\t\t\t</>\n\t}\n\treturn <span>{operation}</span>\n}","import { useQuery } from \"react-query\";\nimport { Modify } from \"./dataTypes\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\nexport function useLog()\n{\n\treturn useQuery(\"log\", async () =>\n\t\t(await fetchJsonGet<LogItemResponse[]>(\"/api/debug/log\")).map(parseLogResponse)\n\t);\n}\n\nexport function parseLogResponse(responseLog: LogItemResponse)\n{\n\tconst log = responseLog as unknown as LogItem;\n\tlog.date = new Date(responseLog.date);\n\treturn log;\n}\n\nexport interface LogItem\n{\n\tid: number,\n\tactionCode: \"added\" | \"updated\" | \"deleted\" | \"restored\",\n\tdate: Date,\n\trecordId: number,\n\tuserId: number,\n\tuserName: string,\n\ttableName: \"User\" | \"Role\" | \"Event\" | \"Ticket\" | \"TicketType\" | \"PermissionAccess\",\n\tchanges: [string, any, any][],\n}\n\ntype LogItemResponse = Modify<LogItem, {\n\tdate: string,\n}>\n","export function padNum(num: number, len: number)\n{\n\treturn `${num}`.padStart(len, \"0\");\n}\n\nexport function countWord(num: number, one: string, two: string, five: string)\n{\n\tconst numS = `${num}`;\n\tif (numS.at(-1) == \"1\" && numS.at(-2) != \"1\")\n\t\treturn one;\n\tif ([\"2\", \"3\", \"4\"].includes(numS.at(-1) || \"\") && numS.at(-2) != \"1\")\n\t\treturn two;\n\treturn five;\n}\n","import { padNum, countWord } from \"./nums\";\n\nexport function dateToString(date: Date | null | undefined, reverse = false)\n{\n\tif (!date) return \"\";\n\tif (reverse)\n\t\treturn `${date.getFullYear()}.${padNum(date.getMonth() + 1, 2)}.${padNum(date.getDate(), 2)}`;\n\treturn `${padNum(date.getDate(), 2)}.${padNum(date.getMonth() + 1, 2)}.${date.getFullYear()}`;\n}\n\nexport function timeToString(date: Date, seconds = false)\n{\n\tlet dateStr = `${padNum(date.getHours(), 2)}:${padNum(date.getMinutes(), 2)}`;\n\tif (seconds) return dateStr + `:${padNum(date.getSeconds(), 2)}`;\n\treturn dateStr;\n}\n\nexport function datetimeToString(date: Date, seconds = false, reverseDate = false)\n{\n\treturn dateToString(date, reverseDate) + \" \" + timeToString(date, seconds);\n}\n\nexport function relativeDate(date: Date, nowBreak: \"second\" | \"minute\" | \"hour\" | \"day\" = \"second\")\n{\n\tconst now = new Date();\n\n\tconst delta = date.getTime() - now.getTime();\n\tlet d = Math.floor(Math.abs(delta) / 1000);\n\n\tconst dY = Math.floor(d / (60 * 60 * 24 * 30 * 12)); d -= dY * 60 * 60 * 24 * 30 * 12;\n\tconst dM = Math.floor(d / (60 * 60 * 24 * 30)); d -= dM * 60 * 60 * 24 * 30;\n\tconst dD = Math.floor(d / (60 * 60 * 24)); d -= dD * 60 * 60 * 24;\n\tconst dh = Math.floor(d / (60 * 60)) % 24; d -= dh * 60 * 60;\n\tconst dm = Math.floor(d / 60) % 60; d -= dm * 60;\n\tconst ds = d % 60;\n\n\tfunction getChange(): [string | number, [string, string, string]]\n\t{\n\t\tconst sv = (v: string) => [v, [\"\", \"\", \"\"]] as [string, [string, string, string]];\n\t\tif (dY != 0) return [dY, [\"год\", \"года\", \"лет\"]];\n\t\tif (dM != 0) return [dM, [\"месяц\", \"месяца\", \"месяцов\"]];\n\t\tif (dD != 0) return [dD, [\"день\", \"дня\", \"дней\"]];\n\t\tif (nowBreak == \"day\") return sv(\"Сегодня\");\n\t\tif (dh != 0) return [dh, [\"час\", \"часа\", \"часов\"]];\n\t\tif (nowBreak == \"hour\") return sv(\"Сейчас\");\n\t\tif (dm != 0) return [dm, [\"минута\", \"минуты\", \"минут\"]];\n\t\tif (nowBreak == \"minute\") return sv(\"Сейчас\");\n\t\tif (ds != 0) return [ds, [\"секунда\", \"секунды\", \"секунд\"]];\n\t\treturn sv(\"Только что\");\n\t}\n\tlet [vChange, vNames] = getChange();\n\n\tif (typeof vChange == \"string\")\n\t\treturn vChange;\n\n\tlet relative = `${countWord(vChange, ...vNames)}`\n\tif (Math.abs(vChange) > 1) relative = Math.abs(vChange) + \" \" + relative;\n\tif (delta > 0) relative = \"Через \" + relative;\n\telse relative += \" назад\";\n\n\treturn relative;\n}\n\nexport function secondsPast(date: Date)\n{\n\tconst now = new Date();\n\treturn (now.getTime() - date.getTime()) / 1000;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"styles_table__QLr-h\",\"changesCell\":\"styles_changesCell__0wQDJ\",\"changes\":\"styles_changes__EyS9f\",\"btn\":\"styles_btn__H7b72\"};","import { LogItem, useLog } from \"../../api/log\";\nimport Layout from \"../../components/Layout\"\nimport { datetimeToString } from \"../../utils/dates\";\nimport displayError from \"../../utils/displayError\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport styles from \"./styles.module.css\"\n\nexport default function LogPage()\n{\n\tuseTitle(\"Log\");\n\tconst log = useLog();\n\n\treturn <Layout centeredPage styles={{ fontFamily: \"'PT Sans', Arial\" }}>\n\t\t{log.isFetching && <h3>Загрузка</h3>}\n\t\t{displayError(log)}\n\t\t{!log.isFetching && <button className={styles.btn} onClick={() => log.refetch()}>Update</button>}\n\t\t<table className={styles.table}>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Date</th>\n\t\t\t\t\t<th style={{ minWidth: \"4em\" }}>Action</th>\n\t\t\t\t\t<th style={{ minWidth: \"9.5em\" }}>Table[id]</th>\n\t\t\t\t\t<th>User[id]</th>\n\t\t\t\t\t<th style={{ width: \"18em\" }}>Changes</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{log.data?.map(item => <tr key={item.id}>\n\t\t\t\t\t<td>{datetimeToString(item.date, true, true)}</td>\n\t\t\t\t\t<td>{colorizeAction(item.actionCode)}</td>\n\t\t\t\t\t<td>{item.tableName}[{item.recordId}]</td>\n\t\t\t\t\t<td>{item.userName} [{item.userId}]</td>\n\t\t\t\t\t<td className={styles.changesCell}>\n\t\t\t\t\t\t<div className={styles.changes}>\n\t\t\t\t\t\t\t<input type=\"checkbox\" className={styles.toggleInp} id={`item${item.id}`} />\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{item.changes.map(v => <div key={v[0]}>{v[0]}: {JSON.stringify(v[1])} {\"->\"} {JSON.stringify(v[2])}</div>)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{item.changes.length > 0 &&\n\t\t\t\t\t\t\t\t<label className={styles.btn} htmlFor={`item${item.id}`}>{item.changes.length}</label>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>)}\n\t\t\t</tbody>\n\t\t</table>\n\t</Layout>\n}\n\nfunction colorizeAction(action: LogItem[\"actionCode\"])\n{\n\tconst colors: { [key in LogItem[\"actionCode\"]]: string } = {\n\t\tadded: \"#008000\",\n\t\tdeleted: \"#b30000\",\n\t\tupdated: \"#006fb3\",\n\t\trestored: \"#990099\",\n\t}\n\treturn <span style={{ color: colors[action] }}>{action}</span>\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"back\":\"styles_back__Qx6+G\",\"auth\":\"styles_auth__p4qSS\",\"login\":\"styles_login__HG64A\"};","import styles from \"./styles.module.css\"\nimport vk from \"./vk.png\"\nimport Layout from \"../../components/Layout\";\nimport { useTitle } from \"../../utils/useTtile\";\nimport { Link } from \"react-router-dom\";\nimport classNames from \"../../utils/classNames\";\n\nexport default function LoginPage()\n{\n\tuseTitle(\"Авторизация\");\n\n\treturn (\n\t\t<Layout header={null} centered centeredPage gap=\"2em\">\n\t\t\t<Link to=\"/\" className={classNames(styles.back, \"material_symbols\")}>arrow_back</Link>\n\t\t\t<Link to=\"/auth\" className={styles.auth} />\n\t\t\t<h1>Underparty</h1>\n\t\t\t<button className={styles.login}>\n\t\t\t\t<span>Войти через</span>\n\t\t\t\t<img src={vk} alt=\"VK\" />\n\t\t\t</button>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__Rm-tG\",\"input\":\"styles_input__2tNlg\",\"password\":\"styles_password__Om-1z\"};","import { useRef, useState } from \"react\";\nimport useUser, { useMutationChangeName } from \"../../api/user\";\nimport Layout from \"../../components/Layout\";\nimport styles from \"./styles.module.css\"\nimport displayError from \"../../utils/displayError\";\nimport Spinner from \"../../components/Spinner\";\n\nexport default function ProfilePage()\n{\n\tconst user = useUser();\n\tconst nameRef = useRef<HTMLInputElement>(null);\n\tconst [userNameEditing, setUserNameEditing] = useState(false);\n\tconst nameMutation = useMutationChangeName();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\">\n\t\t\t<div className={styles.root}>\n\t\t\t\t{displayError(nameMutation)}\n\t\t\t\t{nameMutation.isLoading && <Spinner />}\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Имя</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" ref={nameRef} defaultValue={user.data?.name} disabled={!userNameEditing} className={styles.input} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{!userNameEditing && <button onClick={() => setUserNameEditing(true)} className=\"button button_small\">Изменить</button>}\n\t\t\t\t\t\t{userNameEditing && <button onClick={() =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\tnameRef.current.value = user.data?.name || \"\";\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tОтмена\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t\t{userNameEditing && <button\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsetUserNameEditing(false);\n\t\t\t\t\t\t\t\tif (nameRef.current)\n\t\t\t\t\t\t\t\t\tnameMutation.mutate({ name: nameRef.current.value });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName=\"button button_small\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСохранить\n\t\t\t\t\t\t</button>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Логин</h3>\n\t\t\t\t\t{user.data?.login}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>Роли</h3>\n\t\t\t\t\t{user.data?.roles.map((v, i) => <div key={i}>{v}</div>)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__E5y+5\",\"title\":\"styles_title__3QqY9\",\"map\":\"styles_map__bsZaz\"};","import styles from \"./styles.module.css\"\nimport timetable from \"./timetable.png\";\nimport Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\n\nexport default function TimetablePage()\n{\n\treturn (\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer curPage=\"timetable\" />}>\n\t\t\t<h1 className={styles.title}>Underparty</h1>\n\t\t\t<div className={styles.map}>\n\t\t\t\t<img src={timetable} alt=\"Расписание\" />\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { useMutation, useQuery } from \"react-query\";\nimport { fetchJsonGet, fetchJsonPost } from \"../utils/fetch\";\n\nexport interface Quest\n{\n\tid: number;\n\tname: string;\n\treward: number;\n}\n\n\nexport default function useQuests()\n{\n\treturn useQuery(\"quests\", async () =>\n\t\tawait fetchJsonGet<Quest[]>(\"/api/quests\")\n\t);\n}\n\nexport function useMutationCompleteQuest(onSuccess?: (data: CompleteQuestRes) => void)\n{\n\tconst mutation = useMutation({\n\t\tmutationFn: async (completeQuestData: CompleteQuestData) =>\n\t\t\tawait fetchJsonPost<CompleteQuestRes>(\"/api/quest_complete\", completeQuestData),\n\t\tonSuccess: onSuccess,\n\t});\n\treturn mutation;\n}\n\nexport interface CompleteQuestData\n{\n\tquestId: number,\n\tuserId: number,\n}\n\nexport interface CompleteQuestRes\n{\n\tres: \"ok\" | \"already_done\",\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__CEdGL\",\"body\":\"styles_body__o-6ZK\",\"bottom\":\"styles_bottom__zkZn6\",\"title\":\"styles_title__6wHPv\",\"btnQr\":\"styles_btnQr__94tox\",\"quests\":\"styles_quests__58NxQ\",\"quest\":\"styles_quest__65tbN\"};","import { useEffect, useState } from \"react\";\nimport QRCode from \"qrcode\"\n\nexport default function QrCode({ code, scale = 10, margin = 1, color = \"#000000\", colorBg = \"#ffffff\" }: QrCodeProps)\n{\n\tconst [qrcode, setQrcode] = useState(\"\");\n\tuseEffect(() =>\n\t{\n\t\tif (!code) return;\n\t\tsetQrcode(\"\")\n\t\tQRCode.toDataURL(code, { errorCorrectionLevel: \"H\", scale, margin, color: { dark: color, light: colorBg } }, (e, url) => setQrcode(url));\n\t}, [code, color, scale, margin, colorBg]);\n\n\treturn (\n\t\t<img src={qrcode} alt={code} style={{ width: \"100%\" }} />\n\t);\n}\n\ninterface QrCodeProps\n{\n\tscale?: number\n\tmargin?: number\n\tcode?: string,\n\tcolor?: string,\n\tcolorBg?: string,\n}\n","import { useState } from \"react\";\nimport useQuests from \"../../api/quest\";\nimport Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport styles from \"./styles.module.css\"\nimport useUser from \"../../api/user\";\nimport Popup from \"../../components/Popup\";\nimport QrCode from \"../../components/QrCode\";\n\nexport default function QuestPage()\n{\n\tconst user = useUser();\n\tconst [popupIsOpen, setPopupIsOpen] = useState(false);\n\tconst quests = useQuests();\n\n\treturn (\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer curPage=\"quest\" />}>\n\t\t\t{quests.isLoading && <Spinner />}\n\t\t\t<div className={styles.body}>\n\t\t\t\t<h1 className={styles.title}>Underparty</h1>\n\t\t\t\t<div className={styles.quests}>\n\t\t\t\t\t{displayError(quests)}\n\t\t\t\t\t{quests?.data?.map(quest =>\n\t\t\t\t\t\t<div className={styles.quest} key={quest.id}>\n\t\t\t\t\t\t\t<span>{quest.name}</span>\n\t\t\t\t\t\t\t{false ?\n\t\t\t\t\t\t\t\t<span className=\"material_symbols\">done</span>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<span>{quest.reward}G</span>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<button\n\t\t\t\t\tclassName={styles.btnQr}\n\t\t\t\t\tonClick={() => setPopupIsOpen(true)}\n\t\t\t\t>\n\t\t\t\t\tЗавершить квест!\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<Popup title=\"Завершение квеста\" open={popupIsOpen} close={() => setPopupIsOpen(false)}>\n\t\t\t\t{user?.data?.auth ?\n\t\t\t\t\t<>\n\t\t\t\t\t\t<QrCode code={`user_${user.data.id}`} colorBg=\"#ffffff00\" scale={13} />\n\t\t\t\t\t\t<h3>Покажите qr-код квестовику</h3>\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<p>Для прохождения квестов необходимо войти в систему.</p>\n\t\t\t\t\t\t<p>Кнопка входа находиться в правом верхнем углу.</p>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__0CejE\",\"title\":\"styles_title__u3Xt9\",\"items\":\"styles_items__n-Fvc\",\"item\":\"styles_item__zIxt2\",\"item__img\":\"styles_item__img__r3iEr\",\"item__desc\":\"styles_item__desc__wbcAM\"};","import { useState } from \"react\";\nimport useStoreItems from \"../../api/storeItem\";\nimport useUser from \"../../api/user\";\nimport Footer from \"../../components/Footer\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport styles from \"./styles.module.css\"\nimport QrCode from \"../../components/QrCode\";\nimport Popup from \"../../components/Popup\";\nimport { StoreItem } from \"../../api/storeItem\";\n\nexport default function StorePage()\n{\n\tconst user = useUser();\n\tconst [popupIsOpen, setPopupIsOpen] = useState(false);\n\tconst [selectedItem, setSelectedItem] = useState<StoreItem | null>(null);\n\tconst items = useStoreItems()\n\n\treturn (\n\t\t<Layout centeredPage gap=\"1em\" className={styles.root} footer={<Footer curPage=\"store\" />}>\n\t\t\t{items.isLoading && <Spinner />}\n\t\t\t<h1 className={styles.title}>Underparty</h1>\n\t\t\t<div className={styles.items}>\n\t\t\t\t{displayError(items)}\n\t\t\t\t{items?.data?.map(item =>\n\t\t\t\t\t<button className={styles.item} key={item.id} onClick={() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tsetSelectedItem(item);\n\t\t\t\t\t\tsetPopupIsOpen(true);\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<div className={styles.item__img}>\n\t\t\t\t\t\t\t<img src=\"https://ipsumimg.dakovdev.com/512x512\" alt=\"Товар\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={styles.item__desc}>\n\t\t\t\t\t\t\t<span>{item.name}</span>\n\t\t\t\t\t\t\t<span>{item.price} G</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<Popup title=\"Покупка товара\" open={popupIsOpen} close={() => setPopupIsOpen(false)}>\n\t\t\t\t{user?.data?.auth ?\n\t\t\t\t\t<>\n\t\t\t\t\t\t{user.data.balance < (selectedItem?.price || 0) ?\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<h2 style={{ marginBottom: 8 }}>К сожалению, этот товар вам не по карману</h2>\n\t\t\t\t\t\t\t\t<h2 className={styles.item__desc}>\n\t\t\t\t\t\t\t\t\t<span>{selectedItem?.name}</span>\n\t\t\t\t\t\t\t\t\t<span>{selectedItem?.price} G</span>\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<h2 className={styles.item__desc} style={{ marginBottom: 8 }}>\n\t\t\t\t\t\t\t\t\t<span>Вам не хватает:</span>\n\t\t\t\t\t\t\t\t\t<span>{(selectedItem?.price || 0) - user.data.balance} G</span>\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<h3>Выполняйте квесты и разбогатеете!</h3>\n\t\t\t\t\t\t\t</> : <>\n\t\t\t\t\t\t\t\t<QrCode code={`item_${selectedItem?.id}`} colorBg=\"#ffffff00\" scale={13} />\n\t\t\t\t\t\t\t\t<h2 className={styles.item__desc}>\n\t\t\t\t\t\t\t\t\t<span>{selectedItem?.name}</span>\n\t\t\t\t\t\t\t\t\t<span>{selectedItem?.price} G</span>\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<h3>Покажите qr-код продавцу</h3>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t</> : <>\n\t\t\t\t\t\t<p>Для совершения покупок необходимо войти в систему.</p>\n\t\t\t\t\t\t<p>Кнопка входа находиться в правом верхнем углу.</p>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t</Popup>\n\t\t</Layout>\n\t);\n}\n","import { useQuery } from \"react-query\";\nimport { fetchJsonGet } from \"../utils/fetch\";\n\nexport interface StoreItem\n{\n\tid: number;\n\tname: string;\n\tprice: number;\n}\n\n\nexport default function useStoreItems()\n{\n\treturn useQuery(\"storeItems\", async () =>\n\t\tawait fetchJsonGet<StoreItem[]>(\"/api/store_items\")\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"error\":\"styles_error__EtK3I\",\"video\":\"styles_video__b88Zl\"};","import styles from \"./styles.module.css\"\nimport beep from \"./beep.mp3\";\nimport { useEffect, useState } from \"react\";\nimport useSound from \"../useSound\";\nimport QrScanner from \"qr-scanner\";\n\nlet onScan = (r: string) => { };\nlet onError = () => { };\nlet error = false;\nlet scannerEl: HTMLDivElement | null = null;\nlet scanner: QrScanner | null = null;\n// disable option\nexport default function useScanner(afterScanTimeout = 500)\n{\n\tif (!scanner)\n\t{\n\t\tscannerEl = document.createElement(\"div\");\n\t\tdocument.body.appendChild(scannerEl);\n\t\tscannerEl.style.display = \"flex\";\n\t\tscannerEl.style.backgroundColor = \"black\";\n\n\t\tconst video = document.createElement(\"video\");\n\t\tscannerEl.appendChild(video);\n\t\tscanner = new QrScanner(\n\t\t\tvideo,\n\t\t\tresult => onScan(result.data),\n\t\t\t{\n\t\t\t\thighlightScanRegion: true,\n\t\t\t\tmaxScansPerSecond: 10,\n\t\t\t},\n\t\t);\n\t}\n\n\tuseEffect(() =>\n\t{\n\t\tsetTimeout(() =>\n\t\t\tscanner?.start().catch(() =>\n\t\t\t{\n\t\t\t\tsetTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tscanner?.start().catch(() => onError());\n\t\t\t\t}, 250)\n\t\t\t}).then(() => console.log(\"started\"))\n\t\t\t, 100)\n\t\treturn () =>\n\t\t{\n\t\t\tscanner?.stop();\n\t\t}\n\t}, []);\n\n\tconst [isTimeout, setIsTimeout] = useState(false);\n\tconst [scanned, setScanned] = useState(\"\");\n\tconst [isError, setIsError] = useState(error);\n\tconst playBeep = useSound(beep);\n\n\tonScan = (r: string) =>\n\t{\n\t\tif (isTimeout) return;\n\t\tsetScanned(r);\n\t\tsetIsTimeout(true);\n\t\tplayBeep();\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\tsetScanned(\"\");\n\t\t\tsetIsTimeout(false);\n\t\t}, afterScanTimeout);\n\t}\n\tonError = () =>\n\t{\n\t\terror = true;\n\t\tsetIsError(true);\n\t}\n\n\tif (isError)\n\t\treturn {\n\t\t\tscanned,\n\t\t\tscanner: <div className={styles.error}>\n\t\t\t\t<h1>Нет доступа к камере</h1>\n\t\t\t\t<p>Разрешите использование камеры этому сайту и браузеру, который вы используте.</p>\n\t\t\t\t<p>После перезагрузите страницу.</p>\n\t\t\t</div>\n\t\t};\n\n\treturn {\n\t\tscanned,\n\t\tscanner: <div>\n\t\t\t<div\n\t\t\t\tref={ref =>\n\t\t\t\t{\n\t\t\t\t\tif (!ref) return;\n\t\t\t\t\tref.innerHTML = \"\";\n\t\t\t\t\tref.appendChild(scannerEl!);\n\t\t\t\t}}\n\t\t\t\tclassName={styles.video}\n\t\t\t></div>\n\t\t</div>\n\t};\n}\n","import { useState } from \"react\";\n\nexport default function useSound(url: string)\n{\n\tconst [audio] = useState(() =>\n\t{\n\t\tconst audio = new Audio(url)\n\t\taudio.preload = \"auto\";\n\t\treturn audio;\n\t});\n\n\tconst play = () =>\n\t{\n\t\taudio.currentTime = 0;\n\t\taudio.play();\n\t};\n\n\treturn play;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__91Sa8\",\"title\":\"styles_title__Duk4+\",\"bottom\":\"styles_bottom__+GWCU\"};","import { useEffect, useState } from \"react\";\nimport Layout from \"../../components/Layout\"\nimport useScanner from \"../../utils/useScanner\";\nimport styles from \"./styles.module.css\"\nimport { useParams } from \"react-router-dom\";\nimport useQuests, { useMutationCompleteQuest } from \"../../api/quest\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\n\nexport default function ScannerQuestPage()\n{\n\tconst urlParams = useParams();\n\tconst [msg, setMsg] = useState(\"\");\n\tconst questId = parseInt(urlParams[\"questId\"]!, 10);\n\tconst { scanned, scanner } = useScanner();\n\tconst quests = useQuests();\n\tconst completeQuest = useMutationCompleteQuest(r =>\n\t{\n\t\tsetMsg(r.res);\n\t\tsetTimeout(() => completeQuest.reset(), 1000);\n\t});\n\t// reset after error\n\n\tuseEffect(() =>\n\t{\n\t\tif (scanned == \"\" || !completeQuest.isIdle) return;\n\t\tconst userId = parseInt(scanned.slice(\"user_\".length), 10);\n\t\tif (isNaN(userId))\n\t\t{\n\t\t\tsetMsg(\"Игрок не опознан\");\n\t\t\treturn;\n\t\t}\n\t\tcompleteQuest.mutate({ userId, questId });\n\t}, [scanned])\n\n\treturn (\n\t\t<Layout className={styles.root}>\n\t\t\t{quests.isLoading && <Spinner />}\n\t\t\t{completeQuest.isLoading && <Spinner />}\n\t\t\t<div className={styles.title}>\n\t\t\t\t<h2>{quests.data?.find(quest => quest.id == questId)?.name}</h2>\n\t\t\t\t<h3>Просканируйте qr-код посетителя, чтобы засчитать ему этот квест.</h3>\n\t\t\t\t{displayError(quests)}\n\t\t\t</div>\n\t\t\t{scanner}\n\t\t\t<div className={styles.bottom}>\n\t\t\t\t<h2>{msg}</h2>\n\t\t\t\t{displayError(completeQuest)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"styles_btn__w12Ul\"};","import { Link } from \"react-router-dom\";\nimport Layout from \"../../components/Layout\"\nimport styles from \"./styles.module.css\"\nimport { useHasPermission } from \"../../api/operations\";\n\nexport default function WorkerPage()\n{\n\treturn (\n\t\t<Layout centered gap=\"0.5rem\">\n\t\t\t{useHasPermission(\"page_scanner_quest\") && <Link to={\"/scanner_quest\"} className={styles.btn}>Для квестовиков</Link>}\n\t\t\t{useHasPermission(\"page_scanner_store\") && <Link to={\"/scanner_store\"} className={styles.btn}>Для продавцов</Link>}\n\t\t</Layout>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"styles_root__d985G\",\"quests\":\"styles_quests__TBzNh\"};","import { Link } from \"react-router-dom\";\nimport useQuests from \"../../api/quest\";\nimport Layout from \"../../components/Layout\";\nimport Spinner from \"../../components/Spinner\";\nimport displayError from \"../../utils/displayError\";\nimport styles from \"./styles.module.css\"\n\nexport default function ScannerSelectQuestPage()\n{\n\tconst quests = useQuests();\n\n\treturn (\n\t\t<Layout centered gap=\"1rem\" className={styles.root}>\n\t\t\t{quests.isLoading && <Spinner />}\n\t\t\t{displayError(quests)}\n\t\t\t<h2>Какой квест вы проводите?</h2>\n\t\t\t<div className={styles.quests}>\n\t\t\t\t{quests.data?.map(quest =>\n\t\t\t\t\t<Link to={\"/scanner_quest/\" + quest.id} key={quest.id}>\n\t\t\t\t\t\t{quest.name}\n\t\t\t\t\t</Link>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n","import { Navigate, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./api/user\";\nimport hasPermission, { Operation } from \"./api/operations\";\nimport Preloader from \"./components/Preloader\";\nimport ScrollToTop from \"./utils/scrollToTop\";\nimport displayError from \"./utils/displayError\";\nimport MessageFromBackend from \"./components/MessageFromBackend\";\n\nimport NotFoundPage from \"./pages/NotFoundPage\";\nimport NoPermissionPage from \"./pages/NoPermissionPage\";\nimport AuthPage from \"./pages/AuthPage\";\nimport IndexPage from \"./pages/IndexPage\";\nimport DebugPage from \"./pages/DebugPage\";\nimport UsersPage from \"./pages/UsersPage\";\nimport LogPage from \"./pages/LogPage\";\nimport LoginPage from \"./pages/LoginPage\";\nimport ProfilePage from \"./pages/ProfilePage\";\nimport TimetablePage from \"./pages/TimetablePage\";\nimport QuestPage from \"./pages/QuestPage\";\nimport StorePage from \"./pages/StorePage\";\nimport ScannerQuestPage from \"./pages/ScannerQuestPage\";\nimport WorkerPage from \"./pages/WorkerPage\";\nimport ScannerSelectQuestPage from \"./pages/ScannerSelectQuestPage\";\n\nexport default function App()\n{\n\tconst user = useUser();\n\n\tfunction ProtectedRoute(permission: Operation | null, path: string, element: JSX.Element)\n\t{\n\t\treturn <Route path={path} element={\n\t\t\t!user.data?.auth ? <Navigate to=\"/auth\" /> : (\n\t\t\t\tpermission == null || hasPermission(user, permission) ? element : <NoPermissionPage />\n\t\t\t)\n\t\t} />\n\t}\n\n\treturn <div className=\"root\">\n\t\t<ScrollToTop />\n\t\t<MessageFromBackend />\n\n\t\t{user.isLoading && <Preloader />}\n\t\t{displayError(user)}\n\t\t{user.isSuccess &&\n\t\t\t<Routes>\n\t\t\t\t<Route path=\"/\" element={<IndexPage />} />\n\t\t\t\t<Route path=\"/login\" element={!user.data?.auth ? <LoginPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/auth\" element={!user.data?.auth ? <AuthPage /> : <Navigate to=\"/\" />} />\n\t\t\t\t<Route path=\"/timetable\" element={<TimetablePage />} />\n\t\t\t\t<Route path=\"/quest\" element={<QuestPage />} />\n\t\t\t\t<Route path=\"/store\" element={<StorePage />} />\n\t\t\t\t{/* <Route path=\"/race\" element={<RacePage />} /> */}\n\t\t\t\t{ProtectedRoute(null, \"/profile\", <ProfilePage />)}\n\t\t\t\t{ProtectedRoute(\"page_worker\", \"/worker\", <WorkerPage />)}\n\t\t\t\t{ProtectedRoute(\"page_scanner_quest\", \"/scanner_quest\", <ScannerSelectQuestPage />)}\n\t\t\t\t{ProtectedRoute(\"page_scanner_quest\", \"/scanner_quest/:questId\", <ScannerQuestPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/debug\", <DebugPage />)}\n\t\t\t\t{ProtectedRoute(\"page_debug\", \"/log\", <LogPage />)}\n\t\t\t\t{ProtectedRoute(\"page_users\", \"/users\", <UsersPage />)}\n\t\t\t\t<Route path=\"*\" element={<NotFoundPage />} />\n\t\t\t</Routes>\n\t\t}\n\t</div>\n}\n"],"names":["ApiError","Error","async","fetchWithJson","method","input","body","res","fetch","headers","undefined","JSON","stringify","ok","json","msg","fetchPost","fetchJson","fetchJsonGet","fetchJsonPost","useUser","useQuery","getUser","data","status","auth","id","balance","login","roles","name","operations","user","hasPermission","operation","_user$data","_user$data2","includes","useHasPermission","ScrollToTop","pathname","useLocation","useEffect","window","scrollTo","displayError","requestRes","render","messageFormater","isError","error","message","defaultRender","_jsx","style","color","textAlign","children","classNames","_len","arguments","length","names","Array","_key","filter","v","join","MessageFromBackend","setMessage","useState","timer","setInterval","msgCur","matches","document","cookie","match","RegExp","replace","decodeURIComponent","getCookie","clearInterval","_jsxs","className","styles","root","visible","close","onClick","trimQuotes","str","at","slice","HeaderBack","navigate","useNavigate","postAuth","authData","postLogout","Spinner","_ref","zIndex","spinner","Header","_user$data3","_user$data4","menuOpen","setMenuOpen","mutation","onSuccess","queryClient","useQueryClient","useMutation","mutationFn","invalidateQueries","useMutationLogout","Link","to","home","block","menu","menuVisible","mutate","disabled","Layout","el_styles","centered","centeredPage","height100","gap","header","footer","hasFooter","maxHeight","body_centered","body_centeredPage","NotFoundPage","NoPermissionPage","useTitle","title","prefis","prevTitle","t","Form","onSubmit","form","e","preventDefault","FormField","_ref2","label","field","AuthPage","setError","inp_login","useRef","inp_password","onError","setQueryData","useMutationAuth","back","isLoading","_inp_login$current","_inp_password$current","current","value","password","ref","type","required","Footer","curPage","IndexPage","map","src","alt","Popup","open","closeOnOutclick","isOpen","setIsOpen","hidden","setHidden","timeout","setTimeout","clearTimeout","target","popup","DebugPage","logErrors","setLogErrors","log","setLog","refLogErrors","refLog","fontFamily","text","_refLogErrors$current","_refLogErrors$current2","_refLogErrors$current3","_refLogErrors$current4","parentElement","scrollHeight","x","_refLog$current","_refLog$current$paren","_refLog$current2","_refLog$current2$pare","UsersPage","_users$data","users","toggleInp","concat","htmlFor","deleted","_Fragment","toggle","userInfo","o","i","colorizeOperation","colors","page","add","get","change","delete","prefix","startsWith","parseLogResponse","responseLog","date","Date","padNum","num","len","padStart","datetimeToString","seconds","getFullYear","getMonth","getDate","dateToString","dateStr","getHours","getMinutes","getSeconds","timeToString","LogPage","_log$data","isFetching","btn","refetch","table","minWidth","width","item","colorizeAction","actionCode","tableName","recordId","userName","userId","changesCell","changes","action","added","updated","restored","LoginPage","vk","ProfilePage","nameRef","userNameEditing","setUserNameEditing","nameMutation","_queryClient$getQuery","getQueryState","useMutationChangeName","defaultValue","TimetablePage","timetable","useQuests","QrCode","code","scale","margin","colorBg","qrcode","setQrcode","QRCode","errorCorrectionLevel","dark","light","url","QuestPage","_quests$data","popupIsOpen","setPopupIsOpen","quests","quest","reward","bottom","btnQr","StorePage","_items$data","selectedItem","setSelectedItem","items","item__img","item__desc","price","marginBottom","onScan","r","scannerEl","scanner","useScanner","afterScanTimeout","createElement","appendChild","display","backgroundColor","video","QrScanner","result","highlightScanRegion","maxScansPerSecond","_scanner","start","catch","_scanner2","then","console","_scanner3","stop","isTimeout","setIsTimeout","scanned","setScanned","setIsError","playBeep","audio","Audio","preload","play","currentTime","useSound","beep","innerHTML","ScannerQuestPage","_quests$data$find","urlParams","useParams","setMsg","questId","parseInt","completeQuest","reset","completeQuestData","isIdle","isNaN","find","WorkerPage","ScannerSelectQuestPage","App","ProtectedRoute","permission","path","element","Route","Navigate","Preloader","isSuccess","Routes"],"sourceRoot":""}