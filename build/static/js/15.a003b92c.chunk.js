"use strict";(self.webpackChunkevent_platform=self.webpackChunkevent_platform||[]).push([[15],{4592:(e,s,t)=>{t.r(s),t.d(s,{default:()=>Ns});var n=t(7689),r=t(1933);class i extends Error{}async function l(e,s,t){const n=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:void 0===t?null:JSON.stringify(t)});if(!n.ok)throw new i((await n.json()).msg);return n}function a(e,s){return l("DELETE",e,s)}async function o(e,s,t){const n=await l(e,s,t);return await n.json()}function c(e,s){return o("GET",e,s)}function d(e,s){return o("POST",e,s)}function u(){const e=(0,r.useQueryClient)();return()=>e.invalidateQueries("user")}function m(){return(0,r.useQuery)("user",_)}async function _(){const e=await fetch("/api/user"),s=await e.json();if(401==e.status)return{auth:!1,id:"",balance:0,roles:[],name:"",last_name:"",photo:"",complited_quests:[],operations:[]};if(!e.ok)throw new i(s.msg);const t=s;return t.auth=!0,t}function h(e,s){var t,n;return!(null===(t=e.data)||void 0===t||!t.auth||null===(n=e.data)||void 0===n||!n.operations.includes(s))}function v(e){return h(m(),e)}var x=t(5086),j=t(2791);function g(){const{pathname:e}=(0,n.TH)();return(0,j.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null}var y=t(184);function p(e,s){const t=e instanceof i?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430";return s?s(t):t}function f(e,s,t){if(!e.isError)return null;return(s||b)(p(e.error,t))}function b(e){return(0,y.jsx)("h3",{style:{color:"tomato",textAlign:"center"},children:e})}function N(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e=>!!e)).join(" ")}const k={root:"styles_root__hzHjz",visible:"styles_visible__6aD-n",close:"styles_close__3L8iW",message:"styles_message__oF8zk"};let S="";function w(){const[e,s]=(0,j.useState)("");return(0,j.useEffect)((()=>{const e=setInterval((()=>{const e=function(e){let s=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return s?decodeURIComponent(s[1]):void 0}("MESSAGE_TO_FRONTEND");e!=S&&(S=e||"",s(S))}),1e3);return()=>{clearInterval(e)}}),[s]),(0,y.jsxs)("div",{className:N(k.root,""!=e&&k.visible),children:[(0,y.jsx)("button",{className:k.close,onClick:()=>s("")}),(0,y.jsx)("div",{className:k.message,children:A(e)})]})}function A(e){return'"'==e.at(0)&&(e=e.slice(1)),'"'==e.at(-1)&&(e=e.slice(0,-1)),e}const C={root:"styles_root__4DGhY"};function F(){const e=(0,n.s0)();return(0,y.jsx)("div",{className:C.root,children:(0,y.jsx)("button",{onClick:()=>e(-1),className:"button button_light",children:"\u041d\u0430\u0437\u0430\u0434"})})}var E=t(1087);const q={root:"styles_root__Zvl9c",home:"styles_home__o+-s7",block:"styles_block__a1SM7",balance:"styles_balance__PLLCC",user:"styles_user__0ltHf",img:"styles_img__vhWmb",menu:"styles_menu__WWgPh",menuVisible:"styles_menuVisible__mMGZn"};async function I(e){const s=await d("/api/auth",e);return s.auth=!0,s}async function U(){var e,s;await(e="/api/logout",l("POST",e,s))}const T={root:"styles_root__BdzzK",spinner:"styles_spinner__rlI86","lds-ring":"styles_lds-ring__jnLuB"};function Q(e){let{color:s,zIndex:t,block:n,r:r=0}=e;return(0,y.jsx)("div",{className:T.root,style:{position:n?"absolute":"fixed",borderRadius:r},children:(0,y.jsxs)("div",{className:T.spinner,style:{"--color":s,zIndex:t},children:[(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{}),(0,y.jsx)("div",{})]})})}function M(e){var s,t,i,l;let{color:a="#042e40"}=e;const[o,c]=(0,j.useState)(!1),d=(0,n.s0)(),u=function(e){const s=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:U,onSuccess:()=>{s.setQueryData("user",(e=>({auth:!1,id:"",balance:0,roles:[],name:"",last_name:"",photo:"",complited_quests:[],operations:[]}))),null===e||void 0===e||e()}})}((()=>{c(!1)})),_=m();return(0,y.jsxs)("div",{className:q.root,style:{background:a},children:[(0,y.jsx)(E.rU,{to:"/",className:q.home}),(0,y.jsxs)("span",{className:q.block,children:[(0,y.jsxs)("div",{className:q.balance,children:[(null===(s=_.data)||void 0===s?void 0:s.balance)||0," G"]}),(0,y.jsx)("button",{className:q.user,onClick:()=>{var e;return null!==(e=_.data)&&void 0!==e&&e.auth?c((e=>!e)):d("/")},children:(0,y.jsx)("span",{children:null!==(t=_.data)&&void 0!==t&&t.auth?null===(i=_.data)||void 0===i?void 0:i.name:"\u0412\u043e\u0439\u0442\u0438"})}),(null===(l=_.data)||void 0===l?void 0:l.photo)&&(0,y.jsx)("img",{className:q.img,src:_.data.photo,alt:"avatar"}),(0,y.jsxs)("div",{className:N(q.menu,o&&q.menuVisible),style:{background:a},children:[h(_,"page_debug")&&(0,y.jsx)(E.rU,{to:"/debug",children:"</>"}),h(_,"page_worker")&&(0,y.jsx)(E.rU,{to:"/worker",children:"[-^-]"}),(0,y.jsx)("button",{onClick:()=>u.mutate(),disabled:"idle"!=u.status,children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),"loading"==u.status&&(0,y.jsx)(Q,{})]})}const P={root:"styles_root__xvR2N",hasFooter:"styles_hasFooter__lMS3o",body:"styles_body__S-p4X",body_centered:"styles_body_centered__NzRPU",body_centeredPage:"styles_body_centeredPage__R-EzO"};function L(e){let{children:s,className:t,headerColor:n,styles:r,centered:i=!1,centeredPage:l=!1,height100:a=!1,gap:o=0,header:c,footer:d}=e;return void 0===c&&(c=(0,y.jsx)(M,{color:n})),(0,y.jsxs)("div",{className:N(P.root,!!d&&P.hasFooter),style:{...r,maxHeight:a?"100dvh":""},children:[c||(0,y.jsx)("div",{}),(0,y.jsx)("div",{className:N(P.body,t,i&&P.body_centered,l&&P.body_centeredPage),style:{gap:o,maxHeight:a?"100%":""},children:s}),d]})}function R(){return(0,y.jsx)(L,{centered:!0,header:(0,y.jsx)(F,{}),children:"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442"})}function D(){return(0,y.jsx)(L,{centered:!0,header:(0,y.jsx)(F,{}),children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})}const O={back:"styles_back__uuJZO",form:"styles_form__n7Rcu"};function z(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435";(0,j.useEffect)((()=>{const t=document.title,n="object"!=typeof e?[e]:e;return document.title=[s,...n].filter((e=>!!e)).join(" | "),()=>{document.title=t}}),[e,s])}const G={form:"styles_form__cFFCH",field:"styles_field__5rpBk"};function W(e){let{className:s,style:t,onSubmit:n,children:r}=e;return(0,y.jsx)("form",{className:N(G.form,s),style:t,onSubmit:e=>{e.preventDefault(),n()},children:r})}function B(e){let{label:s,className:t,style:n,children:r}=e;return(0,y.jsxs)("label",{className:N(G.field,t),style:n,children:[(0,y.jsx)("span",{children:s}),r]})}function H(){z("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f");const[e,s]=(0,j.useState)(""),t=(0,j.useRef)(null),n=(0,j.useRef)(null),l=function(e){const s=(0,r.useQueryClient)(),t=(0,r.useMutation)({mutationFn:I,onSuccess:e=>{s.setQueryData("user",(()=>e))},onError:s=>{null===e||void 0===e||e(s instanceof i?s.message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}});return t}(s);return(0,y.jsxs)(L,{header:null,centered:!0,centeredPage:!0,gap:"2em",children:[(0,y.jsx)(E.rU,{to:"/",className:N(O.back,"material_symbols"),children:"arrow_back"}),(0,y.jsx)("h1",{children:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435"}),e&&(0,y.jsx)("h3",{children:e}),l.isLoading&&(0,y.jsx)(Q,{}),(0,y.jsxs)(W,{className:O.form,onSubmit:function(){var e,s;const r=(null===(e=t.current)||void 0===e?void 0:e.value)||"",i=(null===(s=n.current)||void 0===s?void 0:s.value)||"";l.mutate({login:r,password:i})},children:[(0,y.jsx)(B,{label:"\u041b\u043e\u0433\u0438\u043d",children:(0,y.jsx)("input",{ref:t,type:"text",name:"login",required:!0})}),(0,y.jsx)(B,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",children:(0,y.jsx)("input",{ref:n,type:"password",name:"password",required:!0})}),(0,y.jsx)("button",{type:"submit",className:"button button_light button_small",disabled:"loading"==l.status,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}const Z={root:"styles_root__7P05R"},J={root:"styles_root__O0923",hidden:"styles_hidden__eYJaf",open:"styles_open__35Vcu",popup:"styles_popup__L-0H0",header:"styles_header__o87wG",close:"styles_close__w0Yhz",body:"styles_body__t75Nd"};function V(e){let{children:s,open:t=!1,close:n,title:r="",closeOnOutclick:i=!0}=e;const l=(0,j.useRef)(null),[a,o]=(0,j.useState)(t),[c,d]=(0,j.useState)(!t);return(0,j.useEffect)((()=>{if(t){d(!1);const e=setTimeout((()=>o(!0)),100);return()=>clearTimeout(e)}o(!1);const e=setTimeout((()=>d(!0)),250);return()=>clearTimeout(e)}),[t]),(0,y.jsx)("div",{ref:l,className:N(J.root,a&&J.open,c&&J.hidden),onClick:e=>{i&&e.target==l.current&&(null===n||void 0===n||n())},children:(0,y.jsxs)("div",{className:J.popup,children:[(r||n)&&(0,y.jsxs)("div",{className:J.header,children:[(0,y.jsx)("h3",{children:r}),n&&(0,y.jsx)("button",{className:J.close,onClick:n})]}),(0,y.jsx)("div",{className:J.body,children:s})]})})}function Y(){const[e,s]=(0,j.useState)(""),[t,n]=(0,j.useState)(""),r=(0,j.useRef)(null),i=(0,j.useRef)(null);return(0,y.jsxs)(L,{centered:!0,gap:"1rem",className:Z.root,children:[(0,y.jsx)(E.rU,{to:"/users",children:"Users"}),(0,y.jsx)(E.rU,{to:"/log",children:"Log"}),(0,y.jsx)("button",{onClick:async()=>{s("Loading");try{const e=await fetch("/api/debug/log_errors"),t=await e.text();s(t),setTimeout((()=>{var e,s,t,n;return null===(e=r.current)||void 0===e||null===(s=e.parentElement)||void 0===s?void 0:s.scrollTo(0,null===(t=r.current)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.scrollHeight)}),150)}catch(e){s(JSON.stringify(e))}},children:"Log errors"}),(0,y.jsx)("button",{onClick:async()=>{n("Loading");try{const e=await fetch("/api/debug/log_info"),s=await e.text();n(s),setTimeout((()=>{var e,s,t,n;return null===(e=i.current)||void 0===e||null===(s=e.parentElement)||void 0===s?void 0:s.scrollTo(0,null===(t=i.current)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.scrollHeight)}),150)}catch(e){n(JSON.stringify(e))}},children:"Log requests"}),(0,y.jsx)(V,{title:"logErrors",open:""!=e,close:()=>s(""),children:(0,y.jsx)("pre",{ref:r,children:e})}),(0,y.jsx)(V,{title:"log",open:""!=t,close:()=>n(""),children:(0,y.jsx)("pre",{ref:i,children:t})})]})}const K={root:"styles_root__h8xNs",auth:"styles_auth__quDS1",img:"styles_img__jUWp9",title:"styles_title__+su+v",btn:"styles_btn__xIQ7b"},X=t.p+"static/media/city.10ddee993980b103bc6c.png";function $(){return(0,y.jsxs)("div",{className:K.root,children:[(0,y.jsx)(E.rU,{to:"/auth",className:K.auth}),(0,y.jsxs)("div",{className:K.title,children:[(0,y.jsx)("img",{className:K.img,src:X,alt:"\u0413\u043e\u0440\u043e\u0434"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("h1",{children:"Underparty"}),(0,y.jsx)("h2",{children:"18.02.24"})]})]}),(0,y.jsx)("a",{className:K.btn,href:"https://oauth.vk.com/authorize?client_id=51848582&redirect_uri=https://platformevent.pythonanywhere.com/auth_vk&display=page&response_type=code",children:"\u0412\u0445\u043e\u0434"})]})}function ee(e){const s=e;return s.date=new Date(e.date),s}function se(e,s){return"".concat(e).padStart(s,"0")}function te(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"".concat(e.getFullYear(),".").concat(se(e.getMonth()+1,2),".").concat(se(e.getDate(),2)):"".concat(se(e.getDate(),2),".").concat(se(e.getMonth()+1,2),".").concat(e.getFullYear()):""}(e,arguments.length>2&&void 0!==arguments[2]&&arguments[2])+" "+function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="".concat(se(e.getHours(),2),":").concat(se(e.getMinutes(),2));return s?t+":".concat(se(e.getSeconds(),2)):t}(e,s)}const ne={table:"styles_table__QLr-h",changesCell:"styles_changesCell__0wQDJ",changes:"styles_changes__EyS9f",btn:"styles_btn__H7b72"};function re(){var e;z("Log");const s=(0,r.useQuery)("log",(async()=>(await c("/api/debug/log")).map(ee)));return(0,y.jsxs)(L,{centeredPage:!0,styles:{fontFamily:"'PT Sans', Arial"},children:[s.isFetching&&(0,y.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),f(s),!s.isFetching&&(0,y.jsx)("button",{className:ne.btn,onClick:()=>s.refetch(),children:"Update"}),(0,y.jsxs)("table",{className:ne.table,children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{style:{minWidth:"9.5em"},children:"Date"}),(0,y.jsx)("th",{style:{minWidth:"4em"},children:"Action"}),(0,y.jsx)("th",{style:{minWidth:"9.5em"},children:"Table[id]"}),(0,y.jsx)("th",{children:"User[id]"}),(0,y.jsx)("th",{style:{width:"18em"},children:"Changes"})]})}),(0,y.jsx)("tbody",{children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:te(e.date,!0,!0)}),(0,y.jsx)("td",{children:ie(e.actionCode)}),(0,y.jsxs)("td",{children:[e.tableName,"[",e.recordId,"]"]}),(0,y.jsxs)("td",{children:[e.userName," [",e.userId,"]"]}),(0,y.jsx)("td",{className:ne.changesCell,children:(0,y.jsxs)("div",{className:ne.changes,children:[(0,y.jsx)("input",{type:"checkbox",className:ne.toggleInp,id:"item".concat(e.id)}),(0,y.jsx)("div",{children:e.changes.map((e=>(0,y.jsxs)("div",{children:[e[0],": ",JSON.stringify(e[1])," ","->"," ",JSON.stringify(e[2])]},e[0])))}),e.changes.length>0&&(0,y.jsx)("label",{className:ne.btn,htmlFor:"item".concat(e.id),children:e.changes.length})]})})]},e.id)))})]})]})}function ie(e){return(0,y.jsx)("span",{style:{color:{added:"#008000",deleted:"#b30000",updated:"#006fb3",restored:"#990099"}[e]},children:e})}function le(){return(0,r.useQuery)("quests",(async()=>await c("/api/quests")))}function ae(e,s){return(0,r.useMutation)({mutationFn:async e=>await d("/api/quest_complete",e),onSuccess:e,onError:s})}function oe(e,s,t){const n=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async()=>await a("/api/quest/".concat(e)),onSuccess:()=>{var t;"success"==(null===(t=n.getQueryState("quests"))||void 0===t?void 0:t.status)&&n.setQueryData("quests",(s=>(null===s||void 0===s?void 0:s.filter((s=>s.id!=e)))||[])),null===s||void 0===s||s()},onError:t})}function ce(e,s){let[t,n]=(0,j.useState)(e);return s&&(n=e=>{n(e),s()}),{v:t,set:n,setT:()=>n(!0),setF:()=>n(!1)}}const de={root:"styles_root__oNkfm",img:"styles_img__46Cxj"};function ue(){const e=(0,j.useRef)(null),s=(0,j.useRef)(null),t=ce(!1),n=function(e,s){const t=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>await d("/api/quest",e),onSuccess:s=>{var n;"success"==(null===(n=t.getQueryState("quests"))||void 0===n?void 0:n.status)&&t.setQueryData("quests",(e=>e?[...e,s]:[s])),null===e||void 0===e||e(s)},onError:s})}((()=>{t.setF(),e.current&&(e.current.value=""),s.current&&(s.current.value="")}));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{className:de.root,onClick:t.setT,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,y.jsxs)(V,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430",open:t.v,close:t.setF,closeOnOutclick:!1,children:[n.isLoading&&(0,y.jsx)(Q,{}),f(n),(0,y.jsxs)(W,{onSubmit:()=>{var t,r;const i=null===(t=e.current)||void 0===t?void 0:t.value,l=null===(r=s.current)||void 0===r?void 0:r.valueAsNumber;i&&l&&n.mutate({name:i,reward:l})},children:[(0,y.jsx)(B,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",children:(0,y.jsx)("input",{ref:e,required:!0,type:"text"})}),(0,y.jsx)(B,{label:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430",children:(0,y.jsx)("input",{ref:s,required:!0,type:"number"})}),(0,y.jsx)(B,{children:(0,y.jsx)("button",{type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})}const me={button:"styles_button__MKylh"};function _e(e){let{title:s,mutationFn:t,mutatateParams:n,itemId:r,onSuccess:i,open:l,close:a}=e;const o=t(r,(e=>{null===a||void 0===a||a(),null===i||void 0===i||i(e)}));return(0,j.useEffect)((()=>{l||o.reset()}),[l]),(0,y.jsxs)(V,{open:l,close:a,title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",children:[f(o),o.isLoading&&(0,y.jsx)(Q,{}),(0,y.jsxs)(W,{onSubmit:()=>{o.mutate(n)},children:[(0,y.jsx)("h2",{children:s}),(0,y.jsx)("button",{type:"submit",className:me.button,children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})}function he(e,s){const[t,n]=(0,j.useState)(e);return s?{v:t,set:e=>{n(e),s()}}:{v:t,set:n}}const ve={root:"styles_root__RyDEO",error:"styles_error__mpo99",id:"styles_id__+YyjR",img:"styles_img__Q1dE-",inputs:"styles_inputs__+GHP-",changed:"styles_changed__-Gqjn",buttons:"styles_buttons__DpOXa",btnMinus:"styles_btnMinus__sOvku"};function xe(e){let{quest:s}=e;const t=ce(!1),n=ce(!1),i=he(s.name,t.setT),l=he(s.reward,t.setT),a=function(e,s,t){const n=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async s=>await d("/api/quest/".concat(e),s),onSuccess:e=>{var t;"success"==(null===(t=n.getQueryState("quests"))||void 0===t?void 0:t.status)&&n.setQueryData("quests",(s=>(null===s||void 0===s?void 0:s.map((s=>s.id==e.id?e:s)))||[])),null===s||void 0===s||s(e)},onError:t})}(s.id,o,(()=>o()));function o(e){i.set((null===e||void 0===e?void 0:e.name)||s.name),l.set((null===e||void 0===e?void 0:e.reward)||s.reward),t.setF()}return(0,j.useEffect)(o,[s]),(0,y.jsxs)("div",{className:N(ve.root,t.v&&ve.changed),children:[a.isLoading&&(0,y.jsx)(Q,{block:!0,r:"0.5rem"}),f(a,(e=>(0,y.jsxs)("div",{className:ve.error,children:[(0,y.jsx)("div",{children:e}),(0,y.jsx)("button",{onClick:()=>a.reset(),children:"\u041e\u041a"})]}))),(0,y.jsx)(_e,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440: "+i.v,itemId:s.id,mutationFn:oe,open:n.v,close:n.setF}),(0,y.jsx)("div",{className:ve.id,children:s.id}),(0,y.jsxs)("div",{className:ve.inputs,children:[(0,y.jsx)("div",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,y.jsx)("input",{type:"text",value:i.v,onChange:e=>i.set(e.target.value)}),(0,y.jsx)("div",{children:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430"}),(0,y.jsx)("input",{type:"number",value:l.v,onChange:e=>l.set(e.target.valueAsNumber)})]}),(0,y.jsxs)("div",{className:N("material_symbols",ve.buttons),children:[!t.v&&(0,y.jsx)("button",{onClick:n.setT,children:"delete"}),t.v&&(0,y.jsx)("button",{onClick:()=>{a.mutate({name:i.v,reward:l.v})},children:"save"}),t.v&&(0,y.jsx)("button",{onClick:()=>o(),children:"cancel"})]})]})}const je={quests:"styles_quests__lnETn"};function ge(){var e;const s=le();return(0,y.jsxs)(L,{centeredPage:!0,gap:"0.5rem",children:[s.isLoading&&(0,y.jsx)(Q,{}),f(s),(0,y.jsx)("h1",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430\u043c\u0438"}),(0,y.jsx)(ue,{}),(0,y.jsx)("div",{className:je.quests,children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,y.jsx)(xe,{quest:e},e.id)))})]})}function ye(){return(0,r.useQuery)("storeItems",(async()=>await c("/api/store_items")))}function pe(e,s){return(0,r.useMutation)({mutationFn:async e=>await d("/api/store_sell_check",e),onSuccess:(s,t)=>{s.itemId=t.itemId,s.visitorId=t.userId,null===e||void 0===e||e(s)},onError:s})}function fe(e,s,t){const n=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async()=>await d("/api/store_item/".concat(e,"/decrease")),onSuccess:e=>{var t;"success"==(null===(t=n.getQueryState("storeItems"))||void 0===t?void 0:t.status)&&n.setQueryData("storeItems",(s=>(null===s||void 0===s?void 0:s.map((s=>s.id==e.id?e:s)))||[])),null===s||void 0===s||s(e)},onError:t})}function be(e,s,t){const n=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async()=>await a("/api/store_item/".concat(e)),onSuccess:()=>{var t;"success"==(null===(t=n.getQueryState("storeItems"))||void 0===t?void 0:t.status)&&n.setQueryData("storeItems",(s=>(null===s||void 0===s?void 0:s.filter((s=>s.id!=e)))||[])),null===s||void 0===s||s()},onError:t})}const Ne={root:"styles_root__yl-I8",img:"styles_img__gddIw"};async function ke(e,s){const t=await new Promise((s=>{var t=new FileReader;t.addEventListener("loadend",(e=>{s({result:t.result,error:t.error})})),t.readAsDataURL(e)}));return t.error?(console.error(t.error),null):{data:t.result,name:s}}function Se(){var e;const s=he(null),t=(0,j.useRef)(null),n=(0,j.useRef)(null),i=(0,j.useRef)(null),l=ce(!1),a=function(e,s){const t=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>await d("/api/store_item",e),onSuccess:s=>{var n;"success"==(null===(n=t.getQueryState("storeItems"))||void 0===n?void 0:n.status)&&t.setQueryData("storeItems",(e=>e?[...e,s]:[s])),null===e||void 0===e||e(s)},onError:s})}((()=>{s.set(null),l.setF(),t.current&&(t.current.value=""),n.current&&(n.current.value=""),i.current&&(i.current.value="")}));return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{className:Ne.root,onClick:l.setT,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,y.jsxs)(V,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",open:l.v,close:l.setF,closeOnOutclick:!1,children:[a.isLoading&&(0,y.jsx)(Q,{}),f(a),""==(null===(e=s.v)||void 0===e?void 0:e.data)&&(0,y.jsx)(Q,{}),(0,y.jsxs)(W,{onSubmit:()=>{var e,r,l;const o=null===(e=t.current)||void 0===e?void 0:e.value,c=null===(r=i.current)||void 0===r?void 0:r.valueAsNumber,d=null===(l=n.current)||void 0===l?void 0:l.valueAsNumber;c&&o&&d&&a.mutate({count:c,name:o,price:d,img:s.v||void 0})},children:[(0,y.jsxs)(B,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",children:[(0,y.jsx)("div",{className:Ne.img,children:s.v&&(0,y.jsx)("img",{src:s.v.data,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"})}),(0,y.jsx)("input",{type:"file",style:{display:"none"},onChange:async e=>{var t,n;s.set({data:"",name:""}),s.set(await ke(null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],""))}})]}),(0,y.jsx)(B,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",children:(0,y.jsx)("input",{ref:t,required:!0,type:"text"})}),(0,y.jsx)(B,{label:"\u0426\u0435\u043d\u0430",children:(0,y.jsx)("input",{ref:n,required:!0,type:"number"})}),(0,y.jsx)(B,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",children:(0,y.jsx)("input",{ref:i,required:!0,type:"number"})}),(0,y.jsx)(B,{children:(0,y.jsx)("button",{type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})}const we={root:"styles_root__792UO",error:"styles_error__EjE0M",id:"styles_id__EvI3k",img:"styles_img__F6UZc",inputs:"styles_inputs__r6vu+",changed:"styles_changed__aaZPg",buttons:"styles_buttons__X3oNY",btnMinus:"styles_btnMinus__5ZzMA"};function Ae(e){var s,t;let{item:n}=e;const i=ce(!1),l=ce(!1),a=ce(!1),o=he(null,i.setT),c=he(n.name,i.setT),u=he(n.count,i.setT),m=he(n.price,i.setT),_=function(e,s,t){const n=(0,r.useQueryClient)();return(0,r.useMutation)({mutationFn:async s=>await d("/api/store_item/".concat(e),s),onSuccess:e=>{var t;"success"==(null===(t=n.getQueryState("storeItems"))||void 0===t?void 0:t.status)&&n.setQueryData("storeItems",(s=>(null===s||void 0===s?void 0:s.map((s=>s.id==e.id?e:s)))||[])),null===s||void 0===s||s(e)},onError:t})}(n.id,h,(()=>h()));function h(e){o.set(null),c.set((null===e||void 0===e?void 0:e.name)||n.name),u.set((null===e||void 0===e?void 0:e.count)||n.count),m.set((null===e||void 0===e?void 0:e.price)||n.price),i.setF()}return(0,j.useEffect)(h,[n]),(0,y.jsxs)("div",{className:N(we.root,i.v&&we.changed),children:[_.isLoading&&(0,y.jsx)(Q,{block:!0,r:"0.5rem"}),""==(null===(s=o.v)||void 0===s?void 0:s.data)&&(0,y.jsx)(Q,{block:!0,r:"0.5rem"}),f(_,(e=>(0,y.jsxs)("div",{className:we.error,children:[(0,y.jsx)("div",{children:e}),(0,y.jsx)("button",{onClick:()=>_.reset(),children:"\u041e\u041a"})]}))),(0,y.jsx)(_e,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440: "+c.v,itemId:n.id,mutationFn:be,open:l.v,close:l.setF}),(0,y.jsx)(_e,{title:"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043a\u043e\u043b-\u0432\u043e \u043d\u0430 1: "+c.v,itemId:n.id,mutationFn:fe,open:a.v,close:a.setF}),(0,y.jsx)("div",{className:we.id,children:n.id}),(0,y.jsxs)("label",{className:we.img,children:[(n.img||o.v)&&(0,y.jsx)("img",{src:(null===(t=o.v)||void 0===t?void 0:t.data)||n.img,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"}),(0,y.jsx)("input",{type:"file",style:{display:"none"},onChange:async e=>{var s,t;o.set({data:"",name:""}),o.set(await ke(null===(s=e.target)||void 0===s||null===(t=s.files)||void 0===t?void 0:t[0],"")),e.target.value=""}})]}),(0,y.jsxs)("div",{className:we.inputs,children:[(0,y.jsx)("div",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,y.jsx)("input",{type:"text",value:c.v,onChange:e=>c.set(e.target.value)}),(0,y.jsx)("div",{children:"\u0426\u0435\u043d\u0430"}),(0,y.jsx)("input",{type:"number",value:m.v,onChange:e=>m.set(e.target.valueAsNumber)}),(0,y.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),(0,y.jsx)("input",{type:"number",value:u.v,onChange:e=>u.set(e.target.valueAsNumber)})]}),(0,y.jsxs)("div",{className:N("material_symbols",we.buttons),children:[!i.v&&(0,y.jsx)("button",{onClick:l.setT,children:"delete"}),!i.v&&(0,y.jsx)("button",{className:we.btnMinus,onClick:a.setT,children:"-1"}),i.v&&(0,y.jsx)("button",{onClick:()=>{_.mutate({name:c.v,count:u.v,price:m.v,img:o.v||void 0})},children:"save"}),i.v&&(0,y.jsx)("button",{onClick:()=>h(),children:"cancel"})]})]})}const Ce={items:"styles_items__34Dlt"};function Fe(){var e;const s=ye();return(0,y.jsxs)(L,{centeredPage:!0,gap:"0.5rem",children:[s.isLoading&&(0,y.jsx)(Q,{}),f(s),(0,y.jsx)("h1",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c"}),(0,y.jsx)(Se,{}),(0,y.jsx)("div",{className:Ce.items,children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,y.jsx)(Ae,{item:e},e.id)))})]})}const Ee={root:"styles_root__3AhF7",title:"styles_title__AMBJ6",map:"styles_map__lp2hs",active:"styles_active__OfSUZ",background:"styles_background__23nEs"},qe=t.p+"static/media/map1.ca18af71948a9623a630.png",Ie=t.p+"static/media/map2.f96852c0dd52ac021dc0.png",Ue={root:"styles_root__cV7H9",active:"styles_active__RcNKa"};function Te(e){let{curPage:s}=e;return(0,y.jsx)("div",{className:Ue.root,children:(0,y.jsxs)("div",{children:[(0,y.jsx)(E.rU,{className:"map"==s?Ue.active:"",to:"/",children:"\u041a\u0430\u0440\u0442\u0430"}),(0,y.jsx)(E.rU,{className:"timetable"==s?Ue.active:"",to:"/timetable",children:"\u041f\u043b\u0430\u043d"}),(0,y.jsx)(E.rU,{className:"quest"==s?Ue.active:"",to:"/quest",children:"\u041a\u0432\u0435\u0441\u0442"}),(0,y.jsx)(E.rU,{className:"store"==s?Ue.active:"",to:"/store",children:"\u041c\u0430\u0433\u0430\u0437"}),(0,y.jsx)(E.rU,{className:"race"==s?Ue.active:"",to:"/race",children:"\u0413\u043e\u043d\u043a\u0438"})]})})}function Qe(){const e=ce(!0);return(0,y.jsxs)(L,{centeredPage:!0,headerColor:"#042e40",gap:"1em",className:Ee.root,footer:(0,y.jsx)(Te,{curPage:"map"}),children:[(0,y.jsx)("div",{className:Ee.background}),(0,y.jsx)("h1",{className:Ee.title,children:"Underparty"}),(0,y.jsxs)("div",{className:Ee.map,children:[(0,y.jsx)("img",{src:e.v?qe:Ie,alt:"\u041a\u0430\u0440\u0442\u0430"}),(0,y.jsxs)("div",{children:[(0,y.jsx)("button",{onClick:e.setT,className:e.v?Ee.active:"",children:"\u042d\u0442\u0430\u0436 1"}),(0,y.jsx)("button",{onClick:e.setF,className:e.v?"":Ee.active,children:"\u042d\u0442\u0430\u0436 2"})]})]})]})}function Me(e,s){return(0,r.useMutation)({mutationFn:async e=>await d("/api/promote_worker",e),onSuccess:e,onError:s})}function Pe(e,s){return(0,r.useMutation)({mutationFn:async e=>await d("/api/promote_manager",e),onSuccess:e,onError:s})}const Le={root:"styles_root__QdJnV",msg:"styles_msg__plnAU",msg_visible:"styles_msg_visible__G0rDm",msg_dimmed:"styles_msg_dimmed__0Xs60",bar:"styles_bar__VuYbs",bar_full:"styles_bar_full__poY0b"},Re={error:"styles_error__EtK3I",video:"styles_video__b88Zl"},De=t.p+"static/media/beep.38f199e084efe5461ffd.mp3";var Oe=t(1096);let ze=e=>{},Ge=()=>{},We=!1,Be=null,He=null;function Ze(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(!He){Be=document.createElement("div"),document.body.appendChild(Be),Be.style.display="flex",Be.style.backgroundColor="black";const e=document.createElement("video");Be.appendChild(e),He=new Oe.Z(e,(e=>ze(e.data)),{highlightScanRegion:!0,maxScansPerSecond:10})}(0,j.useEffect)((()=>(setTimeout((()=>{var e;return null===(e=He)||void 0===e?void 0:e.start().catch((()=>{setTimeout((()=>{var e;null===(e=He)||void 0===e||e.start().catch((()=>Ge()))}),250)}))}),100),()=>{var e;null===(e=He)||void 0===e||e.stop()})),[]);const[t,n]=(0,j.useState)(!1),[r,i]=(0,j.useState)(""),[l,a]=(0,j.useState)(We),o=function(e){const[s]=(0,j.useState)((()=>{const s=new Audio(e);return s.preload="auto",s}));return()=>{s.currentTime=0,s.play()}}(De);return ze=r=>{t||e||(i(r),n(!0),o(),setTimeout((()=>{i(""),n(!1)}),s))},Ge=()=>{We=!0,a(!0)},l?{scanned:r,scanner:(0,y.jsxs)("div",{className:Re.error,children:[(0,y.jsx)("h1",{children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435"}),(0,y.jsx)("p",{children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043c\u0435\u0440\u044b \u044d\u0442\u043e\u043c\u0443 \u0441\u0430\u0439\u0442\u0443 \u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0443, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0442\u0435."}),(0,y.jsx)("p",{children:"\u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})]})}:{scanned:r,scanner:(0,y.jsx)("div",{children:(0,y.jsx)("div",{ref:e=>{e&&(e.innerHTML="",e.appendChild(Be))},className:Re.video})})}}function Je(e){let{useMutation:s,onScan:t,formatMsg:n,onRes:r,className:i,pause:l}=e;const[a,o]=(0,j.useState)(""),[c,d]=(0,j.useState)(""),u=(0,j.useRef)(null),m=s((e=>{o(n(e)),d(""),v(),null===r||void 0===r||r(e)}),(e=>{o(""),d(p(e)),v()})),{scanned:_,scanner:h}=Ze(!m.isIdle||l);function v(){var e;setTimeout((()=>m.reset()),1e3),null===(e=u.current)||void 0===e||e.classList.add(Le.bar_full),setTimeout((()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.classList.remove(Le.bar_full)}),100)}return(0,j.useEffect)((()=>{if(""==_||!m.isIdle)return;o(""),d("");const e=t(_);e?m.mutate(e):d("\u041d\u0435 \u043e\u043f\u043e\u0437\u043d\u0430\u043d\u043e")}),[_]),(0,y.jsxs)("div",{className:N(Le.root,i),children:[m.isLoading&&(0,y.jsx)(Q,{}),h,(0,y.jsxs)("div",{className:N(Le.msg,(a||c)&&Le.msg_visible,(a||c)&&m.isIdle&&Le.msg_dimmed),children:[(0,y.jsx)("h2",{children:a}),(0,y.jsx)("h2",{children:c})]}),(0,y.jsx)("div",{ref:u,className:Le.bar})]})}const Ve={root:"styles_root__sSzNc",title:"styles_title__05ult"};function Ye(e){let{role:s}=e;const t={worker:"\u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0430",manager:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u0433\u043e"}[s],n={worker:"\u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440",manager:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0439"}[s];return t?(0,y.jsxs)(L,{className:Ve.root,children:[(0,y.jsx)("div",{className:Ve.title,children:(0,y.jsxs)("h3",{children:["\u041f\u0440\u043e\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 qr-\u043a\u043e\u0434 \u0447\u0435\u043b\u043e\u0432\u0435\u043a, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0435\u0433\u043e \u0434\u043e ",t,"."]})}),(0,y.jsx)(Je,{useMutation:{worker:Me,manager:Pe}[s],onScan:e=>{if(!e.startsWith("user_"))return null;return{userId:e.slice(5)}},formatMsg:e=>({ok:"".concat(e.user," \u043f\u043e\u0432\u044b\u0448\u0435\u043d \u0434\u043e ").concat(t),already_has:"".concat(e.user," \u0443\u0436\u0435 ").concat(n),no_user:"\u0427\u0435\u043b\u043e\u0432\u0435\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}[e.res]||e.res)})]}):(0,y.jsx)(L,{children:"\u041e\u0448\u0438\u0431\u043a\u0430!"})}const Ke={root:"styles_root__CEdGL",body:"styles_body__o-6ZK",bottom:"styles_bottom__zkZn6",title:"styles_title__6wHPv",btnQr:"styles_btnQr__94tox",quests:"styles_quests__58NxQ",quest:"styles_quest__65tbN"};var Xe=t(741);function $e(e){let{code:s,scale:t=10,margin:n=1,color:r="#000000",colorBg:i="#ffffff"}=e;const[l,a]=(0,j.useState)("");return(0,j.useEffect)((()=>{s&&(a(""),Xe.toDataURL(s,{errorCorrectionLevel:"H",scale:t,margin:n,color:{dark:r,light:i}},((e,s)=>a(s))))}),[s,r,t,n,i]),(0,y.jsx)("img",{src:l,alt:s,style:{width:"100%"}})}function es(){var e,s;const t=m(),n=u(),[r,i]=(0,j.useState)(!1),l=le();return(0,y.jsxs)(L,{centeredPage:!0,gap:"1em",className:Ke.root,footer:(0,y.jsx)(Te,{curPage:"quest"}),children:[l.isLoading&&(0,y.jsx)(Q,{}),t.isFetching&&(0,y.jsx)(Q,{}),(0,y.jsxs)("div",{className:Ke.body,children:[(0,y.jsx)("h1",{className:Ke.title,children:"Underparty"}),(0,y.jsxs)("div",{className:Ke.quests,children:[f(l),null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.map((e=>{var s;return(0,y.jsxs)("div",{className:Ke.quest,children:[(0,y.jsx)("span",{children:e.name}),null!==(s=t.data)&&void 0!==s&&s.complited_quests.includes(e.id)?(0,y.jsx)("span",{className:"material_symbols",children:"done"}):(0,y.jsxs)("span",{children:[e.reward,"G"]})]},e.id)}))]})]}),(0,y.jsx)("div",{className:Ke.bottom,children:(0,y.jsx)("button",{className:Ke.btnQr,onClick:()=>i(!0),children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u043a\u0432\u0435\u0441\u0442!"})}),(0,y.jsx)(V,{title:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430",open:r,close:()=>{var e;i(!1),null!==(e=t.data)&&void 0!==e&&e.auth&&n()},children:null!==t&&void 0!==t&&null!==(s=t.data)&&void 0!==s&&s.auth?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)($e,{code:"user_".concat(t.data.id),colorBg:"#ffffff00",scale:13}),(0,y.jsx)("h3",{children:"\u041f\u043e\u043a\u0430\u0436\u0438\u0442\u0435 qr-\u043a\u043e\u0434 \u043a\u0432\u0435\u0441\u0442\u043e\u0432\u0438\u043a\u0443"})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"\u0414\u043b\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u0432\u0435\u0441\u0442\u043e\u0432 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443."}),(0,y.jsx)("p",{children:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u043f\u0440\u0430\u0432\u043e\u043c \u0432\u0435\u0440\u0445\u043d\u0435\u043c \u0443\u0433\u043b\u0443."})]})})]})}const ss={root:"styles_root__91Sa8",title:"styles_title__Duk4+"};function ts(){var e,s;const t=(0,n.UO)(),r=parseInt(t.questId,10),i=le();return(0,y.jsxs)(L,{className:ss.root,children:[i.isLoading&&(0,y.jsx)(Q,{}),(0,y.jsxs)("div",{className:ss.title,children:[(0,y.jsx)("h2",{children:null===(e=i.data)||void 0===e||null===(s=e.find((e=>e.id==r)))||void 0===s?void 0:s.name}),(0,y.jsx)("h3",{children:"\u041f\u0440\u043e\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 qr-\u043a\u043e\u0434 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044f, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0435\u043c\u0443 \u044d\u0442\u043e\u0442 \u043a\u0432\u0435\u0441\u0442."}),f(i)]}),(0,y.jsx)(Je,{useMutation:ae,onScan:e=>{if(!e.startsWith("user_"))return null;return{userId:e.slice(5),questId:r}},formatMsg:e=>({ok:"\u041a\u0432\u0435\u0441\u0442 \u0437\u0430\u0447\u0442\u0451\u043d \u0434\u043b\u044f ".concat(e.visitor),already_done:"".concat(e.visitor," \u0443\u0436\u0435 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u043b \u044d\u0442\u043e\u0442 \u043a\u0432\u0435\u0441\u0442"),no_visitor:"\u041f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}[e.res]||e.res)})]})}const ns={root:"styles_root__d985G",quests:"styles_quests__TBzNh"};function rs(){var e;const s=le();return(0,y.jsxs)(L,{centered:!0,gap:"1rem",className:ns.root,children:[s.isLoading&&(0,y.jsx)(Q,{}),f(s),(0,y.jsx)("h2",{children:"\u041a\u0430\u043a\u043e\u0439 \u043a\u0432\u0435\u0441\u0442 \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435?"}),(0,y.jsx)("div",{className:ns.quests,children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,y.jsx)(E.rU,{to:"/scanner_quest/"+e.id,children:e.name},e.id)))})]})}const is={root:"styles_root__jLTkZ",title:"styles_title__oIrEy",item:"styles_item__rXv3s",item__img:"styles_item__img__O-P1T",item__desc:"styles_item__desc__zxJ9K",btns:"styles_btns__9aQ2N",btn_deny:"styles_btn_deny__7EPCy",btn_ok:"styles_btn_ok__WFDzm"};function ls(){const[e,s]=(0,j.useState)(!1),[t,n]=(0,j.useState)(!1),[i,l]=(0,j.useState)(null),a=function(e,s){return(0,r.useMutation)({mutationFn:async e=>await d("/api/store_sell",e),onSuccess:e,onError:s})}(c,c);function o(){s(!1),n(!1)}function c(){n(!1)}return(0,y.jsxs)(L,{className:is.root,children:[a.isLoading&&(0,y.jsx)(Q,{}),(0,y.jsx)("div",{className:is.title,children:(0,y.jsx)("h3",{children:"\u041f\u0440\u043e\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 qr-\u043a\u043e\u0434 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044f, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u0430\u0442\u044c \u0435\u043c\u0443 \u0442\u043e\u0432\u0430\u0440."})}),(0,y.jsx)(Je,{useMutation:pe,pause:e,onScan:e=>{const s=e.split(";");if(2!=s.length)return null;const[t,n]=s;if(!t.startsWith("user_")||!n.startsWith("item_"))return null;const r=t.slice(5),i=parseInt(n.slice(5),10);return isNaN(i)?null:{userId:r,itemId:i}},formatMsg:e=>{var s;return null!==(s={ok:"",no_item:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",no_visitor:"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",no_money:"\u0423 ".concat(e.visitor," \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u0441\u0442\u0432")}[e.res])&&void 0!==s?s:e.res},onRes:e=>{"ok"==e.res&&(s(!0),n(!0),l(e))}}),(0,y.jsxs)(V,{title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u0442\u043e\u0432\u0430\u0440\u0430",open:t,closeOnOutclick:!1,close:o,children:[(0,y.jsxs)("h3",{children:[null===i||void 0===i?void 0:i.visitor," \u0445\u043e\u0447\u0435\u0442 \u043a\u0443\u043f\u0438\u0442\u044c:"]}),(0,y.jsxs)("div",{className:is.item,children:[(0,y.jsx)("div",{className:is.item__img,children:(0,y.jsx)("img",{src:null===i||void 0===i?void 0:i.item.img,alt:"\u0422\u043e\u0432\u0430\u0440"})}),(0,y.jsxs)("div",{className:is.item__desc,children:[(0,y.jsx)("span",{children:null===i||void 0===i?void 0:i.item.name}),(0,y.jsxs)("span",{children:[null===i||void 0===i?void 0:i.item.price," G"]})]})]}),(0,y.jsx)("p",{children:"\u0412\u044b\u0434\u0430\u0439\u0442\u0435 \u0442\u043e\u0432\u0430\u0440 \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u043e\u043a\u0443\u043f\u043a\u0443:"}),(0,y.jsxs)("div",{className:is.btns,children:[(0,y.jsx)("button",{className:is.btn_deny,onClick:o,children:"\u041e\u0442\u043a\u043b\u043e\u043d\u0438\u0442\u044c"}),(0,y.jsx)("button",{className:is.btn_ok,onClick:()=>{a.mutate({userId:i.visitorId,itemId:i.itemId})},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]}),(0,y.jsxs)(V,{title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u0442\u043e\u0432\u0430\u0440\u0430",open:a.isSuccess||a.isError,close:function(){a.reset(),s(!1)},children:[a.isSuccess&&("ok"==a.data.res?(0,y.jsxs)("h2",{children:["\u0422\u043e\u0432\u0430\u0440 ",a.data.item," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u043e\u0434\u0430\u043d \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044e ",a.data.visitor]}):(0,y.jsxs)("h2",{children:["\u0423 ",a.data.visitor," \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0443 ",a.data.item]})),f(a)]})]})}const as={root:"styles_root__0CejE",title:"styles_title__u3Xt9",items:"styles_items__n-Fvc",item:"styles_item__zIxt2",item__img:"styles_item__img__r3iEr",item__desc:"styles_item__desc__wbcAM"};function os(){var e,s,t;const n=m(),r=u(),[i,l]=(0,j.useState)(!1),[a,o]=(0,j.useState)(null),c=ye();return(0,y.jsxs)(L,{centeredPage:!0,gap:"1em",className:as.root,footer:(0,y.jsx)(Te,{curPage:"store"}),children:[c.isLoading&&(0,y.jsx)(Q,{}),(0,y.jsx)("h1",{className:as.title,children:"Underparty"}),(0,y.jsxs)("div",{className:as.items,children:[f(c),null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.map((e=>(0,y.jsxs)("button",{className:as.item,onClick:()=>{o(e),l(!0)},children:[(0,y.jsx)("div",{className:as.item__img,children:e.img?(0,y.jsx)("img",{src:e.img,alt:"\u0422\u043e\u0432\u0430\u0440"}):(0,y.jsx)("div",{})}),(0,y.jsxs)("div",{className:as.item__desc,children:[(0,y.jsx)("span",{children:e.name}),(0,y.jsxs)("span",{children:[e.price," G"]})]})]},e.id)))]}),(0,y.jsx)(V,{title:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0442\u043e\u0432\u0430\u0440\u0430",open:i,close:()=>{var e;l(!1),null===(e=n.data)||void 0===e||!e.auth||n.data.balance<((null===a||void 0===a?void 0:a.price)||0)||r()},children:null!==n&&void 0!==n&&null!==(s=n.data)&&void 0!==s&&s.auth?(0,y.jsx)(y.Fragment,{children:n.data.balance<((null===a||void 0===a?void 0:a.price)||0)?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h2",{style:{marginBottom:8},children:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u044d\u0442\u043e\u0442 \u0442\u043e\u0432\u0430\u0440 \u0432\u0430\u043c \u043d\u0435 \u043f\u043e \u043a\u0430\u0440\u043c\u0430\u043d\u0443"}),(0,y.jsxs)("h2",{className:as.item__desc,children:[(0,y.jsx)("span",{children:null===a||void 0===a?void 0:a.name}),(0,y.jsxs)("span",{children:[null===a||void 0===a?void 0:a.price," G"]})]}),(0,y.jsxs)("h2",{className:as.item__desc,style:{marginBottom:8},children:[(0,y.jsx)("span",{children:"\u0412\u0430\u043c \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442:"}),(0,y.jsxs)("span",{children:[((null===a||void 0===a?void 0:a.price)||0)-n.data.balance," G"]})]}),(0,y.jsx)("h3",{children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0439\u0442\u0435 \u043a\u0432\u0435\u0441\u0442\u044b \u0438 \u0440\u0430\u0437\u0431\u043e\u0433\u0430\u0442\u0435\u0435\u0442\u0435!"})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)($e,{code:"user_".concat(null===(t=n.data)||void 0===t?void 0:t.id,";item_").concat(null===a||void 0===a?void 0:a.id),colorBg:"#ffffff00",scale:13}),(0,y.jsxs)("h2",{className:as.item__desc,children:[(0,y.jsx)("span",{children:null===a||void 0===a?void 0:a.name}),(0,y.jsxs)("span",{children:[null===a||void 0===a?void 0:a.price," G"]})]}),(0,y.jsx)("h3",{children:"\u041f\u043e\u043a\u0430\u0436\u0438\u0442\u0435 qr-\u043a\u043e\u0434 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0443"}),(0,y.jsx)("h4",{children:"\u0415\u0441\u043b\u0438 \u0431\u0430\u043b\u0430\u043d\u0441 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u043f\u0430\u0440\u0443 \u0441\u0435\u043a\u0443\u043d\u0434 - \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("p",{children:"\u0414\u043b\u044f \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043f\u043e\u043a\u0443\u043f\u043e\u043a \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443."}),(0,y.jsx)("p",{children:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u043f\u0440\u0430\u0432\u043e\u043c \u0432\u0435\u0440\u0445\u043d\u0435\u043c \u0443\u0433\u043b\u0443."})]})})]})}const cs={root:"styles_root__E5y+5",title:"styles_title__3QqY9",body:"styles_body__nvDgq",list:"styles_list__6yPeV",items:"styles_items__UxmDm",btns:"styles_btns__Ctsik",active:"styles_active__1eH-B",background:"styles_background__f5ayg"},ds={root:"styles_root__sa0ap",header:"styles_header__thHuO",body:"styles_body__27+PL",footer:"styles_footer__6LzVn"},us="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAaAQMAAADMuZOBAAAAAXNSR0IB2cksfwAAAAlwSFlzAABcRgAAXEYBFJRDQQAAAAZQTFRFAAAAAAAApWe5zwAAAAJ0Uk5TAP9bkSK1AAAAVklEQVR4nGNgIB/w///nwAhnPmCGMwvYoKz//yx4wEwgWSdjAWfyFcCZ7A/gTOYDID1/0JjsCXAmH8IEGRk404IPxkwoYIczDzA3QN3wsIERxnxAog8BPG0j3jpV/PcAAAAASUVORK5CYII=";function ms(e){let{children:s,footer:t,className:n,onClose:r}=e;return(0,y.jsxs)("div",{className:N(ds.root,n),children:[(0,y.jsxs)("div",{className:ds.header,children:[(0,y.jsx)("div",{children:"Underparty"}),(0,y.jsx)("button",{onClick:r,children:(0,y.jsx)("img",{src:us,alt:"close"})})]}),(0,y.jsx)("div",{className:ds.body,children:(0,y.jsx)("div",{children:s})}),(0,y.jsx)("div",{className:N(!!t&&ds.footer),children:t})]})}function _s(){const e=ce(!0),s=ce(!0),t=ce(!0);return(0,y.jsxs)(L,{centeredPage:!0,headerColor:"#4d0709",className:cs.root,footer:(0,y.jsx)(Te,{curPage:"timetable"}),children:[(0,y.jsx)("div",{className:cs.background}),(0,y.jsx)("h1",{className:cs.title,children:"Underparty"}),(0,y.jsxs)("div",{className:cs.body,children:[e.v?(0,y.jsx)(ms,{className:cs.list,footer:(0,y.jsxs)("div",{className:cs.btns,children:[(0,y.jsx)("button",{onClick:s.setT,className:s.v?cs.active:"",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,y.jsx)("button",{onClick:s.setF,className:s.v?"":cs.active,children:"\u0412\u0442\u043e\u0440\u0430\u044f"})]}),children:(0,y.jsx)("div",{className:cs.items,children:(s.v?hs:vs).map(((e,s)=>(0,y.jsx)("div",{children:e},s)))})}):(0,y.jsx)(ms,{className:cs.list,footer:(0,y.jsxs)("div",{className:cs.btns,children:[(0,y.jsx)("button",{onClick:t.setT,className:t.v?cs.active:"",children:"Under"}),(0,y.jsx)("button",{onClick:t.setF,className:t.v?"":cs.active,children:"\u0420\u0435\u0442\u0440\u043e"})]}),children:(0,y.jsx)("div",{className:cs.items,children:(t.v?xs:js).map(((e,s)=>(0,y.jsx)("div",{children:e},s)))})}),(0,y.jsxs)("div",{className:cs.btns,children:[(0,y.jsx)("button",{onClick:e.setT,className:e.v?cs.active:"",children:"\u041f\u043b\u0430\u043d"}),(0,y.jsx)("button",{onClick:e.setF,className:e.v?"":cs.active,children:"\u0422\u0443\u0440\u043d\u0438\u0440"})]})]})]})}const hs=["12:50 - \u0426\u0435\u0440\u0435\u043c\u043e\u043d\u0438\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f","13:00 - Shima Nori Piano Performance","13:45 - \u041a\u043e\u0441\u043f\u043b\u0435\u0439 \u0434\u0435\u0444\u0438\u043b\u0435","14:45 - \u0421\u043b\u0443\u0427\u0430\u0439\u043d\u043e\u0441\u0442\u044c","15:30 - \u0410\u0443\u043a\u0446\u0438\u043e\u043d","16:00 - UnderEvent \u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b Game Jam","16:30 - \u0413\u043e\u043d\u043a\u0438 \u0443\u043b\u0438\u0442\u043e\u043a","17:00 - \u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f","17:30 - \u0424\u0438\u043d\u0430\u043b \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u0432: Undercards & UV Battles","18:30 - \u041d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435","19:00 - Undertale \u0410\u043d\u0438\u043c\u0430\u0446\u0438\u0438","19:55 - \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u0446\u0435\u043d\u044b"],vs=["12:00 - \u041e\u0442\u0432\u0435\u0442\u044b \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043e\u0442 \u042e\u0442\u0443\u0431\u0435\u0440\u043e\u0432","12:40 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f","13:00 - The Jackbox Party Pack \u0441 \u042e\u0442\u0443\u0431\u0435\u0440\u0430\u043c\u0438","14:00 - Undertale Quiz","14:30 - 84 Sans AU Quiz","15:00 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f","15:30 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 Undertale AU","16:30 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0418\u0433\u0440","17:30 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f","18:00 - Everybody Switch","19:00 - \u0414\u0438\u0441\u043a\u043e\u0442\u0435\u043a\u0430","19:55 - \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u0446\u0435\u043d\u044b"],xs=["14:00 - Undercards","15:00 - Underverse Battles","11:30 - 17:00 - Endless Sans","11:30 - 17:00 - Unfair Undyne"],js=["13:00 - Nes - TMNT: Tournament Fighters","14:00 - Sega - Ultimate Mortal Kombat 3","15:00 - Snes - Super Tetris 3","16:00 - Ps1 - Tekken 3"],gs={user:"styles_user__WUZvf",title:"styles_title__Gd1jL",toggle:"styles_toggle__qlIwC",toggleInp:"styles_toggleInp__fGE-7",userInfo:"styles_userInfo__vgBlw",operations:"styles_operations__MGBbv"};function ys(){var e;z("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438");const s=(0,r.useQuery)("users",(async()=>await c("/api/users")));return(0,y.jsxs)(L,{centeredPage:!0,gap:8,styles:{fontFamily:"'PT Sans', Arial"},children:[s.isLoading&&(0,y.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),f(s),null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,y.jsxs)("div",{className:gs.user,children:[(0,y.jsx)("input",{type:"checkbox",className:gs.toggleInp,id:"user".concat(e.id)}),(0,y.jsxs)("label",{className:gs.title,htmlFor:"user".concat(e.id),children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{children:e.login}),(0,y.jsx)("div",{style:{color:"blue"},children:e.id}),(0,y.jsx)("div",{children:"|"}),(0,y.jsx)("div",{children:e.name})]}),(0,y.jsxs)("div",{children:[e.deleted&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:{color:"tomato"},children:"deleted"}),(0,y.jsx)("div",{children:"|"})]}),(0,y.jsx)("span",{children:e.roles.join(", ")}),(0,y.jsx)("div",{className:gs.toggle})]})]}),(0,y.jsx)("div",{className:gs.userInfo,children:(0,y.jsxs)("div",{children:[(0,y.jsx)("h4",{children:"Operations"}),(0,y.jsx)("div",{className:gs.operations,children:e.operations.map(((e,s)=>(0,y.jsx)("div",{children:ps(e)},s)))})]})})]},e.id)))]})}function ps(e){const s={page:"#990099",add:"#008000",get:"#008000",change:"#006fb3",delete:"#b30000"};for(const t in s)if(e.startsWith(t))return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{style:{color:s[t]},children:t}),(0,y.jsx)("span",{children:e.slice(t.length)})]});return(0,y.jsx)("span",{children:e})}const fs={btn:"styles_btn__w12Ul"};function bs(){return(0,y.jsxs)(L,{centered:!0,gap:"0.8rem",children:[v("manage_store")&&(0,y.jsx)(E.rU,{to:"/manage_store",className:fs.btn,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c"}),v("manage_quest")&&(0,y.jsx)(E.rU,{to:"/manage_quest",className:fs.btn,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430\u043c\u0438"}),v("page_scanner_quest")&&(0,y.jsx)(E.rU,{to:"/scanner_quest",className:fs.btn,children:"\u0414\u043b\u044f \u043a\u0432\u0435\u0441\u0442\u043e\u0432\u0438\u043a\u043e\u0432"}),v("page_scanner_store")&&(0,y.jsx)(E.rU,{to:"/scanner_store",className:fs.btn,children:"\u0414\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u043e\u0432"}),v("promote_worker")&&(0,y.jsx)(E.rU,{to:"/promote_worker",className:fs.btn,children:"\u041f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0434\u043e \u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0430"}),v("promote_manager")&&(0,y.jsx)(E.rU,{to:"/promote_manager",className:fs.btn,children:"\u041f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0434\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u0433\u043e"})]})}function Ns(){var e,s;const t=m();function r(e,s,r){var i;return(0,y.jsx)(n.AW,{path:s,element:null!==(i=t.data)&&void 0!==i&&i.auth?null==e||h(t,e)?r:(0,y.jsx)(D,{}):(0,y.jsx)(n.Fg,{to:"/login"})})}return(0,y.jsxs)("div",{className:"root",children:[(0,y.jsx)(g,{}),(0,y.jsx)(w,{}),t.isLoading&&(0,y.jsx)(x.Z,{}),f(t),t.isSuccess&&(0,y.jsxs)(n.Z5,{children:[(0,y.jsx)(n.AW,{path:"/",element:null!==(e=t.data)&&void 0!==e&&e.auth?(0,y.jsx)(n.Fg,{to:"/map"}):(0,y.jsx)($,{})}),(0,y.jsx)(n.AW,{path:"/auth",element:null!==(s=t.data)&&void 0!==s&&s.auth?(0,y.jsx)(n.Fg,{to:"/"}):(0,y.jsx)(H,{})}),(0,y.jsx)(n.AW,{path:"/timetable",element:(0,y.jsx)(_s,{})}),(0,y.jsx)(n.AW,{path:"/quest",element:(0,y.jsx)(es,{})}),(0,y.jsx)(n.AW,{path:"/store",element:(0,y.jsx)(os,{})}),(0,y.jsx)(n.AW,{path:"/map",element:(0,y.jsx)(Qe,{})}),r("page_worker","/worker",(0,y.jsx)(bs,{})),r("manage_store","/manage_store",(0,y.jsx)(Fe,{})),r("manage_quest","/manage_quest",(0,y.jsx)(ge,{})),r("page_scanner_quest","/scanner_quest",(0,y.jsx)(rs,{})),r("page_scanner_quest","/scanner_quest/:questId",(0,y.jsx)(ts,{})),r("page_scanner_store","/scanner_store",(0,y.jsx)(ls,{})),r("promote_worker","/promote_worker",(0,y.jsx)(Ye,{role:"worker"})),r("promote_manager","/promote_manager",(0,y.jsx)(Ye,{role:"manager"})),r("page_debug","/debug",(0,y.jsx)(Y,{})),r("page_debug","/log",(0,y.jsx)(re,{})),r("page_users","/users",(0,y.jsx)(ys,{})),(0,y.jsx)(n.AW,{path:"*",element:(0,y.jsx)(R,{})})]})]})}}}]);
//# sourceMappingURL=15.a003b92c.chunk.js.map