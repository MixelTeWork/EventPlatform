"use strict";(self.webpackChunkevent_platform=self.webpackChunkevent_platform||[]).push([[144],{3816:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ks});var n=t(7689),i=t(1933);class r extends Error{}async function l(e,s,t){const n=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:void 0===t?null:JSON.stringify(t)});if(!n.ok)throw new r((await n.json()).msg);return n}function a(e,s){return l("DELETE",e,s)}async function o(e,s,t){const n=await l(e,s,t);return await n.json()}function c(e,s){return o("GET",e,s)}function d(e,s){return o("POST",e,s)}function u(){return(0,i.useQuery)("user",m)}async function m(){const e=await fetch("/api/user"),s=await e.json();if(401==e.status)return{auth:!1,id:"",balance:0,roles:[],name:"",last_name:"",photo:"",complited_quests:[],operations:[]};if(!e.ok)throw new r(s.msg);const t=s;return t.auth=!0,t}function h(e,s){var t,n;return!(null===(t=e.data)||void 0===t||!t.auth||null===(n=e.data)||void 0===n||!n.operations.includes(s))}function v(e){return h(u(),e)}var _=t(5086),x=t(2791);function j(){const{pathname:e}=(0,n.TH)();return(0,x.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null}var g=t(184);function y(e,s){const t=e instanceof r?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430";return s?s(t):t}function p(e,s,t){if(!e.isError)return null;return(s||f)(y(e.error,t))}function f(e){return(0,g.jsx)("h3",{style:{color:"tomato",textAlign:"center"},children:e})}function b(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e=>!!e)).join(" ")}const A={root:"styles_root__hzHjz",visible:"styles_visible__6aD-n",close:"styles_close__3L8iW",message:"styles_message__oF8zk"};let N="";function w(){const[e,s]=(0,x.useState)("");return(0,x.useEffect)((()=>{const e=setInterval((()=>{const e=function(e){let s=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return s?decodeURIComponent(s[1]):void 0}("MESSAGE_TO_FRONTEND");e!=N&&(N=e||"",s(N))}),1e3);return()=>{clearInterval(e)}}),[s]),(0,g.jsxs)("div",{className:b(A.root,""!=e&&A.visible),children:[(0,g.jsx)("button",{className:A.close,onClick:()=>s("")}),(0,g.jsx)("div",{className:A.message,children:k(e)})]})}function k(e){return'"'==e.at(0)&&(e=e.slice(1)),'"'==e.at(-1)&&(e=e.slice(0,-1)),e}const E={root:"styles_root__4DGhY"};function C(){const e=(0,n.s0)();return(0,g.jsx)("div",{className:E.root,children:(0,g.jsx)("button",{onClick:()=>e(-1),className:"button button_light",children:"\u041d\u0430\u0437\u0430\u0434"})})}var I=t(1087);const S={root:"styles_root__Zvl9c",home:"styles_home__o+-s7",block:"styles_block__a1SM7",balance:"styles_balance__PLLCC",user:"styles_user__0ltHf",img:"styles_img__vhWmb",menu:"styles_menu__WWgPh",menuVisible:"styles_menuVisible__mMGZn"};async function R(e){const s=await d("/api/auth",e);return s.auth=!0,s}async function U(){var e,s;await(e="/api/logout",l("POST",e,s))}const q={root:"styles_root__BdzzK",spinner:"styles_spinner__rlI86","lds-ring":"styles_lds-ring__jnLuB"};function Q(e){let{color:s,zIndex:t,block:n,r:i=0}=e;return(0,g.jsx)("div",{className:q.root,style:{position:n?"absolute":"fixed",borderRadius:i},children:(0,g.jsxs)("div",{className:q.spinner,style:{"--color":s,zIndex:t},children:[(0,g.jsx)("div",{}),(0,g.jsx)("div",{}),(0,g.jsx)("div",{}),(0,g.jsx)("div",{})]})})}function F(e){var s,t,r,l;let{color:a="#042e40"}=e;const[o,c]=(0,x.useState)(!1),d=(0,n.s0)(),m=function(e){const s=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:U,onSuccess:()=>{s.setQueryData("user",(e=>({auth:!1,id:"",balance:0,roles:[],name:"",last_name:"",photo:"",complited_quests:[],operations:[]}))),null===e||void 0===e||e()}})}((()=>{c(!1)})),v=u();return(0,g.jsxs)("div",{className:S.root,style:{background:a},children:[(0,g.jsx)(I.rU,{to:"/",className:S.home}),(0,g.jsxs)("span",{className:S.block,children:[(0,g.jsxs)("div",{className:S.balance,children:[(null===(s=v.data)||void 0===s?void 0:s.balance)||0," G"]}),(0,g.jsxs)("button",{className:S.user,onClick:()=>{var e;return null!==(e=v.data)&&void 0!==e&&e.auth?c((e=>!e)):d("/")},children:[(0,g.jsx)("span",{children:null!==(t=v.data)&&void 0!==t&&t.auth?null===(r=v.data)||void 0===r?void 0:r.name:"\u0412\u043e\u0439\u0442\u0438"}),(null===(l=v.data)||void 0===l?void 0:l.photo)&&(0,g.jsx)("img",{className:S.img,src:v.data.photo,alt:"avatar"})]}),(0,g.jsxs)("div",{className:b(S.menu,o&&S.menuVisible),style:{background:a},children:[h(v,"page_debug")&&(0,g.jsx)(I.rU,{to:"/debug",children:"</>"}),h(v,"page_worker")&&(0,g.jsx)(I.rU,{to:"/worker",children:"[-^-]"}),(0,g.jsx)("button",{onClick:()=>m.mutate(),disabled:"idle"!=m.status,children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),"loading"==m.status&&(0,g.jsx)(Q,{})]})}const T={root:"styles_root__xvR2N",hasFooter:"styles_hasFooter__lMS3o",body:"styles_body__S-p4X",body_centered:"styles_body_centered__NzRPU",body_centeredPage:"styles_body_centeredPage__R-EzO"};function P(e){let{children:s,className:t,headerColor:n,styles:i,centered:r=!1,centeredPage:l=!1,height100:a=!1,gap:o=0,header:c,footer:d}=e;return void 0===c&&(c=(0,g.jsx)(F,{color:n})),(0,g.jsxs)("div",{className:b(T.root,!!d&&T.hasFooter),style:{...i,maxHeight:a?"100dvh":""},children:[c||(0,g.jsx)("div",{}),(0,g.jsx)("div",{className:b(T.body,t,r&&T.body_centered,l&&T.body_centeredPage),style:{gap:o,maxHeight:a?"100%":""},children:s}),d]})}function M(){return(0,g.jsx)(P,{centered:!0,header:(0,g.jsx)(C,{}),children:"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442"})}function G(){return(0,g.jsx)(P,{centered:!0,header:(0,g.jsx)(C,{}),children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})}const B={back:"styles_back__uuJZO",form:"styles_form__n7Rcu"};function L(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435";(0,x.useEffect)((()=>{const t=document.title,n="object"!=typeof e?[e]:e;return document.title=[s,...n].filter((e=>!!e)).join(" | "),()=>{document.title=t}}),[e,s])}const D={form:"styles_form__cFFCH",field:"styles_field__5rpBk"};function J(e){let{className:s,style:t,onSubmit:n,children:i}=e;return(0,g.jsx)("form",{className:b(D.form,s),style:t,onSubmit:e=>{e.preventDefault(),n()},children:i})}function H(e){let{label:s,className:t,style:n,children:i}=e;return(0,g.jsxs)("label",{className:b(D.field,t),style:n,children:[(0,g.jsx)("span",{children:s}),i]})}function O(){L("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f");const[e,s]=(0,x.useState)(""),t=(0,x.useRef)(null),n=(0,x.useRef)(null),l=function(e){const s=(0,i.useQueryClient)(),t=(0,i.useMutation)({mutationFn:R,onSuccess:e=>{s.setQueryData("user",(()=>e))},onError:s=>{null===e||void 0===e||e(s instanceof r?s.message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}});return t}(s);return(0,g.jsxs)(P,{header:null,centered:!0,centeredPage:!0,gap:"2em",children:[(0,g.jsx)(I.rU,{to:"/",className:b(B.back,"material_symbols"),children:"arrow_back"}),(0,g.jsx)("h1",{children:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435"}),e&&(0,g.jsx)("h3",{children:e}),l.isLoading&&(0,g.jsx)(Q,{}),(0,g.jsxs)(J,{className:B.form,onSubmit:function(){var e,s;const i=(null===(e=t.current)||void 0===e?void 0:e.value)||"",r=(null===(s=n.current)||void 0===s?void 0:s.value)||"";l.mutate({login:i,password:r})},children:[(0,g.jsx)(H,{label:"\u041b\u043e\u0433\u0438\u043d",children:(0,g.jsx)("input",{ref:t,type:"text",name:"login",required:!0})}),(0,g.jsx)(H,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",children:(0,g.jsx)("input",{ref:n,type:"password",name:"password",required:!0})}),(0,g.jsx)("button",{type:"submit",className:"button button_light button_small",disabled:"loading"==l.status,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}const V={root:"styles_root__7P05R"},z={root:"styles_root__O0923",hidden:"styles_hidden__eYJaf",open:"styles_open__35Vcu",popup:"styles_popup__L-0H0",header:"styles_header__o87wG",close:"styles_close__w0Yhz",body:"styles_body__t75Nd"};function W(e){let{children:s,open:t=!1,close:n,title:i="",closeOnOutclick:r=!0}=e;const l=(0,x.useRef)(null),[a,o]=(0,x.useState)(t),[c,d]=(0,x.useState)(!t);return(0,x.useEffect)((()=>{if(t){d(!1);const e=setTimeout((()=>o(!0)),100);return()=>clearTimeout(e)}o(!1);const e=setTimeout((()=>d(!0)),250);return()=>clearTimeout(e)}),[t]),(0,g.jsx)("div",{ref:l,className:b(z.root,a&&z.open,c&&z.hidden),onClick:e=>{r&&e.target==l.current&&(null===n||void 0===n||n())},children:(0,g.jsxs)("div",{className:z.popup,children:[(i||n)&&(0,g.jsxs)("div",{className:z.header,children:[(0,g.jsx)("h3",{children:i}),n&&(0,g.jsx)("button",{className:z.close,onClick:n})]}),(0,g.jsx)("div",{className:z.body,children:s})]})})}function Y(){const[e,s]=(0,x.useState)(""),[t,n]=(0,x.useState)(""),i=(0,x.useRef)(null),r=(0,x.useRef)(null);return(0,g.jsxs)(P,{centered:!0,gap:"1rem",className:V.root,children:[(0,g.jsx)(I.rU,{to:"/users",children:"Users"}),(0,g.jsx)(I.rU,{to:"/log",children:"Log"}),(0,g.jsx)("button",{onClick:async()=>{s("Loading");try{const e=await fetch("/api/debug/log_errors"),t=await e.text();s(t),setTimeout((()=>{var e,s,t,n;return null===(e=i.current)||void 0===e||null===(s=e.parentElement)||void 0===s?void 0:s.scrollTo(0,null===(t=i.current)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.scrollHeight)}),150)}catch(e){s(JSON.stringify(e))}},children:"Log errors"}),(0,g.jsx)("button",{onClick:async()=>{n("Loading");try{const e=await fetch("/api/debug/log_info"),s=await e.text();n(s),setTimeout((()=>{var e,s,t,n;return null===(e=r.current)||void 0===e||null===(s=e.parentElement)||void 0===s?void 0:s.scrollTo(0,null===(t=r.current)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.scrollHeight)}),150)}catch(e){n(JSON.stringify(e))}},children:"Log requests"}),(0,g.jsx)(W,{title:"logErrors",open:""!=e,close:()=>s(""),children:(0,g.jsx)("pre",{ref:i,children:e})}),(0,g.jsx)(W,{title:"log",open:""!=t,close:()=>n(""),children:(0,g.jsx)("pre",{ref:r,children:t})})]})}const Z={root:"styles_root__h8xNs",auth:"styles_auth__quDS1",img:"styles_img__jUWp9",title:"styles_title__+su+v",btn:"styles_btn__xIQ7b"},K=t.p+"static/media/city.10ddee993980b103bc6c.png";function X(){return(0,g.jsxs)("div",{className:Z.root,children:[(0,g.jsx)(I.rU,{to:"/auth",className:Z.auth}),(0,g.jsxs)("div",{className:Z.title,children:[(0,g.jsx)("img",{className:Z.img,src:K,alt:"\u0413\u043e\u0440\u043e\u0434"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{children:"Underparty"}),(0,g.jsx)("h2",{children:"18.02.24"})]})]}),(0,g.jsx)("a",{className:Z.btn,href:"https://oauth.vk.com/authorize?client_id=51848582&redirect_uri=https://platformevent.pythonanywhere.com/auth_vk&display=page&response_type=code",children:"\u0412\u0445\u043e\u0434"})]})}function $(e){const s=e;return s.date=new Date(e.date),s}function ee(e,s){return"".concat(e).padStart(s,"0")}function se(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"".concat(e.getFullYear(),".").concat(ee(e.getMonth()+1,2),".").concat(ee(e.getDate(),2)):"".concat(ee(e.getDate(),2),".").concat(ee(e.getMonth()+1,2),".").concat(e.getFullYear()):""}(e,arguments.length>2&&void 0!==arguments[2]&&arguments[2])+" "+function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="".concat(ee(e.getHours(),2),":").concat(ee(e.getMinutes(),2));return s?t+":".concat(ee(e.getSeconds(),2)):t}(e,s)}const te={table:"styles_table__QLr-h",changesCell:"styles_changesCell__0wQDJ",changes:"styles_changes__EyS9f",btn:"styles_btn__H7b72"};function ne(){var e;L("Log");const s=(0,i.useQuery)("log",(async()=>(await c("/api/debug/log")).map($)));return(0,g.jsxs)(P,{centeredPage:!0,styles:{fontFamily:"'PT Sans', Arial"},children:[s.isFetching&&(0,g.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),p(s),!s.isFetching&&(0,g.jsx)("button",{className:te.btn,onClick:()=>s.refetch(),children:"Update"}),(0,g.jsxs)("table",{className:te.table,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{style:{minWidth:"9.5em"},children:"Date"}),(0,g.jsx)("th",{style:{minWidth:"4em"},children:"Action"}),(0,g.jsx)("th",{style:{minWidth:"9.5em"},children:"Table[id]"}),(0,g.jsx)("th",{children:"User[id]"}),(0,g.jsx)("th",{style:{width:"18em"},children:"Changes"})]})}),(0,g.jsx)("tbody",{children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:se(e.date,!0,!0)}),(0,g.jsx)("td",{children:ie(e.actionCode)}),(0,g.jsxs)("td",{children:[e.tableName,"[",e.recordId,"]"]}),(0,g.jsxs)("td",{children:[e.userName," [",e.userId,"]"]}),(0,g.jsx)("td",{className:te.changesCell,children:(0,g.jsxs)("div",{className:te.changes,children:[(0,g.jsx)("input",{type:"checkbox",className:te.toggleInp,id:"item".concat(e.id)}),(0,g.jsx)("div",{children:e.changes.map((e=>(0,g.jsxs)("div",{children:[e[0],": ",JSON.stringify(e[1])," ","->"," ",JSON.stringify(e[2])]},e[0])))}),e.changes.length>0&&(0,g.jsx)("label",{className:te.btn,htmlFor:"item".concat(e.id),children:e.changes.length})]})})]},e.id)))})]})]})}function ie(e){return(0,g.jsx)("span",{style:{color:{added:"#008000",deleted:"#b30000",updated:"#006fb3",restored:"#990099"}[e]},children:e})}function re(){return(0,i.useQuery)("quests",(async()=>await c("/api/quests")))}function le(e,s,t){const n=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:async()=>await a("/api/quest/".concat(e)),onSuccess:()=>{var t;"success"==(null===(t=n.getQueryState("quests"))||void 0===t?void 0:t.status)&&n.setQueryData("quests",(s=>(null===s||void 0===s?void 0:s.filter((s=>s.id!=e)))||[])),null===s||void 0===s||s()},onError:t})}function ae(e,s){let[t,n]=(0,x.useState)(e);return s&&(n=e=>{n(e),s()}),{v:t,set:n,setT:()=>n(!0),setF:()=>n(!1)}}const oe={root:"styles_root__oNkfm",img:"styles_img__46Cxj"};function ce(){const e=(0,x.useRef)(null),s=(0,x.useRef)(null),t=ae(!1),n=function(e,s){const t=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>await d("/api/quest",e),onSuccess:s=>{var n;"success"==(null===(n=t.getQueryState("quests"))||void 0===n?void 0:n.status)&&t.setQueryData("quests",(e=>e?[...e,s]:[s])),null===e||void 0===e||e(s)},onError:s})}((()=>{t.setF(),e.current&&(e.current.value=""),s.current&&(s.current.value="")}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{className:oe.root,onClick:t.setT,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,g.jsxs)(W,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430",open:t.v,close:t.setF,closeOnOutclick:!1,children:[n.isLoading&&(0,g.jsx)(Q,{}),p(n),(0,g.jsxs)(J,{onSubmit:()=>{var t,i;const r=null===(t=e.current)||void 0===t?void 0:t.value,l=null===(i=s.current)||void 0===i?void 0:i.valueAsNumber;r&&l&&n.mutate({name:r,reward:l})},children:[(0,g.jsx)(H,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",children:(0,g.jsx)("input",{ref:e,required:!0,type:"text"})}),(0,g.jsx)(H,{label:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430",children:(0,g.jsx)("input",{ref:s,required:!0,type:"number"})}),(0,g.jsx)(H,{children:(0,g.jsx)("button",{type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})}const de={button:"styles_button__MKylh"};function ue(e){let{title:s,mutationFn:t,mutatateParams:n,itemId:i,onSuccess:r,open:l,close:a}=e;const o=t(i,(e=>{null===a||void 0===a||a(),null===r||void 0===r||r(e)}));return(0,x.useEffect)((()=>{l||o.reset()}),[l]),(0,g.jsxs)(W,{open:l,close:a,title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",children:[p(o),o.isLoading&&(0,g.jsx)(Q,{}),(0,g.jsxs)(J,{onSubmit:()=>{o.mutate(n)},children:[(0,g.jsx)("h2",{children:s}),(0,g.jsx)("button",{type:"submit",className:de.button,children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})}function me(e,s){const[t,n]=(0,x.useState)(e);return s?{v:t,set:e=>{n(e),s()}}:{v:t,set:n}}const he={root:"styles_root__RyDEO",error:"styles_error__mpo99",id:"styles_id__+YyjR",img:"styles_img__Q1dE-",inputs:"styles_inputs__+GHP-",changed:"styles_changed__-Gqjn",buttons:"styles_buttons__DpOXa",btnMinus:"styles_btnMinus__sOvku"};function ve(){return(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,g.jsx)("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"})})}function _e(){return(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,g.jsx)("path",{d:"M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"})})}function xe(){return(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,g.jsx)("path",{d:"m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})})}function je(e){let{quest:s}=e;const t=ae(!1),n=ae(!1),r=me(s.name,t.setT),l=me(s.reward,t.setT),a=function(e,s,t){const n=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:async s=>await d("/api/quest/".concat(e),s),onSuccess:e=>{var t;"success"==(null===(t=n.getQueryState("quests"))||void 0===t?void 0:t.status)&&n.setQueryData("quests",(s=>(null===s||void 0===s?void 0:s.map((s=>s.id==e.id?e:s)))||[])),null===s||void 0===s||s(e)},onError:t})}(s.id,o,(()=>o()));function o(e){r.set((null===e||void 0===e?void 0:e.name)||s.name),l.set((null===e||void 0===e?void 0:e.reward)||s.reward),t.setF()}return(0,x.useEffect)(o,[s]),(0,g.jsxs)("div",{className:b(he.root,t.v&&he.changed),children:[a.isLoading&&(0,g.jsx)(Q,{block:!0,r:"0.5rem"}),p(a,(e=>(0,g.jsxs)("div",{className:he.error,children:[(0,g.jsx)("div",{children:e}),(0,g.jsx)("button",{onClick:()=>a.reset(),children:"\u041e\u041a"})]}))),(0,g.jsx)(ue,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440: "+r.v,itemId:s.id,mutationFn:le,open:n.v,close:n.setF}),(0,g.jsx)("div",{className:he.id,children:s.id}),(0,g.jsxs)("div",{className:he.inputs,children:[(0,g.jsx)("div",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,g.jsx)("input",{type:"text",value:r.v,onChange:e=>r.set(e.target.value)}),(0,g.jsx)("div",{children:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430"}),(0,g.jsx)("input",{type:"number",value:l.v,onChange:e=>l.set(e.target.valueAsNumber)})]}),(0,g.jsxs)("div",{className:b("material_symbols",he.buttons),children:[!t.v&&(0,g.jsx)("button",{onClick:n.setT,children:(0,g.jsx)(ve,{})}),t.v&&(0,g.jsx)("button",{onClick:()=>{a.mutate({name:r.v,reward:l.v})},children:(0,g.jsx)(_e,{})}),t.v&&(0,g.jsx)("button",{onClick:()=>o(),children:(0,g.jsx)(xe,{})})]})]})}const ge={quests:"styles_quests__lnETn"};function ye(){var e;const s=re();return(0,g.jsxs)(P,{centeredPage:!0,gap:"0.5rem",children:[s.isLoading&&(0,g.jsx)(Q,{}),p(s),(0,g.jsx)("h1",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430\u043c\u0438"}),(0,g.jsx)(ce,{}),(0,g.jsx)("div",{className:ge.quests,children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,g.jsx)(je,{quest:e},e.id)))})]})}function pe(){return(0,i.useQuery)("storeItems",(async()=>await c("/api/store_items")))}function fe(e,s,t){const n=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:async()=>await d("/api/store_item/".concat(e,"/decrease")),onSuccess:e=>{var t;"success"==(null===(t=n.getQueryState("storeItems"))||void 0===t?void 0:t.status)&&n.setQueryData("storeItems",(s=>(null===s||void 0===s?void 0:s.map((s=>s.id==e.id?e:s)))||[])),null===s||void 0===s||s(e)},onError:t})}function be(e,s,t){const n=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:async()=>await a("/api/store_item/".concat(e)),onSuccess:()=>{var t;"success"==(null===(t=n.getQueryState("storeItems"))||void 0===t?void 0:t.status)&&n.setQueryData("storeItems",(s=>(null===s||void 0===s?void 0:s.filter((s=>s.id!=e)))||[])),null===s||void 0===s||s()},onError:t})}const Ae={root:"styles_root__yl-I8",img:"styles_img__gddIw"};async function Ne(e,s){const t=await new Promise((s=>{var t=new FileReader;t.addEventListener("loadend",(e=>{s({result:t.result,error:t.error})})),t.readAsDataURL(e)}));return t.error?(console.error(t.error),null):{data:t.result,name:s}}function we(){var e;const s=me(null),t=(0,x.useRef)(null),n=(0,x.useRef)(null),r=(0,x.useRef)(null),l=ae(!1),a=function(e,s){const t=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>await d("/api/store_item",e),onSuccess:s=>{var n;"success"==(null===(n=t.getQueryState("storeItems"))||void 0===n?void 0:n.status)&&t.setQueryData("storeItems",(e=>e?[...e,s]:[s])),null===e||void 0===e||e(s)},onError:s})}((()=>{s.set(null),l.setF(),t.current&&(t.current.value=""),n.current&&(n.current.value=""),r.current&&(r.current.value="")}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{className:Ae.root,onClick:l.setT,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,g.jsxs)(W,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",open:l.v,close:l.setF,closeOnOutclick:!1,children:[a.isLoading&&(0,g.jsx)(Q,{}),p(a),""==(null===(e=s.v)||void 0===e?void 0:e.data)&&(0,g.jsx)(Q,{}),(0,g.jsxs)(J,{onSubmit:()=>{var e,i,l;const o=null===(e=t.current)||void 0===e?void 0:e.value,c=null===(i=r.current)||void 0===i?void 0:i.valueAsNumber,d=null===(l=n.current)||void 0===l?void 0:l.valueAsNumber;c&&o&&d&&a.mutate({count:c,name:o,price:d,img:s.v||void 0})},children:[(0,g.jsxs)(H,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",children:[(0,g.jsx)("div",{className:Ae.img,children:s.v&&(0,g.jsx)("img",{src:s.v.data,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"})}),(0,g.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/gif",style:{display:"none"},onChange:async e=>{var t,n;s.set({data:"",name:""}),s.set(await Ne(null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],""))}})]}),(0,g.jsx)(H,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",children:(0,g.jsx)("input",{ref:t,required:!0,type:"text"})}),(0,g.jsx)(H,{label:"\u0426\u0435\u043d\u0430",children:(0,g.jsx)("input",{ref:n,required:!0,type:"number"})}),(0,g.jsx)(H,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",children:(0,g.jsx)("input",{ref:r,required:!0,type:"number"})}),(0,g.jsx)(H,{children:(0,g.jsx)("button",{type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})}const ke={root:"styles_root__792UO",error:"styles_error__EjE0M",id:"styles_id__EvI3k",img:"styles_img__F6UZc",inputs:"styles_inputs__r6vu+",changed:"styles_changed__aaZPg",buttons:"styles_buttons__X3oNY",btnMinus:"styles_btnMinus__5ZzMA"};function Ee(e){var s,t;let{item:n}=e;const r=ae(!1),l=ae(!1),a=ae(!1),o=me(null,r.setT),c=me(n.name,r.setT),u=me(n.count,r.setT),m=me(n.price,r.setT),h=function(e,s,t){const n=(0,i.useQueryClient)();return(0,i.useMutation)({mutationFn:async s=>await d("/api/store_item/".concat(e),s),onSuccess:e=>{var t;"success"==(null===(t=n.getQueryState("storeItems"))||void 0===t?void 0:t.status)&&n.setQueryData("storeItems",(s=>(null===s||void 0===s?void 0:s.map((s=>s.id==e.id?e:s)))||[])),null===s||void 0===s||s(e)},onError:t})}(n.id,v,(()=>v()));function v(e){o.set(null),c.set((null===e||void 0===e?void 0:e.name)||n.name),u.set((null===e||void 0===e?void 0:e.count)||n.count),m.set((null===e||void 0===e?void 0:e.price)||n.price),r.setF()}return(0,x.useEffect)(v,[n]),(0,g.jsxs)("div",{className:b(ke.root,r.v&&ke.changed),children:[h.isLoading&&(0,g.jsx)(Q,{block:!0,r:"0.5rem"}),""==(null===(s=o.v)||void 0===s?void 0:s.data)&&(0,g.jsx)(Q,{block:!0,r:"0.5rem"}),p(h,(e=>(0,g.jsxs)("div",{className:ke.error,children:[(0,g.jsx)("div",{children:e}),(0,g.jsx)("button",{onClick:()=>h.reset(),children:"\u041e\u041a"})]}))),(0,g.jsx)(ue,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440: "+c.v,itemId:n.id,mutationFn:be,open:l.v,close:l.setF}),(0,g.jsx)(ue,{title:"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043a\u043e\u043b-\u0432\u043e \u043d\u0430 1: "+c.v,itemId:n.id,mutationFn:fe,open:a.v,close:a.setF}),(0,g.jsx)("div",{className:ke.id,children:n.id}),(0,g.jsxs)("label",{className:ke.img,children:[(n.img||o.v)&&(0,g.jsx)("img",{src:(null===(t=o.v)||void 0===t?void 0:t.data)||n.img,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"}),(0,g.jsx)("input",{type:"file",style:{display:"none"},accept:"image/png, image/jpeg, image/gif",onChange:async e=>{var s,t;o.set({data:"",name:""}),o.set(await Ne(null===(s=e.target)||void 0===s||null===(t=s.files)||void 0===t?void 0:t[0],"")),e.target.value=""}})]}),(0,g.jsxs)("div",{className:ke.inputs,children:[(0,g.jsx)("div",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,g.jsx)("input",{type:"text",value:c.v,onChange:e=>c.set(e.target.value)}),(0,g.jsx)("div",{children:"\u0426\u0435\u043d\u0430"}),(0,g.jsx)("input",{type:"number",value:m.v,onChange:e=>m.set(e.target.valueAsNumber)}),(0,g.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),(0,g.jsx)("input",{type:"number",value:u.v,onChange:e=>u.set(e.target.valueAsNumber)})]}),(0,g.jsxs)("div",{className:ke.buttons,children:[!r.v&&(0,g.jsx)("button",{onClick:l.setT,children:(0,g.jsx)(ve,{})}),!r.v&&(0,g.jsx)("button",{className:ke.btnMinus,onClick:a.setT,children:"-1"}),r.v&&(0,g.jsx)("button",{onClick:()=>{h.mutate({name:c.v,count:u.v,price:m.v,img:o.v||void 0})},children:(0,g.jsx)(_e,{})}),r.v&&(0,g.jsx)("button",{onClick:()=>v(),children:(0,g.jsx)(xe,{})})]})]})}const Ce={items:"styles_items__34Dlt"};function Ie(){var e;const s=pe();return(0,g.jsxs)(P,{centeredPage:!0,gap:"0.5rem",children:[s.isLoading&&(0,g.jsx)(Q,{}),p(s),(0,g.jsx)("h1",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c"}),(0,g.jsx)(we,{}),(0,g.jsx)("div",{className:Ce.items,children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,g.jsx)(Ee,{item:e},e.id)))})]})}const Se={root:"styles_root__3AhF7",title:"styles_title__AMBJ6",map:"styles_map__lp2hs",btns:"styles_btns__P557j",active:"styles_active__OfSUZ",background:"styles_background__23nEs"},Re=t.p+"static/media/map1.ca18af71948a9623a630.png",Ue=t.p+"static/media/map2.464a3f5f8f6077c02934.png",qe=t.p+"static/media/map3.55e1bc6a8ad47813f4f2.png",Qe={root:"styles_root__cV7H9",active:"styles_active__RcNKa"};function Fe(e){let{curPage:s=""}=e;return(0,g.jsx)("div",{className:Qe.root,children:(0,g.jsxs)("div",{children:[(0,g.jsx)(I.rU,{className:"map"==s?Qe.active:"",to:"/",children:"\u041a\u0430\u0440\u0442\u0430"}),(0,g.jsx)(I.rU,{className:"timetable"==s?Qe.active:"",to:"/timetable",children:"\u041f\u043b\u0430\u043d"}),(0,g.jsx)(I.rU,{className:"quest"==s?Qe.active:"",to:"/quest",children:"\u041a\u0432\u0435\u0441\u0442"}),(0,g.jsx)(I.rU,{className:"store"==s?Qe.active:"",to:"/store",children:"\u041c\u0430\u0433\u0430\u0437"}),(0,g.jsx)(I.rU,{className:"race"==s?Qe.active:"",to:"/race",children:"\u0413\u043e\u043d\u043a\u0438"})]})})}function Te(){const e=me(0);return(0,g.jsxs)(P,{centeredPage:!0,headerColor:"#042e40",gap:"1em",className:Se.root,footer:(0,g.jsx)(Fe,{curPage:"map"}),children:[(0,g.jsx)("div",{className:Se.background}),(0,g.jsx)("h1",{className:Se.title,children:"Underparty"}),(0,g.jsx)("div",{className:Se.map,children:(0,g.jsx)("img",{src:[Re,Ue,qe][e.v],alt:"\u041a\u0430\u0440\u0442\u0430"})}),(0,g.jsxs)("div",{className:Se.btns,children:[(0,g.jsx)("button",{onClick:()=>e.set(0),className:0==e.v?Se.active:"",children:"\u042d\u0442\u0430\u0436 1"}),(0,g.jsx)("button",{onClick:()=>e.set(1),className:1==e.v?Se.active:"",children:"\u042d\u0442\u0430\u0436 2"}),(0,g.jsx)("button",{onClick:()=>e.set(2),className:2==e.v?Se.active:"",children:"\u041c\u0430\u0440\u043a\u0435\u0442"})]})]})}var Pe=t(741);function Me(e){let{code:s,scale:t=10,margin:n=1,color:i="#000000",colorBg:r="#ffffff"}=e;const[l,a]=(0,x.useState)("");return(0,x.useEffect)((()=>{s&&(a(""),Pe.toDataURL(s,{errorCorrectionLevel:"H",scale:t,margin:n,color:{dark:i,light:r}},((e,s)=>a(s))))}),[s,i,t,n,r]),(0,g.jsx)("img",{src:l,alt:s,style:{width:"100%"}})}const Ge={root:"styles_root__sSzNc",qr:"styles_qr__cpZSD"};function Be(e){let{role:s}=e;const t={worker:"\u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0430",manager:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u0433\u043e"}[s],n={worker:"\u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u043e\u043c",manager:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u043c"}[s];return t?(0,g.jsxs)(P,{centered:!0,gap:"1rem",height100:!0,className:Ge.root,children:[(0,g.jsxs)("h1",{children:["\u041f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u0434\u043e ",t]}),(0,g.jsx)("div",{className:Ge.qr,children:(0,g.jsx)(Me,{code:"promote_".concat(s),colorBg:"#ffffff00",scale:13})}),(0,g.jsxs)("h3",{children:["\u041f\u043e\u0441\u043b\u0435 \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044c \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0441\u044f ",n]})]}):(0,g.jsx)(P,{children:"\u041e\u0448\u0438\u0431\u043a\u0430!"})}const Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4QAAACBCAMAAACvtYQnAAAAAXNSR0IB2cksfwAAAAlwSFlzAABcRgAAXEYBFJRDQQAAAJZQTFRFAAAAAAAA////RjFPiEc7/+e9oKmd/8kOoEoAU1NQfFs1HRQhQCxIKBwuNSU84tSzjpWLWFlVs7WjEg0UHxANv72nDgcHwHUEb3JsZTQrqK6fY2RgzMasBwQFmqKX9+K62c6wLiA0PB8a7Nu3zYcHsWACJhQUSychNBwZoUwEXzEpAAAAeX12blEv3p0Jej81g4mAAAAA6QvGggAAADJ0Uk5TAP///////////////////////////////////////////////////////8P//////yzgQytLAAAG90lEQVR4nO3d21rbOBRA4WxICDQhJJzP0CmlnWmn7bz/y00syyfJhnwQJG17/RctDb0QqVdjHQijET6YyHg8Fok9jK0S+fTpU5pfk8j+/n6aQ0M0RBiUyNPTU5pDQzREGJTIdDpNc2iIhgiDIkL4+hdhlqCk+hURIVwmwXG/MiRCqNLfCGOPogMRwtXDCIUIoUoWoeS/xB7KthAhdOldhAkvjBpECBcRBkaEcBFhYEQIFxEGRoTw9WyzngihT58ilKT36Q2+iwI+IgyKCOGzET7HHsf7pX4nahAhXIpPzHgjJkKoRISBESFcaiMUmUwas7//fiiJkNVRNKndJ/Qi/CFECJVURzjJOqweSH1h1OB2FC4iDIwI4epbhDGHtBEihEtrhJJFeL33WE4M0/4uwgpzQvh0npghQvSIxgjtvej1Xm4doPyrIkFuR9GGCIMiQviIMCgihEvniRkToS3wICcKticyzAnhIsLAiBCuPkS4tCWq+BKIEC6V+4TSFaGk/3pIhHBpj/D+frVaR7haESG0UhihXRo1EV4eHNgXxFX2kT3JlnKJRAgXEQZGhHBpjfA4T8+J0HAOdieGCOFTt1lPhOgbxREul+sIl8v77KObmxuT4PExEUIbxRGu8n16s0Vxr+J1kAjRhgiDIkK41J2YsWuj9QgP3Olgyl8KEcJFhIERIVx9iPDm8tIkeHaW+r3oKBv/r1+/0h4iAlO3T9gS4VLJdNDg+wnhIsLAiBAuxRE2p4MP6U8HDSKEiwgDI0K4VEb45fb2Oo/w8udPk+Dt7YOGe9EREaKNrs16862ER+X7WvzRNB00iBA+ZRFmtRURrm5MhNfX15oi/Pr1q4qRIhxNEdoJYRGhPap2pCdBNuvRhgiDIkK4dJ2YqSL8eXn5J58QPj7mazKxx7YhkYuLCxVPNkLRGuGNpvOidSzMwKU8wmMV50XreCWES9c+oRfho7IEmRPCR4SBESFcWiNcLpd7e0dfVK3JGOwTwqU1QlXnRetYmIFLU4RFgo9ne3tnt2vq7kVH2Rfx9PSkbMz4aHo2622EZ9mL4JfJRGOCzAnRhgiDIkL4FEZ49vCgNEEiRBuNEZYvgxqG3USEcGk6MVMuzBwVEcYe0RsQIVwKI5xM1N6LjogQPiIMjAiRqyZTCvcJNSfIZj0KRBgNESIjcnX1bK8DPRE2b0ZTH20nIkQma+57V4TJXh/1CNXsTZiBimU/IkL0I8LYo9mQtCBCFCuiV/blpL5Zn/KNaRVhogP0iezs7JhfDPtHVkdBhMEQIbrYvcHfv6v06o8neoWUEaY5vDZVf02JPsMIqLZBXxkpiVDNmsyoM0KRH7FHhtiURxh7IJvrjFDR14CPYVdHRRa7FUn9AJuJMNGxdei6HeV+FEQYCBGiS9bfYRbeSfbRvIww7dvR+mE7JexyqOxUvxmsj+LVCBO9QJIdWJcXI5Tm34w1RsShNUJ1iBAd1v/+WXULkausufM8SONc8k9yTWxB54ww83d2dq3aoGWaOCgiRBgGEaKDyCzLbSan48JfeZUNXBPvZiPMUjtpyXB/f79YJyXC4bDb8ptGWP1PjbfYMEKDCIeCCIMiQjiqtc8NIyyXSrk83iZPS1pWR4sl0vofeZYHgAhDI0I0FGfSarm1rY46HRaVcoG8Re12VLwEi9tRIhwOIgyPCNFAhOERIRxi38ainln92NquPbnmRcic8I1e3KxnTjhERBgaEcLnRNZ0UjbXiJBr482IED4iDIoI0Wp99zmftyQ4n8/Oz02E5+fF3yDC93kxwun04uKCCAepPLbmEPlnXK2FSjVFjD1gxV6LkNXRgSLCcIgQbewS6d2GEcYerm6vfT9h8wGe7aEgwoCIEL7yCMzzYuGszpycfLu6IsKtMj9/qbXA9eNEOFDVObQ7/6jaSf19uYlwC16M0PsUz/YwEGFQRAhXlWBrhMVyaLWjz2XxXubHoLVE2PYoz/YQEGFwRAiX6cvcb7YdmtndnZV2dw8PD7ks3stE6N14TqdEOFyvRei8KsYern5mk8L8iHrbmdFIsNzH4PkejHWEv8d3d1WE89azpPM5EW4BEaKFe2wti61lfsiJta0oCisjtI9Ks0oiHBbv7CgRfqANIqy9C0bkwSKgdYVFhoez2be177NGl7PZjHeW2Yr2CEfN8IhwkMqFGbtB77zvaPWWo7EHql3xo9Hs794nvI8xGCLm7Ohi8XyavwPw6Wl1mHSxOLWPcmG8FxGim5kH1nfvRT6Xr4O80eH2SDUPbP9E6ycxBEQYCBGiW7Fx34xwVn+USwP4SF6EUm5NECEQiBPh5zUiBIIqi7P7VfXNZOYpQABECESXRUhuQERECESWRxh7FMCgkSAQGRECAAC85H9dUmyofnI0YwAAAABJRU5ErkJggg==",De="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAAuCAYAAAD0kU3xAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtElEQVR4nO2cUY7DIAxEN6veJceMesyeJv2iclEIxLHBTOd9tRIEyGADNu2yb+v+R6bnf3QHiA0UEoSH/LI8X6P6QRTs2/r5TIsEgUKCQCFBoJAgUEgQKCQIj3qRfsjtdM7Z0eisntUzjuq2tnv0jFTX6sjXxSL3ba0O+upL0fZD23ZeRtPfVEfWtRq3u0XWZp4cyFmZUrlafc0ESs85Ei9q0GToGnl3NnrUl0JZuNNeuFqk9TrgzVE/l+erKngiL9dz3G4WGXXmouK+RlrMylkseiQuFklr7I/rZoeW1A9zIWmNY3CzSFpjXxhrBcFUyNnOjUjQIkGgkCBUAwItQW1Zbma3OmrHrU3fSaoWWco0kFg0hehk4DhyKucuLam2Hu1q2mteI9HdaiRyL9girGqzQxcbj0tCcr2My+U0VinR6sXIZO1MqPKRSczWo0kvftlLTBsQ0IqGKrb6hoB0sVpr1LppjbvNryBG8CAlNJ5u+AVlefWwJGrkl26BhZe45VotX/AIsTRtWt1Bsh7vIv8MAn3mo8FfLANCIUGgkCBQSBAoJAhf50jUqMcvQIsEgUKC8AZ00sAcaiLsEQAAAABJRU5ErkJggg==",Je={root:"styles_root__CEdGL",background:"styles_background__dxeLP",title:"styles_title__6wHPv",body:"styles_body__o-6ZK",items:"styles_items__yJ9sj",quests:"styles_quests__58NxQ",quest:"styles_quest__65tbN",questDescription:"styles_questDescription__bMEbk",btn:"styles_btn__lL+tu"},He={root:"styles_root__sa0ap",header:"styles_header__thHuO",body:"styles_body__27+PL",body_scroll:"styles_body_scroll__SwZun",body_arrows:"styles_body_arrows__y8hcc"},Oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE8AAAAaAQMAAADMuZOBAAAAAXNSR0IB2cksfwAAAAlwSFlzAABcRgAAXEYBFJRDQQAAAAZQTFRFAAAAAAAApWe5zwAAAAJ0Uk5TAP9bkSK1AAAAVklEQVR4nGNgIB/w///nwAhnPmCGMwvYoKz//yx4wEwgWSdjAWfyFcCZ7A/gTOYDID1/0JjsCXAmH8IEGRk404IPxkwoYIczDzA3QN3wsIERxnxAog8BPG0j3jpV/PcAAAAASUVORK5CYII=";function Ve(e){let{children:s,title:t="Underparty",footer:n,className:i,disableScroll:r=!1,onClose:l}=e;const a=(0,x.useRef)(null),o=ae(!0);return(0,x.useEffect)((()=>{a.current&&o.set(a.current.scrollHeight>a.current.clientHeight)}),[s,a.current]),(0,g.jsxs)("div",{className:b(He.root,i),children:[(0,g.jsxs)("div",{className:He.header,children:[(0,g.jsx)("div",{children:t}),(0,g.jsx)("button",{onClick:l,children:(0,g.jsx)("img",{src:Oe,alt:"close"})})]}),(0,g.jsx)("div",{className:b(He.body,!r&&He.body_scroll,o.v&&!r&&He.body_arrows),children:(0,g.jsx)("div",{ref:a,children:s})}),(0,g.jsx)("div",{children:n})]})}function ze(){var e,s,t;const n=u(),r=function(){const e=(0,i.useQueryClient)();return()=>e.invalidateQueries("user")}(),l=me(null),[a,o]=(0,x.useState)(!1),c=re();return(0,g.jsxs)(P,{centeredPage:!0,headerColor:"#545f82",gap:"1em",className:Je.root,footer:(0,g.jsx)(Fe,{curPage:"quest"}),children:[(0,g.jsx)("div",{className:Je.background}),(0,g.jsx)("h1",{className:Je.title,children:"Underparty"}),c.isLoading&&(0,g.jsx)(Q,{}),n.isFetching&&(0,g.jsx)(Q,{}),(0,g.jsx)(Ve,{className:Je.body,title:"\u041a\u0432\u0435\u0441\u0442\u044b",footer:(0,g.jsx)("img",{className:Je.items,src:Le,alt:""}),onClose:()=>l.set(null),children:l.v?(0,g.jsxs)("div",{className:Je.questDescription,children:[(0,g.jsxs)("div",{className:Je.quest,onClick:()=>l.set(null),children:[(0,g.jsx)("span",{children:l.v.name}),null!==(e=n.data)&&void 0!==e&&e.complited_quests.includes(l.v.id)?(0,g.jsx)("span",{className:"material_symbols",children:"done"}):(0,g.jsxs)("span",{children:[l.v.reward,"G"]})]}),(0,g.jsx)("div",{children:l.v.description||"\u041d\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}),(0,g.jsx)(I.rU,{to:"/scanner",className:Je.btn,children:(0,g.jsx)("img",{src:De,alt:"\u0421\u0434\u0430\u0442\u044c"})})]}):(0,g.jsxs)("div",{className:Je.quests,children:[p(c),null===(s=c.data)||void 0===s?void 0:s.map((e=>{var s;return(0,g.jsxs)("button",{className:Je.quest,onClick:()=>l.set(e),children:[(0,g.jsx)("span",{children:e.name}),null!==(s=n.data)&&void 0!==s&&s.complited_quests.includes(e.id)?(0,g.jsx)("span",{className:"material_symbols",children:"done"}):(0,g.jsxs)("span",{children:[e.reward,"G"]})]},e.id)}))]})}),(0,g.jsx)(W,{title:"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430",open:a,close:()=>{var e;o(!1),null!==(e=n.data)&&void 0!==e&&e.auth&&r()},children:null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.auth?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Me,{code:"user_".concat(n.data.id),colorBg:"#ffffff00",scale:13}),(0,g.jsx)("h3",{children:"\u041f\u043e\u043a\u0430\u0436\u0438\u0442\u0435 qr-\u043a\u043e\u0434 \u043a\u0432\u0435\u0441\u0442\u043e\u0432\u0438\u043a\u0443"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{children:"\u0414\u043b\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u0432\u0435\u0441\u0442\u043e\u0432 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443."}),(0,g.jsx)("p",{children:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u043f\u0440\u0430\u0432\u043e\u043c \u0432\u0435\u0440\u0445\u043d\u0435\u043c \u0443\u0433\u043b\u0443."})]})})]})}function We(e,s){return(0,i.useMutation)({mutationFn:async e=>await d("/api/scanner",e),onSuccess:e,onError:s})}const Ye={root:"styles_root__QdJnV",msg:"styles_msg__plnAU",msg_visible:"styles_msg_visible__G0rDm",msg_dimmed:"styles_msg_dimmed__0Xs60",bar:"styles_bar__VuYbs",bar_full:"styles_bar_full__poY0b"},Ze={error:"styles_error__EtK3I",video:"styles_video__b88Zl"},Ke=t.p+"static/media/beep.38f199e084efe5461ffd.mp3";var Xe=t(1096);let $e=e=>{},es=()=>{},ss=!1,ts=null,ns=null;function is(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(!ns){ts=document.createElement("div"),document.body.appendChild(ts),ts.style.display="flex",ts.style.backgroundColor="black";const e=document.createElement("video");ts.appendChild(e),ns=new Xe.Z(e,(e=>$e(e.data)),{highlightScanRegion:!0,maxScansPerSecond:10})}(0,x.useEffect)((()=>(setTimeout((()=>{var e;return null===(e=ns)||void 0===e?void 0:e.start().catch((()=>{setTimeout((()=>{var e;null===(e=ns)||void 0===e||e.start().catch((()=>es()))}),250)}))}),100),()=>{var e;null===(e=ns)||void 0===e||e.stop()})),[]);const[t,n]=(0,x.useState)(!1),[i,r]=(0,x.useState)(""),[l,a]=(0,x.useState)(ss),o=function(e){const[s]=(0,x.useState)((()=>{const s=new Audio(e);return s.preload="auto",s}));return()=>{s.currentTime=0,s.play()}}(Ke);return $e=i=>{t||e||(r(i),n(!0),o(),setTimeout((()=>{r(""),n(!1)}),s))},es=()=>{ss=!0,a(!0)},l?{scanned:i,scanner:(0,g.jsxs)("div",{className:Ze.error,children:[(0,g.jsx)("h1",{children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435"}),(0,g.jsx)("p",{children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043c\u0435\u0440\u044b \u044d\u0442\u043e\u043c\u0443 \u0441\u0430\u0439\u0442\u0443 \u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0443, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0442\u0435."}),(0,g.jsx)("p",{children:"\u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})]})}:{scanned:i,scanner:(0,g.jsx)("div",{children:(0,g.jsx)("div",{ref:e=>{e&&(e.innerHTML="",e.appendChild(ts))},className:Ze.video})})}}function rs(e){let{useMutation:s,onScan:t,formatMsg:n,onRes:i,className:r,pause:l}=e;const[a,o]=(0,x.useState)(""),[c,d]=(0,x.useState)(""),u=(0,x.useRef)(null),m=s((e=>{o(n(e)),d(""),_(),null===i||void 0===i||i(e)}),(e=>{o(""),d(y(e)),_()})),{scanned:h,scanner:v}=is(!m.isIdle||l);function _(){var e;setTimeout((()=>m.reset()),1e3),null===(e=u.current)||void 0===e||e.classList.add(Ye.bar_full),setTimeout((()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.classList.remove(Ye.bar_full)}),100)}return(0,x.useEffect)((()=>{if(""==h||!m.isIdle)return;o(""),d("");const e=t(h);e?m.mutate(e):d("\u041d\u0435 \u043e\u043f\u043e\u0437\u043d\u0430\u043d\u043e")}),[h]),(0,g.jsxs)("div",{className:b(Ye.root,r),children:[m.isLoading&&(0,g.jsx)(Q,{}),v,(0,g.jsxs)("div",{className:b(Ye.msg,(a||c)&&Ye.msg_visible,(a||c)&&m.isIdle&&Ye.msg_dimmed),children:[(0,g.jsx)("h2",{children:a}),(0,g.jsx)("h2",{children:c})]}),(0,g.jsx)("div",{ref:u,className:Ye.bar})]})}const ls={root:"styles_root__CrawG",background:"styles_background__sRVhE","anim-background":"styles_anim-background__FEgkK",body:"styles_body__WfmVk"};function as(){return(0,g.jsxs)(P,{centeredPage:!0,headerColor:"#51185b",gap:"1em",className:ls.root,footer:(0,g.jsx)(Fe,{}),children:[(0,g.jsx)("div",{className:ls.background}),(0,g.jsx)(Ve,{title:"QR-\u0410\u043a\u0442\u0438\u0432\u0430\u0442\u043e\u0440",disableScroll:!0,className:ls.body,children:(0,g.jsx)(rs,{useMutation:We,onScan:e=>null,formatMsg:e=>{var s;return null!==(s={ok:"",wrong:"\u041d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 QR",error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}[e.res])&&void 0!==s?s:e.res},onRes:e=>{}})})]})}const os="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAAuCAYAAAD0kU3xAAAACXBIWXMAAAsTAAALEwEAmpwYAAACD0lEQVR4nO2ca3KDMAyEoZO7cEwmx8xpyI+OW8exZEkIg8V+M5k8wJh4vVgSbeZtXbYJDM/P2ScAfICQQXjkb+bn66zzAAa2dfl7DUcGAUIGAUIGAUIGAUIGAUIG4dHexYc8VKbSHGofrq10GwfVrnaeknPU9sn1J8XsyG1dqg9qX8vxtW3zNr3baam1tRwnYXIkNYPSQKCw0B+1kLmI5QxKn0HM/qiELEWsOfKqYu5ZzzTHpvo4eizUa2Q6IWqxtghYrk3z83WpSTACpmDHa4EGfuzOI+/iHG1E2xsUBIJgilrLtTA959ukx8q5i7uPQOXIUrD0upaSQJS+mEt0Scwjw/orMMp3Mqcf0/Rdpqvt482ZA3vlq4zJkfllldrGsVf0UVzSk113PzxmaC8nR6cpJDf7rQOvWVc59x/N1frkxpsVsnVf7i4R6gjfr+lIyhG9nRI9Ok5Yb46TUWtZT02pRnp41VtrUbCkzQgu8UA6Pqr0o5b8n7mGgX/MlZ3a59EYyfkiIanSnKauaqX190DgF1JIyn1lac5jxtZKfS3hIOwnooJAKV6ZdvQaVGnOeUfYSyvlEk5Ub+4szjR9V76o8RDlka1U4+6D7Yn16iYOdiixJCJahM7bSKLHcn+uf+o9dwxJPxa8IuM5/zEIOGss8B/LAYGQQYCQQYCQQYCQQfjII1H2Ghc4MggQMghv++Fo+AHadn0AAAAASUVORK5CYII=",cs={root:"styles_root__0CejE",background:"styles_background__PMiwv",body:"styles_body__c+IRT",title:"styles_title__u3Xt9",btn:"styles_btn__LjRSK",items:"styles_items__n-Fvc",item:"styles_item__zIxt2",item__img:"styles_item__img__r3iEr",item__desc:"styles_item__desc__wbcAM",item_few:"styles_item_few__nkL6C",item_ended:"styles_item_ended__Mn60C"};function ds(){var e;const s=pe();return(0,g.jsxs)(P,{centeredPage:!0,headerColor:"#0a424c",gap:"1em",className:cs.root,footer:(0,g.jsx)(Fe,{curPage:"store"}),children:[s.isLoading&&(0,g.jsx)(Q,{}),(0,g.jsx)("div",{className:cs.background}),(0,g.jsx)("h1",{className:cs.title,children:"Underparty"}),(0,g.jsxs)("div",{className:cs.body,children:[(0,g.jsx)(Ve,{title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d",className:cs.list,children:(0,g.jsxs)("div",{className:cs.items,children:[p(s),null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,g.jsxs)("div",{className:b(cs.item,e.count<=15&&e.count>0&&cs.item_few,0==e.count&&cs.item_ended),children:[(0,g.jsx)("div",{className:cs.item__img,children:e.img?(0,g.jsx)("img",{src:e.img,alt:"\u0422\u043e\u0432\u0430\u0440"}):(0,g.jsx)("div",{})}),(0,g.jsxs)("div",{className:cs.item__desc,children:[(0,g.jsx)("span",{children:e.name}),(0,g.jsxs)("span",{children:[e.price," G"]})]})]},e.id)))]})}),(0,g.jsx)(I.rU,{to:"/scanner",className:cs.btn,children:(0,g.jsx)("img",{src:os,alt:"\u041a\u0443\u043f\u0438\u0442\u044c"})})]})]})}const us={root:"styles_root__E5y+5",title:"styles_title__3QqY9",body:"styles_body__nvDgq",list:"styles_list__6yPeV",items:"styles_items__UxmDm",btns:"styles_btns__Ctsik",active:"styles_active__1eH-B",background:"styles_background__f5ayg"};function ms(){const e=ae(!0),s=ae(!0),t=ae(!0);return(0,g.jsxs)(P,{centeredPage:!0,headerColor:"#4d0709",className:us.root,footer:(0,g.jsx)(Fe,{curPage:"timetable"}),children:[(0,g.jsx)("div",{className:us.background}),(0,g.jsx)("h1",{className:us.title,children:"Underparty"}),(0,g.jsxs)("div",{className:us.body,children:[e.v?(0,g.jsx)(Ve,{className:us.list,title:"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 | "+(s.v?"\u0413\u043b\u0430\u0432\u043d\u0430\u044f":"\u0412\u0442\u043e\u0440\u0430\u044f")+" \u0441\u0446\u0435\u043d\u0430",footer:(0,g.jsxs)("div",{className:us.btns,children:[(0,g.jsx)("button",{onClick:s.setT,className:s.v?us.active:"",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,g.jsx)("button",{onClick:s.setF,className:s.v?"":us.active,children:"\u0412\u0442\u043e\u0440\u0430\u044f"})]}),children:(0,g.jsx)("div",{className:us.items,children:(s.v?hs:vs).map(((e,s)=>(0,g.jsx)("div",{children:e},s)))})}):(0,g.jsx)(Ve,{className:us.list,title:"\u0422\u0443\u0440\u043d\u0438\u0440\u044b | "+(t.v?"Under":"\u0420\u0435\u0442\u0440\u043e"),footer:(0,g.jsxs)("div",{className:us.btns,children:[(0,g.jsx)("button",{onClick:t.setT,className:t.v?us.active:"",children:"Under"}),(0,g.jsx)("button",{onClick:t.setF,className:t.v?"":us.active,children:"\u0420\u0435\u0442\u0440\u043e"})]}),children:(0,g.jsx)("div",{className:us.items,children:(t.v?_s:xs).map(((e,s)=>(0,g.jsx)("div",{children:e},s)))})}),(0,g.jsxs)("div",{className:us.btns,children:[(0,g.jsx)("button",{onClick:e.setT,className:e.v?us.active:"",children:"\u041f\u043b\u0430\u043d"}),(0,g.jsx)("button",{onClick:e.setF,className:e.v?"":us.active,children:"\u0422\u0443\u0440\u043d\u0438\u0440"})]})]})]})}const hs=["12:50 - \u0426\u0435\u0440\u0435\u043c\u043e\u043d\u0438\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f","13:00 - Shima Nori Piano Performance","13:45 - \u041a\u043e\u0441\u043f\u043b\u0435\u0439 \u0434\u0435\u0444\u0438\u043b\u0435","14:45 - \u0421\u043b\u0443\u0427\u0430\u0439\u043d\u043e\u0441\u0442\u044c","15:30 - \u0410\u0443\u043a\u0446\u0438\u043e\u043d","16:00 - UnderEvent \u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b Game Jam","16:30 - \u0413\u043e\u043d\u043a\u0438 \u0443\u043b\u0438\u0442\u043e\u043a","17:00 - \u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f","17:30 - \u0424\u0438\u043d\u0430\u043b \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u0432: Undercards & UV Battles","18:30 - \u041d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435","19:00 - Undertale \u0410\u043d\u0438\u043c\u0430\u0446\u0438\u0438","19:55 - \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u0446\u0435\u043d\u044b"],vs=["12:00 - \u041e\u0442\u0432\u0435\u0442\u044b \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043e\u0442 \u042e\u0442\u0443\u0431\u0435\u0440\u043e\u0432","12:40 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f","13:00 - The Jackbox Party Pack \u0441 \u042e\u0442\u0443\u0431\u0435\u0440\u0430\u043c\u0438","14:00 - Undertale Quiz","14:30 - 84 Sans AU Quiz","15:00 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f","15:30 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 Undertale AU","16:30 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0418\u0433\u0440","17:30 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f","18:00 - Everybody Switch","19:00 - \u0414\u0438\u0441\u043a\u043e\u0442\u0435\u043a\u0430","19:55 - \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u0446\u0435\u043d\u044b"],_s=["14:00 - Undercards","15:00 - Underverse Battles","11:30 - 17:00 - Endless Sans","11:30 - 17:00 - Unfair Undyne"],xs=["13:00 - Nes - TMNT: Tournament Fighters","14:00 - Sega - Ultimate Mortal Kombat 3","15:00 - Snes - Super Tetris 3","16:00 - Ps1 - Tekken 3"],js={user:"styles_user__WUZvf",title:"styles_title__Gd1jL",toggle:"styles_toggle__qlIwC",toggleInp:"styles_toggleInp__fGE-7",userInfo:"styles_userInfo__vgBlw",operations:"styles_operations__MGBbv"};function gs(){var e;L("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438");const s=(0,i.useQuery)("users",(async()=>await c("/api/users")));return(0,g.jsxs)(P,{centeredPage:!0,gap:8,styles:{fontFamily:"'PT Sans', Arial"},children:[s.isLoading&&(0,g.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),p(s),null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,g.jsxs)("div",{className:js.user,children:[(0,g.jsx)("input",{type:"checkbox",className:js.toggleInp,id:"user".concat(e.id)}),(0,g.jsxs)("label",{className:js.title,htmlFor:"user".concat(e.id),children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{children:e.login}),(0,g.jsx)("div",{style:{color:"blue"},children:e.id}),(0,g.jsx)("div",{children:"|"}),(0,g.jsx)("div",{children:e.name})]}),(0,g.jsxs)("div",{children:[e.deleted&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{color:"tomato"},children:"deleted"}),(0,g.jsx)("div",{children:"|"})]}),(0,g.jsx)("span",{children:e.roles.join(", ")}),(0,g.jsx)("div",{className:js.toggle})]})]}),(0,g.jsx)("div",{className:js.userInfo,children:(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{children:"Operations"}),(0,g.jsx)("div",{className:js.operations,children:e.operations.map(((e,s)=>(0,g.jsx)("div",{children:ys(e)},s)))})]})})]},e.id)))]})}function ys(e){const s={page:"#990099",add:"#008000",get:"#008000",change:"#006fb3",delete:"#b30000"};for(const t in s)if(e.startsWith(t))return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{style:{color:s[t]},children:t}),(0,g.jsx)("span",{children:e.slice(t.length)})]});return(0,g.jsx)("span",{children:e})}const ps={btn:"styles_btn__w12Ul"};function fs(){return(0,g.jsxs)(P,{centered:!0,gap:"1rem",children:[v("manage_store")&&(0,g.jsx)(I.rU,{to:"/manage_store",className:ps.btn,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c"}),v("manage_quest")&&(0,g.jsx)(I.rU,{to:"/manage_quest",className:ps.btn,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430\u043c\u0438"}),v("page_worker_quest")&&(0,g.jsx)(I.rU,{to:"/worker_quest",className:ps.btn,children:"\u0414\u043b\u044f \u043a\u0432\u0435\u0441\u0442\u043e\u0432\u0438\u043a\u043e\u0432"}),v("page_worker_store")&&(0,g.jsx)(I.rU,{to:"/worker_store",className:ps.btn,children:"\u0414\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u043e\u0432"}),v("promote_worker")&&(0,g.jsx)(I.rU,{to:"/promote_worker",className:ps.btn,children:"\u041f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0434\u043e \u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0430"}),v("promote_manager")&&(0,g.jsx)(I.rU,{to:"/promote_manager",className:ps.btn,children:"\u041f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0434\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u0433\u043e"})]})}const bs={root:"styles_root__Ch43Y",quests:"styles_quests__CJF3F",qr:"styles_qr__CpwFg",quest:"styles_quest__la9IG"};function As(){var e,s,t,n;const i=re(),r=ae(!1),l=me(null,r.setT);return(0,g.jsxs)(P,{centered:!0,gap:"1rem",height100:!0,className:bs.root,children:[i.isLoading&&(0,g.jsx)(Q,{}),p(i),(0,g.jsx)("h2",{children:"\u041a\u0430\u043a\u043e\u0439 \u043a\u0432\u0435\u0441\u0442 \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435?"}),(0,g.jsx)("div",{className:bs.quests,children:null===(e=i.data)||void 0===e?void 0:e.map((e=>(0,g.jsx)("button",{onClick:()=>l.set(e),children:e.name},e.id)))}),(0,g.jsxs)(W,{title:"\u041a\u043e\u0434 \u043a\u0432\u0435\u0441\u0442\u0430",open:r.v,close:r.setF,children:[(0,g.jsx)("div",{className:bs.qr,children:(0,g.jsx)(Me,{code:"quest_".concat(null===(s=l.v)||void 0===s?void 0:s.id),colorBg:"#ffffff00",scale:13})}),(0,g.jsxs)("div",{className:bs.quest,children:[(0,g.jsx)("div",{children:null===(t=l.v)||void 0===t?void 0:t.name}),(0,g.jsxs)("div",{children:[null===(n=l.v)||void 0===n?void 0:n.reward," G"]})]}),(0,g.jsx)("h3",{children:"QR-\u043a\u043e\u0434 \u0434\u043b\u044f \u0437\u0430\u0447\u0451\u0442\u0430 \u043a\u0432\u0435\u0441\u0442\u0430"})]})]})}const Ns={items:"styles_items__ph2vL",item:"styles_item__t2Q7S",item__img:"styles_item__img__9MSeY",item__desc:"styles_item__desc__vFBVd",qr:"styles_qr__Sgcly",item_small:"styles_item_small__EPwTh"};function ws(){var e,s,t,n,i,r;const l=pe(),a=ae(!1),o=me(null,a.setT);return(0,g.jsxs)(P,{centeredPage:!0,gap:"1rem",height100:!0,children:[(0,g.jsx)("h1",{children:"\u041f\u0440\u043e\u0434\u0430\u0436\u0430"}),l.isLoading&&(0,g.jsx)(Q,{}),p(l),(0,g.jsx)("div",{className:Ns.items,children:null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.map((e=>(0,g.jsxs)("button",{className:Ns.item,onClick:()=>o.set(e),children:[(0,g.jsx)("div",{className:Ns.item__img,children:e.img?(0,g.jsx)("img",{src:e.img,alt:"\u0422\u043e\u0432\u0430\u0440"}):(0,g.jsx)("div",{})}),(0,g.jsxs)("div",{className:Ns.item__desc,children:[(0,g.jsx)("span",{children:e.name}),(0,g.jsxs)("span",{children:[e.price," G"]})]})]},e.id)))}),(0,g.jsxs)(W,{title:"\u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430",open:a.v,close:a.setF,children:[(0,g.jsx)("div",{className:Ns.qr,children:(0,g.jsx)(Me,{code:"item_".concat(null===(s=o.v)||void 0===s?void 0:s.id),colorBg:"#ffffff00",scale:13})}),(0,g.jsxs)("div",{className:Ns.item_small,children:[(0,g.jsx)("div",{className:Ns.item__img,children:null!==(t=o.v)&&void 0!==t&&t.img?(0,g.jsx)("img",{src:null===(n=o.v)||void 0===n?void 0:n.img,alt:"\u0422\u043e\u0432\u0430\u0440"}):(0,g.jsx)("div",{})}),(0,g.jsx)("div",{children:null===(i=o.v)||void 0===i?void 0:i.name}),(0,g.jsxs)("div",{children:[null===(r=o.v)||void 0===r?void 0:r.price," G"]})]}),(0,g.jsx)("h3",{children:"QR-\u043a\u043e\u0434 \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0442\u043e\u0432\u0430\u0440\u0430"})]})]})}function ks(){var e,s;const t=u();function i(e,s,i){var r;return(0,g.jsx)(n.AW,{path:s,element:null!==(r=t.data)&&void 0!==r&&r.auth?null==e||h(t,e)?i:(0,g.jsx)(G,{}):(0,g.jsx)(n.Fg,{to:"/"})})}return(0,g.jsxs)("div",{className:"root",children:[(0,g.jsx)(j,{}),(0,g.jsx)(w,{}),t.isLoading&&(0,g.jsx)(_.Z,{}),p(t),t.isSuccess&&(0,g.jsxs)(n.Z5,{children:[(0,g.jsx)(n.AW,{path:"/",element:null!==(e=t.data)&&void 0!==e&&e.auth?(0,g.jsx)(n.Fg,{to:"/map"}):(0,g.jsx)(X,{})}),(0,g.jsx)(n.AW,{path:"/auth",element:null!==(s=t.data)&&void 0!==s&&s.auth?(0,g.jsx)(n.Fg,{to:"/"}):(0,g.jsx)(O,{})}),(0,g.jsx)(n.AW,{path:"/timetable",element:(0,g.jsx)(ms,{})}),(0,g.jsx)(n.AW,{path:"/quest",element:(0,g.jsx)(ze,{})}),(0,g.jsx)(n.AW,{path:"/store",element:(0,g.jsx)(ds,{})}),(0,g.jsx)(n.AW,{path:"/map",element:(0,g.jsx)(Te,{})}),i(null,"/scanner",(0,g.jsx)(as,{})),i("page_worker","/worker",(0,g.jsx)(fs,{})),i("manage_store","/manage_store",(0,g.jsx)(Ie,{})),i("manage_quest","/manage_quest",(0,g.jsx)(ye,{})),i("page_worker_quest","/worker_quest",(0,g.jsx)(As,{})),i("page_worker_store","/worker_store",(0,g.jsx)(ws,{})),i("promote_worker","/promote_worker",(0,g.jsx)(Be,{role:"worker"})),i("promote_manager","/promote_manager",(0,g.jsx)(Be,{role:"manager"})),i("page_debug","/debug",(0,g.jsx)(Y,{})),i("page_debug","/log",(0,g.jsx)(ne,{})),i("page_users","/users",(0,g.jsx)(gs,{})),(0,g.jsx)(n.AW,{path:"*",element:(0,g.jsx)(M,{})})]})]})}}}]);
//# sourceMappingURL=144.470cf2d4.chunk.js.map