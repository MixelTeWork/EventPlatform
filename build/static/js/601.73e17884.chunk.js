"use strict";(self.webpackChunkevent_platform=self.webpackChunkevent_platform||[]).push([[601],{8011:(e,s,t)=>{t.r(s),t.d(s,{default:()=>At});var n=t(7689),a=t(1933);class l extends Error{}async function i(e,s,t){const n=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:void 0===t?null:JSON.stringify(t)});if(!n.ok)throw new l((await n.json()).msg);return n}function r(e,s){return i("POST",e,s)}function o(e,s){return i("DELETE",e,s)}async function c(e,s,t){const n=await i(e,s,t);return await n.json()}function d(e,s){return c("GET",e,s)}function u(e,s){return c("POST",e,s)}function m(){return(0,a.useQuery)("user",h)}async function h(){const e=await fetch("/api/user"),s=await e.json();if(401==e.status)return{auth:!1,id:"",balance:0,roles:[],name:"",last_name:"",photo:"",operations:[],group:-1};if(!e.ok)throw new l(s.msg);const t=s;return t.auth=!0,t}function v(e,s){var t,n;return!(null===(t=e.data)||void 0===t||!t.auth||null===(n=e.data)||void 0===n||!n.operations.includes(s))}function x(e){return v(m(),e)}var g=t(5086),j=t(2791);function _(){const{pathname:e}=(0,n.TH)();return(0,j.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null}var p=t(184);function y(e,s){const t=e instanceof l?e.message:"\u041e\u0448\u0438\u0431\u043a\u0430";return s?s(t):t}function b(e,s,t){if(!e.isError)return null;return(s||f)(y(e.error,t))}function f(e){return(0,p.jsx)("h3",{style:{color:"tomato",textAlign:"center"},children:e})}function N(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e=>!!e)).join(" ")}const C={root:"styles_root__hzHjz",visible:"styles_visible__6aD-n",close:"styles_close__3L8iW",message:"styles_message__oF8zk"};let w="";function k(){const[e,s]=(0,j.useState)("");return(0,j.useEffect)((()=>{const e=setInterval((()=>{const e=function(e){let s=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return s?decodeURIComponent(s[1]):void 0}("MESSAGE_TO_FRONTEND");e!=w&&(w=e||"",s(w))}),1e3);return()=>{clearInterval(e)}}),[s]),(0,p.jsxs)("div",{className:N(C.root,""!=e&&C.visible),children:[(0,p.jsx)("button",{className:C.close,onClick:()=>s("")}),(0,p.jsx)("div",{className:C.message,children:A(e)})]})}function A(e){return'"'==e.at(0)&&(e=e.slice(1)),'"'==e.at(-1)&&(e=e.slice(0,-1)),e}const E={root:"styles_root__4DGhY"};function I(){const e=(0,n.s0)();return(0,p.jsx)("div",{className:E.root,children:(0,p.jsx)("button",{onClick:()=>e(-1),className:"button button_light",children:"\u041d\u0430\u0437\u0430\u0434"})})}var S=t(1087);const F={root:"styles_root__Zvl9c",home:"styles_home__o+-s7",block:"styles_block__a1SM7",balance:"styles_balance__PLLCC",user:"styles_user__0ltHf",img:"styles_img__vhWmb",menu:"styles_menu__WWgPh",menuVisible:"styles_menuVisible__mMGZn"},Q=t.p+"static/media/avatar.b8d0a59b442a96cc65e6.png";const L={root:"styles_root__BdzzK",spinner:"styles_spinner__rlI86","lds-ring":"styles_lds-ring__jnLuB"};function B(e){let{color:s,zIndex:t,block:n,r:a=0}=e;return(0,p.jsx)("div",{className:L.root,style:{position:n?"absolute":"fixed",borderRadius:a},children:(0,p.jsxs)("div",{className:L.spinner,style:{"--color":s,zIndex:t},children:[(0,p.jsx)("div",{}),(0,p.jsx)("div",{}),(0,p.jsx)("div",{}),(0,p.jsx)("div",{})]})})}function q(){return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,p.jsx)("path",{d:"M240-200h120v-200q0-17 11.5-28.5T400-440h160q17 0 28.5 11.5T600-400v200h120v-360L480-740 240-560v360Zm-80 0v-360q0-19 8.5-36t23.5-28l240-180q21-16 48-16t48 16l240 180q15 11 23.5 28t8.5 36v360q0 33-23.5 56.5T720-120H560q-17 0-28.5-11.5T520-160v-200h-80v200q0 17-11.5 28.5T400-120H240q-33 0-56.5-23.5T160-200Zm320-270Z"})})}function R(e){var s,t,l,i;let{homeBtn:o=!1}=e;const[c,d]=(0,j.useState)(!1),u=(0,n.s0)(),h=function(e){const s=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>await r("/api/logout"),onSuccess:()=>{s.setQueryData("user",(e=>({auth:!1,id:"",balance:0,roles:[],name:"",last_name:"",photo:"",operations:[],group:-1}))),null===e||void 0===e||e()}})}((()=>{d(!1)})),x=m();return(0,p.jsxs)("div",{className:F.root,children:[(0,p.jsx)(S.rU,{to:"/",className:F.home,children:o&&(0,p.jsx)(q,{})}),(0,p.jsxs)("span",{className:F.block,children:[(0,p.jsxs)("div",{className:N(F.balance,"title"),children:[(null===(s=x.data)||void 0===s?void 0:s.balance)||0,"\u041c"]}),(0,p.jsxs)("button",{className:N(F.user,"title"),onClick:()=>{var e;return null!==(e=x.data)&&void 0!==e&&e.auth?d((e=>!e)):u("/")},children:[(0,p.jsx)("span",{children:null!==(t=x.data)&&void 0!==t&&t.auth?null===(l=x.data)||void 0===l?void 0:l.name:"\u0412\u043e\u0439\u0442\u0438"}),(0,p.jsx)("img",{className:F.img,src:(null===(i=x.data)||void 0===i?void 0:i.photo)||Q,alt:"avatar"})]}),(0,p.jsxs)("div",{className:N(F.menu,c&&F.menuVisible),children:[v(x,"page_debug")&&(0,p.jsx)(S.rU,{to:"/debug",children:"</>"}),v(x,"page_worker")&&(0,p.jsx)(S.rU,{to:"/worker",children:"[-^-]"}),(0,p.jsx)("button",{onClick:()=>h.mutate(),disabled:"idle"!=h.status&&"error"!=h.status,children:"\u0412\u044b\u0439\u0442\u0438"})]})]}),"loading"==h.status&&(0,p.jsx)(B,{})]})}const H={root:"styles_root__xvR2N",hasFooter:"styles_hasFooter__lMS3o",body:"styles_body__S-p4X",body_centered:"styles_body_centered__NzRPU",body_centeredPage:"styles_body_centeredPage__R-EzO"};function T(e){let{children:s,className:t,homeBtn:n=!1,styles:a,centered:l=!1,centeredPage:i=!1,height100:r=!1,gap:o=0,header:c,footer:d}=e;return void 0===c&&(c=(0,p.jsx)(R,{homeBtn:n})),(0,p.jsxs)("div",{className:N(H.root,!!d&&H.hasFooter),style:{...a,maxHeight:r?"100dvh":""},children:[c||(0,p.jsx)("div",{}),(0,p.jsx)("div",{className:N(H.body,t,l&&H.body_centered,i&&H.body_centeredPage),style:{gap:o,maxHeight:r?"100%":""},children:s}),d]})}function P(){return(0,p.jsx)(T,{centered:!0,header:(0,p.jsx)(I,{}),children:"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435\u0442"})}function D(){return(0,p.jsx)(T,{centered:!0,header:(0,p.jsx)(I,{}),children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})}const U={back:"styles_back__uuJZO",form:"styles_form__n7Rcu"};function M(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u0418\u043d\u0434\u0438\u043a\u043e\u043d";(0,j.useEffect)((()=>{const t=document.title,n="object"!=typeof e?[e]:e;return document.title=[s,...n].filter((e=>!!e)).join(" | "),()=>{document.title=t}}),[e,s])}const O={form:"styles_form__cFFCH",field:"styles_field__5rpBk"};function Z(e){let{className:s,style:t,onSubmit:n,children:a}=e;const l=(0,j.useRef)(null);return(0,p.jsx)("form",{className:N(O.form,s),style:t,ref:l,onSubmit:e=>{if(e.preventDefault(),!l.current)return;const s=new FormData(l.current);n(s)},children:a})}function G(e){let{label:s,className:t,style:n,children:a}=e;return(0,p.jsxs)("label",{className:N(O.field,t),style:n,children:[(0,p.jsx)("span",{children:s}),a]})}function z(){M("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f");const[e,s]=(0,j.useState)(""),t=(0,j.useRef)(null),n=(0,j.useRef)(null),i=function(e){const s=(0,a.useQueryClient)(),t=(0,a.useMutation)({mutationFn:async e=>{const s=await u("/api/auth",e);return s.auth=!0,s},onSuccess:e=>{s.setQueryData("user",e)},onError:s=>{null===e||void 0===e||e(s instanceof l?s.message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}});return t}(s);return(0,p.jsxs)(T,{header:null,centered:!0,centeredPage:!0,gap:"2em",children:[(0,p.jsx)(S.rU,{to:"/",className:U.back}),(0,p.jsx)("h1",{children:"\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435"}),e&&(0,p.jsx)("h3",{children:e}),i.isLoading&&(0,p.jsx)(B,{}),(0,p.jsxs)(Z,{className:U.form,onSubmit:function(){var e,s;const a=(null===(e=t.current)||void 0===e?void 0:e.value)||"",l=(null===(s=n.current)||void 0===s?void 0:s.value)||"";i.mutate({login:a,password:l})},children:[(0,p.jsx)(G,{label:"\u041b\u043e\u0433\u0438\u043d",children:(0,p.jsx)("input",{ref:t,type:"text",name:"login",required:!0})}),(0,p.jsx)(G,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",children:(0,p.jsx)("input",{ref:n,type:"password",name:"password",required:!0})}),(0,p.jsx)("button",{type:"submit",className:"button button_light button_small",disabled:"loading"==i.status,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}const X={root:"styles_root__7P05R"},J={root:"styles_root__O0923",hidden:"styles_hidden__eYJaf",open:"styles_open__35Vcu",popup:"styles_popup__L-0H0",header:"styles_header__o87wG",close:"styles_close__w0Yhz",body:"styles_body__t75Nd"};function V(e){let{children:s,open:t=!1,close:n,title:a="",footer:l,closeOnOutclick:i=!1}=e;const r=(0,j.useRef)(null),[o,c]=(0,j.useState)(t),[d,u]=(0,j.useState)(!t);return(0,j.useEffect)((()=>{if(t){u(!1);const e=setTimeout((()=>c(!0)),100);return()=>clearTimeout(e)}c(!1);const e=setTimeout((()=>u(!0)),250);return()=>clearTimeout(e)}),[t]),(0,p.jsx)("div",{ref:r,className:N(J.root,o&&J.open,d&&J.hidden),onClick:e=>{i&&e.target==r.current&&(null===n||void 0===n||n())},children:(0,p.jsxs)("div",{className:J.popup,children:[(a||n)&&(0,p.jsxs)("div",{className:J.header,children:[(0,p.jsx)("h3",{children:a}),n&&(0,p.jsx)("button",{className:J.close,onClick:n})]}),(0,p.jsx)("div",{className:J.body,children:s}),(0,p.jsx)("div",{className:J.footer,children:l})]})})}function K(){const[e,s]=(0,j.useState)(""),[t,n]=(0,j.useState)(""),a=(0,j.useRef)(null),l=(0,j.useRef)(null);return(0,p.jsxs)(T,{centered:!0,gap:"1rem",className:X.root,homeBtn:!0,children:[(0,p.jsx)(S.rU,{to:"/users",children:"Users"}),(0,p.jsx)(S.rU,{to:"/log",children:"Log"}),(0,p.jsx)("button",{onClick:async()=>{s("Loading");try{const e=await fetch("/api/debug/log_errors"),t=await e.text();s(t),setTimeout((()=>{var e,s,t,n;return null===(e=a.current)||void 0===e||null===(s=e.parentElement)||void 0===s?void 0:s.scrollTo(0,null===(t=a.current)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.scrollHeight)}),150)}catch(e){s(JSON.stringify(e))}},children:"Log errors"}),(0,p.jsx)("button",{onClick:async()=>{n("Loading");try{const e=await fetch("/api/debug/log_info"),s=await e.text();n(s),setTimeout((()=>{var e,s,t,n;return null===(e=l.current)||void 0===e||null===(s=e.parentElement)||void 0===s?void 0:s.scrollTo(0,null===(t=l.current)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.scrollHeight)}),150)}catch(e){n(JSON.stringify(e))}},children:"Log requests"}),(0,p.jsx)(V,{title:"logErrors",open:""!=e,close:()=>s(""),children:(0,p.jsx)("pre",{ref:a,children:e})}),(0,p.jsx)(V,{title:"log",open:""!=t,close:()=>n(""),children:(0,p.jsx)("pre",{ref:l,children:t})})]})}const W={root:"styles_root__h8xNs",auth:"styles_auth__quDS1",logo:"styles_logo__2UaYh",btn:"styles_btn__xIQ7b"},Y=t.p+"static/media/logo.c62680f3f2d5879de402.png",$=t.p+"static/media/btn.1f3c7df77ef177100a6f.png";async function ee(e,s){const t=await new Promise((s=>{var t=new FileReader;t.addEventListener("loadend",(e=>{s({result:t.result,error:t.error})})),t.readAsDataURL(e)}));return t.error?(console.error(t.error),null):{data:t.result,name:s}}function se(e,s){const[t,n]=(0,j.useState)(e);return s?{v:t,set:e=>{n(e),s()}}:{v:t,set:n}}function te(e,s){const[t,n]=(0,j.useState)(e);return s?{v:t,set:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n((n=>{const a=e instanceof Function?e(n):e;return t||s(a,n),a}))}}:{v:t,set:n}}const ne={root:"styles_root__ek8XR",open:"styles_open__DpDD1",body:"styles_body__kj341",msgWide:"styles_msgWide__xAoa-",msg1:"styles_msg1__Ennl+",msg2box:"styles_msg2box__jxXEx",msg2:"styles_msg2__2yRTi",msg_error:"styles_msg_error__92wvX",msg_error_open:"styles_msg_error_open__6-pHY",msg3:"styles_msg3__jxfL8",openFile:"styles_openFile__Wzz+z"},ae=t.p+"static/media/logo.c62680f3f2d5879de402.png",le=t.p+"static/media/avatar.b8d0a59b442a96cc65e6.png";var ie=t(6564);const re={root:"styles_root__ggNxk",box:"styles_box__MGwpJ",dark:"styles_dark__3B-Va",outline:"styles_outline__-hp+1",box_back:"styles_box_back__kKr9l",outline_back:"styles_outline_back__DoVQi",outline_front:"styles_outline_front__Yhytt",btn:"styles_btn__H2inm",btnOutline:"styles_btnOutline__h8ExY",small:"styles_small__zhXkP",type2:"styles_type2__Nnbbx"},oe="data:image/png;base64,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";function ce(e){let{children:s,type2:t=!1,btn:n=!1,small:a=!1,dark:l=!1,highlight:i=!1,className:r}=e;return(0,p.jsxs)("div",{className:N(re.root,t&&re.type2,a&&re.small,l&&re.dark,r),children:[i&&(0,p.jsx)("div",{className:N(re.outline,re.outline_back)}),i&&(0,p.jsx)("div",{className:N(re.outline,re.outline_front)}),(0,p.jsx)("div",{className:N(re.box,re.box_back)}),n&&(0,p.jsxs)("span",{className:re.btn,children:[(0,p.jsx)("img",{src:oe,alt:""}),i&&(0,p.jsx)("div",{className:re.btnOutline})]}),(0,p.jsx)("div",{className:N(re.box,re.box_front),children:s})]})}function de(e){let{open:s}=e;const t=se(""),n=function(e){const s=(0,a.useQueryClient)(),t=(0,a.useMutation)({mutationFn:async e=>{const s=await u("/api/auth_ticket",e);return s.auth=!0,s},onSuccess:e=>{s.setQueryData("user",e)},onError:s=>{null===e||void 0===e||e(s instanceof l?s.message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}});return t}(t.set);return(0,p.jsxs)("div",{className:N(ne.root,s&&ne.open),children:[n.isLoading&&(0,p.jsx)(B,{}),(0,p.jsxs)("div",{className:ne.body,children:[(0,p.jsx)(ce,{className:ne.msgWide,children:(0,p.jsxs)("div",{className:ne.msg1,children:[(0,p.jsx)("img",{src:ae,alt:"\u0418\u043d\u0434\u0438 \u043a\u043e\u043d"}),(0,p.jsx)("span",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u044b..."})]})}),(0,p.jsx)(ce,{type2:!0,className:ne.msg2box,children:(0,p.jsxs)("div",{className:ne.msg2,children:[(0,p.jsx)("img",{src:le,alt:"Avatar"}),(0,p.jsx)("h2",{className:"title",children:"\u0410\u0434\u043c\u0438\u043d"}),(0,p.jsx)("span",{children:'\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0438\u043d\u0434\u0438\u043a\u043e\u043d "\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"! \u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443, \u0437\u0430\u0433\u0440\u0443\u0437\u0438 \u0441\u0432\u043e\u0439 \u0431\u0438\u043b\u0435\u0442'})]})}),(0,p.jsx)(ce,{type2:!0,className:N(ne.msg2box,ne.msg_error,t.v&&ne.msg_error_open),children:(0,p.jsxs)("div",{className:ne.msg2,children:[(0,p.jsx)("img",{src:le,alt:"Avatar"}),(0,p.jsx)("h2",{className:"title",children:"\u0410\u0434\u043c\u0438\u043d"}),(0,p.jsxs)("span",{children:["\u0412 \u0434\u043e\u0441\u0442\u0443\u043f\u0435 \u043e\u0442\u043a\u0430\u0437\u0430\u043d\u043e! ",t.v]})]})}),(0,p.jsx)(ce,{className:N(ne.msg3,ne.msgWide),children:(0,p.jsxs)("label",{className:ne.openFile,children:[(0,p.jsx)("div",{className:"title",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u0438\u043b\u0435\u0442"}),(0,p.jsx)("input",{type:"file",style:{display:"none"},accept:"image/png, image/jpeg, image/gif",disabled:n.isLoading,onChange:async e=>{var s,a;t.set("");const l=await ee(null===(s=e.target)||void 0===s||null===(a=s.files)||void 0===a?void 0:a[0],"");if(e.target.value="",!l)return;const i=new ie.ZP,r=await i.decodeFromImage(l.data),o=null===r||void 0===r?void 0:r.data;o&&o.match(/\d+-\d+-\d+-\d+-\d+/)?n.mutate({code:o}):t.set("\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 QR-\u043a\u043e\u0434\u0430 \u0438\u043b\u0438 \u043e\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439.")}})]})})]})]})}function ue(e,s){const[t,n]=(0,j.useState)(e);let a=n;return s&&(a=e=>{n(e),s()}),{v:t,set:a,setT:()=>a(!0),setF:()=>a(!1),toggle:()=>a((e=>!e))}}function me(){const e=ue(!1);return(0,p.jsxs)("div",{className:W.root,children:[(0,p.jsx)(S.rU,{to:"/auth",className:W.auth}),(0,p.jsx)("div",{}),(0,p.jsx)("img",{className:W.logo,src:Y,alt:"\u0418\u043d\u0434\u0438 \u043a\u043e\u043d"}),(0,p.jsx)("button",{className:W.btn,onClick:e.setT,children:(0,p.jsx)("img",{src:$,alt:"\u0412\u0445\u043e\u0434"})}),(0,p.jsx)(de,{open:e.v})]})}function he(e){const s=e;return s.date=new Date(e.date),s}function ve(e,s){return"".concat(e).padStart(s,"0")}function xe(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e){return e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"".concat(e.getFullYear(),".").concat(ve(e.getMonth()+1,2),".").concat(ve(e.getDate(),2)):"".concat(ve(e.getDate(),2),".").concat(ve(e.getMonth()+1,2),".").concat(e.getFullYear()):""}(e,arguments.length>2&&void 0!==arguments[2]&&arguments[2])+" "+function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t="".concat(ve(e.getHours(),2),":").concat(ve(e.getMinutes(),2));return s?t+":".concat(ve(e.getSeconds(),2)):t}(e,s)}const ge={table:"styles_table__QLr-h",changesCell:"styles_changesCell__0wQDJ",changes:"styles_changes__EyS9f",btn:"styles_btn__H7b72"};function je(){var e;M("Log");const s=(0,a.useQuery)("log",(async()=>(await d("/api/debug/log")).map(he)));return(0,p.jsxs)(T,{centeredPage:!0,styles:{fontFamily:"'PT Sans', Arial",background:"#1e1e1e"},homeBtn:!0,children:[s.isFetching&&(0,p.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),b(s),!s.isFetching&&(0,p.jsx)("button",{className:ge.btn,onClick:()=>s.refetch(),children:"Update"}),(0,p.jsxs)("table",{className:ge.table,children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{style:{minWidth:"9.5em"},children:"Date"}),(0,p.jsx)("th",{style:{minWidth:"4em"},children:"Action"}),(0,p.jsx)("th",{style:{minWidth:"9.5em"},children:"Table[id]"}),(0,p.jsx)("th",{children:"User[id]"}),(0,p.jsx)("th",{style:{width:"18em"},children:"Changes"})]})}),(0,p.jsx)("tbody",{children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:xe(e.date,!0,!0)}),(0,p.jsx)("td",{children:_e(e.actionCode)}),(0,p.jsxs)("td",{children:[e.tableName,"[",e.recordId,"]"]}),(0,p.jsxs)("td",{children:[e.userName," [",e.userId,"]"]}),(0,p.jsx)("td",{className:ge.changesCell,children:(0,p.jsxs)("div",{className:ge.changes,children:[(0,p.jsx)("input",{type:"checkbox",className:ge.toggleInp,id:"item".concat(e.id)}),(0,p.jsx)("div",{children:e.changes.map((e=>(0,p.jsxs)("div",{children:[e[0],": ",JSON.stringify(e[1])," ","->"," ",JSON.stringify(e[2])]},e[0])))}),e.changes.length>0&&(0,p.jsx)("label",{className:ge.btn,htmlFor:"item".concat(e.id),children:e.changes.length})]})})]},e.id)))})]})]})}function _e(e){return(0,p.jsx)("span",{style:{color:{added:"#008000",deleted:"#b30000",updated:"#006fb3",restored:"#990099"}[e]},children:e})}function pe(e){return e instanceof Array?e.map((e=>"".concat(e))):"".concat(e)}function ye(e,s){s=pe(s),e.invalidateQueries(s,{exact:!0})}function be(e,s,t){var n;s=pe(s),"success"==(null===(n=e.getQueryState(s))||void 0===n?void 0:n.status)&&e.setQueryData(s,(e=>e?[...e,t]:[t]))}function fe(e,s,t){var n;s=pe(s),"success"==(null===(n=e.getQueryState(s))||void 0===n?void 0:n.status)&&e.setQueryData(s,(e=>(null===e||void 0===e?void 0:e.map((e=>e.id==t.id?t:e)))||[]))}function Ne(e,s,t){var n;s=pe(s),"success"==(null===(n=e.getQueryState(s))||void 0===n?void 0:n.status)&&e.setQueryData(s,(e=>e?e.filter((e=>e.id!=t)):[]))}function Ce(){return(0,a.useQuery)("quests_full",(async()=>await d("/api/quests_full")))}function we(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>await o("/api/quest/".concat(e)),onSuccess:()=>{Ne(n,"quests_full",e),ye(n,"quests"),null===s||void 0===s||s()},onError:t})}const ke={root:"styles_root__oNkfm",img:"styles_img__46Cxj",textarea:"styles_textarea__sNjzZ",description_count:"styles_description_count__Nnz4M",description_count_too_many:"styles_description_count_too_many__udmKa",form:"styles_form__EJp7b"};function Ae(){const e=(0,j.useRef)(null),s=(0,j.useRef)(null),t=(0,j.useRef)(null),n=se(""),l=ue(!1),i=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/quest",e),onSuccess:s=>{be(t,"quests_full",s),ye(t,"quests"),null===e||void 0===e||e(s)},onError:s})}((()=>{l.setF(),e.current&&(e.current.value=""),s.current&&(s.current.value=""),t.current&&(t.current.checked=!1),n.set("")}));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{className:ke.root,onClick:l.setT,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,p.jsxs)(V,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430",open:l.v,close:l.setF,children:[i.isLoading&&(0,p.jsx)(B,{}),b(i),(0,p.jsxs)(Z,{className:ke.form,onSubmit:()=>{var a,l,r;const o=null===(a=e.current)||void 0===a?void 0:a.value,c=null===(l=s.current)||void 0===l?void 0:l.valueAsNumber,d=null===(r=t.current)||void 0===r?void 0:r.checked;o&&void 0!==c&&void 0!==d&&i.mutate({name:o,reward:c,hidden:d,description:n.v})},children:[(0,p.jsx)(G,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",children:(0,p.jsx)("input",{ref:e,required:!0,type:"text"})}),(0,p.jsx)(G,{label:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430",children:(0,p.jsx)("input",{ref:s,required:!0,type:"number"})}),(0,p.jsx)(G,{children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{ref:t,type:"checkbox"}),(0,p.jsx)("span",{children:"\u0421\u043a\u0440\u044b\u0442\u044b\u0439"})]})}),(0,p.jsxs)(G,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:[(0,p.jsx)("textarea",{className:ke.textarea,cols:40,rows:10,value:n.v,onChange:e=>n.set(e.target.value)}),(0,p.jsx)("div",{className:ke.description_count,children:(0,p.jsxs)("span",{children:[(0,p.jsx)("span",{className:n.v.length>256?ke.description_count_too_many:"",children:n.v.length}),(0,p.jsx)("span",{children:"/256"})]})})]}),(0,p.jsx)(G,{children:(0,p.jsx)("button",{type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})}function Ee(e){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,a.useQuery)(["dialogs","".concat(e)],(async()=>await d("/api/dialog/".concat(e))),{enabled:s&&e>=0})}function Ie(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async s=>await u("/api/dialog/".concat(e),s),onSuccess:t=>{n.setQueryData(["dialogs","".concat(e)],t),null===s||void 0===s||s(t)},onError:t})}function Se(){return(0,a.useQuery)(["dialogCharacters"],(async()=>{const e=await d("/api/dialog/characters"),s={};return e.forEach((e=>s[e.id]=e)),s}))}function Fe(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>await o("/api/dialog/character/".concat(e)),onSuccess:()=>{var t;"success"==(null===(t=n.getQueryState("dialogCharacters"))||void 0===t?void 0:t.status)&&n.setQueryData("dialogCharacters",(s=>(delete(s=s||{})[e],s))),null===s||void 0===s||s()},onError:t})}const Qe={root:"styles_root__WvdMz",body:"styles_body__1LPvJ",selectName:"styles_selectName__u7s4v",textarea:"styles_textarea__GqFav",buttons:"styles_buttons__9yTCF",btnUp:"styles_btnUp__nrklw",btnDown:"styles_btnDown__V5tHT",btnPlus:"styles_btnPlus__oBVqe",doubleBtn:"styles_doubleBtn__WET5a"};function Le(){return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,p.jsx)("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"})})}function Be(e){var s;let{data:t,deleteNode:n,moveUp:a,addUp:l,moveDown:i,addDown:r}=e;const o=Se(),c=te(t.characterId,(e=>t.characterId=e)),d=te(t.text,(e=>t.text=e)),u=null===(s=o.data)||void 0===s?void 0:s[c.v];return(0,j.useEffect)((()=>{c.set(t.characterId),d.set(t.text)}),[t]),(0,p.jsxs)("div",{className:Qe.root,children:[(0,p.jsx)("img",{src:null===u||void 0===u?void 0:u.img,alt:null===u||void 0===u?void 0:u.name}),(0,p.jsxs)("div",{className:Qe.body,children:[(0,p.jsx)("select",{className:Qe.selectName,value:c.v,onChange:e=>c.set(parseInt(e.target.value,10)),children:Object.values(o.data||{}).map((e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id)))}),(0,p.jsx)("textarea",{className:Qe.textarea,placeholder:"\u0420\u0435\u0447\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430",value:d.v,onChange:e=>d.set(e.target.value)})]}),(0,p.jsxs)("div",{className:Qe.buttons,children:[(0,p.jsxs)("span",{className:Qe.doubleBtn,children:[(0,p.jsx)("button",{className:Qe.btnUp,onClick:a}),(0,p.jsx)("button",{className:Qe.btnPlus,onClick:l})]}),(0,p.jsx)("button",{onClick:n,children:(0,p.jsx)(Le,{})}),(0,p.jsxs)("span",{className:Qe.doubleBtn,children:[(0,p.jsx)("button",{className:Qe.btnPlus,onClick:r}),(0,p.jsx)("button",{className:Qe.btnDown,onClick:i})]})]})]})}function qe(){return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,p.jsx)("path",{d:"m336-280 144-144 144 144 56-56-144-144 144-144-56-56-144 144-144-144-56 56 144 144-144 144 56 56ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"})})}function Re(){return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,p.jsx)("path",{d:"M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"})})}const He={root:"styles_root__CDE3U",error:"styles_error__6s3zt",img:"styles_img__Thun3",id:"styles_id__pa79Q",inputs:"styles_inputs__7ickr",changed:"styles_changed__s9MgQ",buttons:"styles_buttons__T7wSY"},Te={button:"styles_button__MKylh"};function Pe(e){let{title:s,mutationFn:t,mutatateParams:n,itemId:a,onSuccess:l,onError:i,open:r,close:o}=e;const c=t(a,(e=>{null===o||void 0===o||o(),null===l||void 0===l||l(e)}),i);return(0,j.useEffect)((()=>{r||c.reset()}),[r]),(0,p.jsxs)(V,{open:r,close:o,title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",closeOnOutclick:!0,children:[b(c),c.isLoading&&(0,p.jsx)(B,{}),(0,p.jsxs)(Z,{onSubmit:()=>{c.mutate(n)},children:[(0,p.jsx)("h2",{children:s}),(0,p.jsx)("button",{type:"submit",className:Te.button,children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})]})]})}function De(e){var s;let{character:t,deleteNew:n}=e;const l=ue(!1),i=ue(!1),r=se(t.id),o=se(t.name,l.setT),c=se(null,l.setT),d=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/dialog/character",e),onSuccess:s=>{var n;"success"==(null===(n=t.getQueryState("dialogCharacters"))||void 0===n?void 0:n.status)&&t.setQueryData("dialogCharacters",(e=>((e=e||{})[s.id]=s,e))),null===e||void 0===e||e(s)},onError:s})}(n),m=function(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async s=>await u("/api/dialog/character/".concat(e),s),onSuccess:e=>{var t;"success"==(null===(t=n.getQueryState("dialogCharacters"))||void 0===t?void 0:t.status)&&n.setQueryData("dialogCharacters",(s=>((s=s||{})[e.id]=e,s))),null===s||void 0===s||s(e)},onError:t})}(r.v,h,(()=>h()));function h(e){const s=e||t;r.set(s.id),o.set(s.name),l.setF()}return(0,j.useEffect)(h,[t]),(0,p.jsxs)("div",{className:N(He.root,l.v&&He.changed),children:[d.isLoading&&(0,p.jsx)(B,{block:!0,r:"0.5rem"}),b(d,(e=>(0,p.jsxs)("div",{className:He.error,children:[(0,p.jsx)("div",{children:e}),(0,p.jsx)("button",{onClick:()=>d.reset(),children:"\u041e\u041a"})]}))),m.isLoading&&(0,p.jsx)(B,{block:!0,r:"0.5rem"}),b(m,(e=>(0,p.jsxs)("div",{className:He.error,children:[(0,p.jsx)("div",{children:e}),(0,p.jsx)("button",{onClick:()=>m.reset(),children:"\u041e\u041a"})]}))),(0,p.jsx)(Pe,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430: "+o.v,itemId:t.id,mutationFn:Fe,open:i.v,close:i.setF}),(0,p.jsx)("div",{className:He.id,children:t.id}),(0,p.jsxs)("label",{className:He.img,children:[(t.img||c.v)&&(0,p.jsx)("img",{src:(null===(s=c.v)||void 0===s?void 0:s.data)||t.img,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"}),(0,p.jsx)("input",{type:"file",style:{display:"none"},accept:"image/png, image/jpeg, image/gif",onChange:async e=>{var s,t;c.set({data:"",name:""}),c.set(await ee(null===(s=e.target)||void 0===s||null===(t=s.files)||void 0===t?void 0:t[0],"")),e.target.value=""}})]}),(0,p.jsxs)("div",{className:He.inputs,children:[(0,p.jsx)("div",{children:"\u0418\u043c\u044f"}),(0,p.jsx)("input",{type:"text",value:o.v,onChange:e=>o.set(e.target.value)})]}),(0,p.jsx)("div",{className:He.buttons,children:r.v>0?(0,p.jsxs)(p.Fragment,{children:[!l.v&&(0,p.jsx)("button",{onClick:i.setT,children:(0,p.jsx)(Le,{})}),l.v&&(0,p.jsx)("button",{onClick:()=>{m.mutate({name:o.v,img:c.v||void 0})},children:(0,p.jsx)(Re,{})}),l.v&&(0,p.jsx)("button",{onClick:()=>h(),children:(0,p.jsx)(qe,{})})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:()=>{d.mutate({name:o.v,img:c.v||void 0})},children:(0,p.jsx)(Re,{})}),(0,p.jsx)("button",{onClick:n,children:(0,p.jsx)(Le,{})})]})})]})}const Ue={root:"styles_root__qIedB",addBtn:"styles_addBtn__Ci3v5",characters:"styles_characters__rMIjG"};function Me(){const e=ue(!1),s=Se(),t=se({}),n=se(1);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{className:Ue.root,onClick:e.setT,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430\u043c\u0438"}),(0,p.jsxs)(V,{title:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430\u043c\u0438",open:e.v,close:e.setF,footer:(0,p.jsx)("button",{className:Ue.addBtn,onClick:()=>{t.set((e=>{const s={...e};return s[-n.v]={id:-n.v,name:"",img:""},n.set((e=>e+1)),s}))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),children:[s.isLoading&&(0,p.jsx)(B,{}),b(s),s.isSuccess&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:Ue.characters,children:[Object.values(s.data).map((e=>(0,p.jsx)(De,{character:e},e.id))),Object.values(t.v).map((e=>(0,p.jsx)(De,{character:e,deleteNew:()=>t.set((s=>(delete s[e.id],{...s})))},e.id)))]})})]})]})}const Oe={root:"styles_root__6dYbo",close:"styles_close__T2XDu",body:"styles_body__-c4ky",nodes:"styles_nodes__0Che8",addBtn:"styles_addBtn__bt4O2"};function Ze(e){const s=se(0),t=se({_data:null,_onClose:void 0,_onCloseMain:void 0,el:()=>t.v._data?(0,p.jsx)(Ge,{data:t.v._data,close:t.v.close}):(0,p.jsx)(p.Fragment,{}),open:(e,s)=>t.set((t=>(t._data=e,t._onClose=s,t))),close:()=>t.set((e=>{var s,t;return e._data?(e._data=null,null===(s=e._onClose)||void 0===s||s.call(e),null===(t=e._onCloseMain)||void 0===t||t.call(e),e):e}))},(()=>s.set((e=>e+1))));return t.v._onCloseMain=e,t.v}function Ge(e){let{data:s,close:t}=e;const n=Se(),a=ue(!1);function l(e,t){t<0||(s.nodes.splice(t,0,s.nodes.splice(e,1)[0]),a.toggle())}function i(e){s.nodes.splice(e,0,{characterId:1,text:""}),a.toggle()}return(0,p.jsxs)("div",{className:Oe.root,children:[n.isLoading&&(0,p.jsx)(B,{}),b(n),(0,p.jsx)("button",{className:Oe.close,onClick:t}),(0,p.jsxs)("div",{className:Oe.body,children:[(0,p.jsx)("h1",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0438\u0430\u043b\u043e\u0433\u0430"}),(0,p.jsx)(Me,{}),(0,p.jsx)("div",{className:Oe.nodes,children:s.nodes.map(((e,t)=>(0,p.jsx)(Be,{data:e,deleteNode:()=>function(e){s.nodes.splice(e,1),a.toggle()}(t),moveUp:()=>l(t,t-1),moveDown:()=>l(t,t+1),addUp:()=>i(t),addDown:()=>i(t+1)},t)))}),(0,p.jsx)("button",{className:Oe.addBtn,onClick:()=>{s.nodes.push({characterId:1,text:""}),a.toggle()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u043f\u043b\u0438\u043a\u0443"})]})]})}function ze(e){return JSON.parse(JSON.stringify(e))}const Xe={root:"styles_root__Fv2Pv"},Je={root:"styles_root__H6WP2",close:"styles_close__LpN36",img:"styles_img__lP65O",dialog_container:"styles_dialog_container__rAyPs",dialog:"styles_dialog__9ovTV",dialog__title:"styles_dialog__title__yj+t3",dialog__body:"styles_dialog__body__HiqPJ",dialog__text:"styles_dialog__text__gX-Zr",dialog__btns:"styles_dialog__btns__n6R2J",dialog__next:"styles_dialog__next__jEXew",dialog__prev:"styles_dialog__prev__EqKdl"};function Ve(){const e=Se(),s=se(0),t=se({_data:null,_dialogId:-1,_characters:e,_onClose:void 0,el:()=>t.v._data?(0,p.jsx)(We,{data:t.v._data,close:t.v.close,characters:t.v._characters}):t.v._dialogId>=0?(0,p.jsx)(Ke,{dialogId:t.v._dialogId,close:t.v.close,characters:t.v._characters}):(0,p.jsx)(p.Fragment,{}),run:(e,s)=>t.set((t=>(t._dialogId=e,t._onClose=s,t))),runLocal:(e,s)=>t.set((t=>(t._data=e,t._onClose=s,t))),close:()=>t.set((e=>{var s;return e._dialogId<0&&!e._data||(null===(s=e._onClose)||void 0===s||s.call(e,e._dialogId),e._onClose=void 0,e._dialogId=-1,e._data=null),e}))},(()=>s.set((e=>e+1))));return t.v._characters=e,t.v}function Ke(e){let{dialogId:s,characters:t,close:n}=e;const a=Ee(s);return a.isSuccess?(0,p.jsx)(We,{data:a.data.data,close:n,characters:t}):(0,p.jsxs)("div",{className:Je.root,children:[(0,p.jsx)("button",{className:Je.close,onClick:n}),a.isLoading&&(0,p.jsx)(B,{}),b(a)]})}function We(e){let{data:s,characters:t,close:n}=e;const[a,l]=(0,j.useState)(0),i=s.nodes[a];if((0,j.useEffect)((()=>l(0)),[s]),!t.isSuccess)return(0,p.jsxs)("div",{className:Je.root,children:[(0,p.jsx)("button",{className:Je.close,onClick:n}),t.isLoading&&(0,p.jsx)(B,{}),b(t)]});if(!i)return(0,p.jsxs)("div",{className:Je.root,children:[(0,p.jsx)("button",{className:Je.close,onClick:n}),(0,p.jsx)("h2",{children:"\u041f\u0443\u0441\u0442\u043e"})]});const r=t.data[i.characterId];return(0,p.jsxs)("div",{className:Je.root,children:[(0,p.jsx)("button",{className:Je.close,onClick:n}),(0,p.jsx)("img",{className:Je.img,src:r.img,alt:r.name}),(0,p.jsx)("div",{className:Je.dialog_container,children:(0,p.jsxs)("div",{className:Je.dialog,children:[(0,p.jsx)("div",{className:Je.dialog__title,children:r.name}),(0,p.jsxs)("div",{className:Je.dialog__body,children:[(0,p.jsx)("p",{className:Je.dialog__text,children:i.text}),(0,p.jsxs)("div",{className:Je.dialog__btns,children:[a>0?(0,p.jsx)("button",{className:Je.dialog__prev,onClick:()=>l((e=>e-1)),children:"<-"}):(0,p.jsx)("div",{}),a<s.nodes.length-1?(0,p.jsx)("button",{className:Je.dialog__next,onClick:()=>l((e=>e+1)),children:"\u0414\u0430\u043b\u0435\u0435"}):(0,p.jsx)("button",{className:Je.dialog__next,onClick:n,children:"\u041a\u043e\u043d\u0435\u0446"})]})]})]})})]})}function Ye(){return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",height:"1em",width:"1em",fill:"currentColor",children:(0,p.jsx)("path",{d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})})}function $e(){const e=ue(!1),s=Ee(1,!1),t=se(null),n=Ve(),a=Ze(e.setT);async function l(e){if(t.v)e(t.v);else if(s.isSuccess&&!s.isStale){const n=ze(s.data.data);t.set(n),e(n)}else if(s.isIdle||s.isStale||s.isError){const n=await s.refetch();if(n.isSuccess){const s=ze(n.data.data);t.set(s),e(s)}}}return(0,j.useEffect)((()=>{!e.v&&t.v&&s.isSuccess&&t.set(ze(s.data.data))}),[e.v]),(0,p.jsxs)(p.Fragment,{children:[s.isFetching&&(0,p.jsx)(B,{}),t.v&&(0,p.jsx)(Pe,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",itemId:1,mutatateParams:{data:t.v},mutationFn:Ie,open:e.v,close:e.setF}),(0,p.jsxs)("div",{className:Xe.root,children:[(0,p.jsx)("button",{onClick:()=>l(n.runLocal),children:"\u0421\u0442\u0430\u0440\u0442\u043e\u0432\u044b\u0439 \u0434\u0438\u0430\u043b\u043e\u0433"}),(0,p.jsx)("button",{onClick:()=>l(a.open),children:(0,p.jsx)(Ye,{})})]}),n.el(),a.el()]})}const es={root:"styles_root__RyDEO",error:"styles_error__mpo99",id:"styles_id__+YyjR",img:"styles_img__Q1dE-",inputs:"styles_inputs__+GHP-",changedHighlight:"styles_changedHighlight__0huRM",changed:"styles_changed__-Gqjn",buttons:"styles_buttons__DpOXa",btnMinus:"styles_btnMinus__sOvku",checkbox:"styles_checkbox__3q5xK",description:"styles_description__IsQuf",textarea:"styles_textarea__DP8w4",description_count:"styles_description_count__rC08l",description_count_too_many:"styles_description_count_too_many__9Cvtl",dialogBtns:"styles_dialogBtns__OcBqR"};function ss(){return(0,p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 442.04 442.04",height:"1em",width:"1em",fill:"currentColor",children:[(0,p.jsx)("path",{d:"M221.02,341.304c-49.708,0-103.206-19.44-154.71-56.22C27.808,257.59,4.044,230.351,3.051,229.203 c-4.068-4.697-4.068-11.669,0-16.367c0.993-1.146,24.756-28.387,63.259-55.881c51.505-36.777,105.003-56.219,154.71-56.219 c49.708,0,103.207,19.441,154.71,56.219c38.502,27.494,62.266,54.734,63.259,55.881c4.068,4.697,4.068,11.669,0,16.367 c-0.993,1.146-24.756,28.387-63.259,55.881C324.227,321.863,270.729,341.304,221.02,341.304z M29.638,221.021 c9.61,9.799,27.747,27.03,51.694,44.071c32.83,23.361,83.714,51.212,139.688,51.212s106.859-27.851,139.688-51.212 c23.944-17.038,42.082-34.271,51.694-44.071c-9.609-9.799-27.747-27.03-51.694-44.071 c-32.829-23.362-83.714-51.212-139.688-51.212s-106.858,27.85-139.688,51.212C57.388,193.988,39.25,211.219,29.638,221.021z"}),(0,p.jsx)("path",{d:"M221.02,298.521c-42.734,0-77.5-34.767-77.5-77.5c0-42.733,34.766-77.5,77.5-77.5c18.794,0,36.924,6.814,51.048,19.188 c5.193,4.549,5.715,12.446,1.166,17.639c-4.549,5.193-12.447,5.714-17.639,1.166c-9.564-8.379-21.844-12.993-34.576-12.993 c-28.949,0-52.5,23.552-52.5,52.5s23.551,52.5,52.5,52.5c28.95,0,52.5-23.552,52.5-52.5c0-6.903,5.597-12.5,12.5-12.5 s12.5,5.597,12.5,12.5C298.521,263.754,263.754,298.521,221.02,298.521z"}),(0,p.jsx)("path",{d:"M221.02,246.021c-13.785,0-25-11.215-25-25s11.215-25,25-25c13.786,0,25,11.215,25,25S234.806,246.021,221.02,246.021z"})]})}function ts(){return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 342.5 342.5",height:"1em",width:"1em",fill:"currentColor",children:(0,p.jsx)("path",{d:"M254.37,22.255c-1.161-0.642-2.53-0.795-3.803-0.428c-1.274,0.367-2.35,1.226-2.992,2.387l-21.758,39.391 c-1.335,2.417-0.458,5.459,1.96,6.794C264.616,90.748,287.5,129.495,287.5,171.52c0,63.649-51.782,115.431-115.431,115.431 S56.638,235.169,56.638,171.52c0-23.888,7.557-47.427,21.382-66.897l34.478,34.478c1.338,1.337,3.315,1.806,5.109,1.21 c1.795-0.596,3.101-2.152,3.374-4.024L139.963,6.271c0.228-1.563-0.295-3.141-1.412-4.258c-1.117-1.117-2.7-1.639-4.258-1.412 L4.278,19.584c-1.872,0.273-3.428,1.579-4.023,3.374c-0.596,1.795-0.127,3.772,1.21,5.109l37.292,37.292 C14.788,95.484,1.638,133,1.638,171.52c0,93.976,76.455,170.431,170.431,170.431c93.976,0,170.431-76.455,170.431-170.431 C342.5,109.478,308.731,52.283,254.37,22.255z"})})}function ns(e){var s,t;let{quest:n}=e;const l=ue(!1),i=ue(!1),r=ue(!1),o=se(n.name,l.setT),c=se(n.reward,l.setT),d=ue(n.hidden,l.setT),m=se(n.description,l.setT),h=se(n.dialog1Id,l.setT),v=se(n.dialog2Id,l.setT),x=Ee(null!==(s=h.v)&&void 0!==s?s:-1,!1),g=Ee(null!==(t=v.v)&&void 0!==t?t:-1,!1),_=se(null),y=se(null),f=ue(!1,l.setT),C=ue(!1,l.setT),w=Ve(),k=Ze(),A=function(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async s=>await u("/api/quest/".concat(e),s),onSuccess:e=>{fe(n,"quests_full",e),ye(n,"quests"),ye(n,["dialogs",e.dialog1Id]),ye(n,["dialogs",e.dialog2Id]),null===s||void 0===s||s(e)},onError:t})}(n.id,E,(()=>E()));function E(e){const s=e||n;o.set(s.name),c.set(s.reward),d.set(s.hidden),m.set(s.description),h.set(s.dialog1Id),v.set(s.dialog2Id),_.set(null),y.set(null),f.setF(),C.setF(),l.setF()}async function I(e,s,t){if(e.v)t(e.v);else if(s.isSuccess&&!s.isStale){const n=ze(s.data.data);e.set(n),t(n)}else if(s.isIdle||s.isStale||s.isError){const n=await s.refetch();if(n.isSuccess){const s=ze(n.data.data);e.set(s),t(s)}}}return(0,j.useEffect)(E,[n]),(0,p.jsxs)("div",{className:N(es.root,l.v&&es.changed),children:[w.el(),k.el(),A.isLoading&&(0,p.jsx)(B,{block:!0,r:"0.5rem"}),x.isFetching&&(0,p.jsx)(B,{block:!0,r:"0.5rem"}),g.isFetching&&(0,p.jsx)(B,{block:!0,r:"0.5rem"}),b(A,(e=>(0,p.jsxs)("div",{className:es.error,children:[(0,p.jsx)("div",{children:e}),(0,p.jsx)("button",{onClick:()=>A.reset(),children:"\u041e\u041a"})]}))),(0,p.jsx)(Pe,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0432\u0435\u0441\u0442: "+o.v,itemId:n.id,mutationFn:we,open:i.v,close:i.setF}),(0,p.jsx)("div",{className:es.id,children:n.id}),(0,p.jsxs)("div",{className:es.inputs,children:[(0,p.jsx)("div",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,p.jsx)("input",{type:"text",value:o.v,onChange:e=>o.set(e.target.value)}),(0,p.jsx)("div",{children:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430"}),(0,p.jsx)("input",{type:"number",value:c.v,onChange:e=>c.set(e.target.valueAsNumber)}),(0,p.jsx)("span",{children:"\u0421\u043a\u0440\u044b\u0442\u044b\u0439"}),(0,p.jsxs)("label",{className:es.checkbox,children:[(0,p.jsx)("input",{type:"checkbox",checked:d.v,onChange:e=>d.set(e.target.checked)}),(0,p.jsx)("span",{})]}),(0,p.jsx)("div",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,p.jsx)("button",{className:N(es.description,m.v.length>256&&es.description_count_too_many),onClick:r.setT,children:m.v}),[{n:1,questId:n.dialog1Id,id:h,data:_,query:x,changed:f},{n:2,questId:n.dialog2Id,id:v,data:y,query:g,changed:C}].map((e=>{let{n:s,questId:t,id:n,data:a,query:l,changed:i}=e;return(0,p.jsxs)(j.Fragment,{children:[(0,p.jsxs)("div",{className:N(i.v&&es.changedHighlight),children:["\u0414\u0438\u0430\u043b\u043e\u0433 ",s]}),(0,p.jsxs)("div",{className:N(es.buttons,es.dialogBtns),children:[null==n.v?(0,p.jsx)(p.Fragment,{children:a.v||null!=t?(0,p.jsx)("button",{onClick:()=>n.set(null!==t&&void 0!==t?t:-1),children:(0,p.jsx)(ts,{})}):(0,p.jsx)("button",{onClick:()=>{n.set(-1),a.set({nodes:[]})},children:"+"})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:()=>I(a,l,w.runLocal),children:(0,p.jsx)(ss,{})}),(0,p.jsx)("button",{onClick:()=>I(a,l,(e=>{i.setT(),k.open(e)})),children:(0,p.jsx)(Ye,{})}),(0,p.jsx)("button",{onClick:()=>n.set(null),children:(0,p.jsx)(Le,{})})]}),l.isError&&(0,p.jsx)("div",{style:{color:"tomato"},children:"\u041e\u0448\u0438\u0431\u043a\u0430"})]})]},s)}))]}),(0,p.jsxs)("div",{className:es.buttons,children:[!l.v&&(0,p.jsx)("button",{onClick:i.setT,children:(0,p.jsx)(Le,{})}),l.v&&(0,p.jsx)("button",{onClick:()=>{A.mutate({name:o.v,description:m.v,reward:c.v,hidden:d.v,dialog1:(null==n.dialog1Id||null!=h.v)&&(f.v&&_.v||void 0),dialog2:(null==n.dialog2Id||null!=v.v)&&(C.v&&y.v||void 0)})},children:(0,p.jsx)(Re,{})}),l.v&&(0,p.jsx)("button",{onClick:()=>E(),children:(0,p.jsx)(qe,{})})]}),(0,p.jsxs)(V,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430",open:r.v,close:r.setF,children:[(0,p.jsxs)("h2",{children:['\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430 "',o.v,'"']}),(0,p.jsx)("textarea",{className:es.textarea,cols:40,rows:10,value:m.v,onChange:e=>m.set(e.target.value)}),(0,p.jsx)("div",{className:es.description_count,children:(0,p.jsxs)("span",{children:[(0,p.jsx)("span",{className:m.v.length>256?es.description_count_too_many:"",children:m.v.length}),(0,p.jsx)("span",{children:"/256"})]})})]})]})}const as={quests:"styles_quests__lnETn"};function ls(){var e;M("\u041a\u0432\u0435\u0441\u0442\u044b");const s=Ce();return(0,p.jsxs)(T,{centeredPage:!0,gap:"0.5rem",homeBtn:!0,children:[(0,p.jsx)("div",{className:"calmBack"}),s.isLoading&&(0,p.jsx)(B,{}),b(s),(0,p.jsx)("h1",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430\u043c\u0438"}),(0,p.jsx)(Ae,{}),(0,p.jsx)($e,{}),(0,p.jsx)("div",{className:as.quests,children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,p.jsx)(ns,{quest:e},e.id)))})]})}function is(){return(0,a.useQuery)("storeItemsFull",(async()=>await d("/api/store_items_full")))}function rs(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>await u("/api/store_item/".concat(e,"/decrease")),onSuccess:e=>{fe(n,"storeItemsFull",e),ye(n,"storeItems"),null===s||void 0===s||s(e)},onError:t})}function os(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>await o("/api/store_item/".concat(e)),onSuccess:()=>{Ne(n,"storeItemsFull",e),ye(n,"storeItems"),null===s||void 0===s||s()},onError:t})}const cs={root:"styles_root__yl-I8",img:"styles_img__gddIw",form:"styles_form__ASF2C"};function ds(){var e;const s=se(null),t=(0,j.useRef)(null),n=(0,j.useRef)(null),l=(0,j.useRef)(null),i=ue(!1),r=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/store_item",e),onSuccess:s=>{be(t,"storeItemsFull",s),ye(t,"storeItems"),null===e||void 0===e||e(s)},onError:s})}((()=>{s.set(null),i.setF(),t.current&&(t.current.value=""),n.current&&(n.current.value=""),l.current&&(l.current.value="")}));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{className:cs.root,onClick:i.setT,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,p.jsxs)(V,{title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",open:i.v,close:i.setF,children:[r.isLoading&&(0,p.jsx)(B,{}),b(r),""==(null===(e=s.v)||void 0===e?void 0:e.data)&&(0,p.jsx)(B,{}),(0,p.jsxs)(Z,{className:cs.form,onSubmit:()=>{var e,a,i;const o=null===(e=t.current)||void 0===e?void 0:e.value,c=null===(a=l.current)||void 0===a?void 0:a.valueAsNumber,d=null===(i=n.current)||void 0===i?void 0:i.valueAsNumber;c&&o&&d&&r.mutate({count:c,name:o,price:d,img:s.v||void 0})},children:[(0,p.jsxs)(G,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",children:[(0,p.jsx)("div",{className:cs.img,children:s.v&&(0,p.jsx)("img",{src:s.v.data,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"})}),(0,p.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/gif",style:{display:"none"},onChange:async e=>{var t,n;s.set({data:"",name:""}),s.set(await ee(null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0],""))}})]}),(0,p.jsx)(G,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",children:(0,p.jsx)("input",{ref:t,required:!0,type:"text"})}),(0,p.jsx)(G,{label:"\u0426\u0435\u043d\u0430",children:(0,p.jsx)("input",{ref:n,required:!0,type:"number"})}),(0,p.jsx)(G,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",children:(0,p.jsx)("input",{ref:l,required:!0,type:"number"})}),(0,p.jsx)(G,{children:(0,p.jsx)("button",{type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})]})}const us={root:"styles_root__792UO",error:"styles_error__EjE0M",id:"styles_id__EvI3k",img:"styles_img__F6UZc",inputs:"styles_inputs__r6vu+",changed:"styles_changed__aaZPg",buttons:"styles_buttons__X3oNY",btnMinus:"styles_btnMinus__5ZzMA"};function ms(e){var s,t;let{item:n}=e;const l=ue(!1),i=ue(!1),r=ue(!1),o=se(null,l.setT),c=se(n.name,l.setT),d=se(n.count,l.setT),m=se(n.price,l.setT),h=function(e,s,t){const n=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async s=>await u("/api/store_item/".concat(e),s),onSuccess:e=>{fe(n,"storeItemsFull",e),ye(n,"storeItems"),null===s||void 0===s||s(e)},onError:t})}(n.id,v,(()=>v()));function v(e){o.set(null);const s=e||n;c.set(s.name),d.set(s.count),m.set(s.price),l.setF()}return(0,j.useEffect)(v,[n]),(0,p.jsxs)("div",{className:N(us.root,l.v&&us.changed),children:[h.isLoading&&(0,p.jsx)(B,{block:!0,r:"0.5rem"}),""==(null===(s=o.v)||void 0===s?void 0:s.data)&&(0,p.jsx)(B,{block:!0,r:"0.5rem"}),b(h,(e=>(0,p.jsxs)("div",{className:us.error,children:[(0,p.jsx)("div",{children:e}),(0,p.jsx)("button",{onClick:()=>h.reset(),children:"\u041e\u041a"})]}))),(0,p.jsx)(Pe,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440: "+c.v,itemId:n.id,mutationFn:os,open:i.v,close:i.setF}),(0,p.jsx)(Pe,{title:"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043a\u043e\u043b-\u0432\u043e \u043d\u0430 1: "+c.v,itemId:n.id,mutationFn:rs,open:r.v,close:r.setF}),(0,p.jsx)("div",{className:us.id,children:n.id}),(0,p.jsxs)("label",{className:us.img,children:[(n.img||o.v)&&(0,p.jsx)("img",{src:(null===(t=o.v)||void 0===t?void 0:t.data)||n.img,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"}),(0,p.jsx)("input",{type:"file",style:{display:"none"},accept:"image/png, image/jpeg, image/gif",onChange:async e=>{var s,t;o.set({data:"",name:""}),o.set(await ee(null===(s=e.target)||void 0===s||null===(t=s.files)||void 0===t?void 0:t[0],"")),e.target.value=""}})]}),(0,p.jsxs)("div",{className:us.inputs,children:[(0,p.jsx)("div",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,p.jsx)("input",{type:"text",value:c.v,onChange:e=>c.set(e.target.value)}),(0,p.jsx)("div",{children:"\u0426\u0435\u043d\u0430"}),(0,p.jsx)("input",{type:"number",value:m.v,onChange:e=>m.set(e.target.valueAsNumber)}),(0,p.jsx)("div",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),(0,p.jsx)("input",{type:"number",value:d.v,onChange:e=>d.set(e.target.valueAsNumber)})]}),(0,p.jsxs)("div",{className:us.buttons,children:[!l.v&&(0,p.jsx)("button",{onClick:i.setT,children:(0,p.jsx)(Le,{})}),!l.v&&(0,p.jsx)("button",{className:us.btnMinus,onClick:r.setT,children:"-1"}),l.v&&(0,p.jsx)("button",{onClick:()=>{h.mutate({name:c.v,count:d.v,price:m.v,img:o.v||void 0})},children:(0,p.jsx)(Re,{})}),l.v&&(0,p.jsx)("button",{onClick:()=>v(),children:(0,p.jsx)(qe,{})})]})]})}const hs={items:"styles_items__34Dlt"};function vs(){var e;M("\u0422\u043e\u0432\u0430\u0440\u044b");const s=is();return(0,p.jsxs)(T,{centeredPage:!0,gap:"0.5rem",homeBtn:!0,children:[s.isLoading&&(0,p.jsx)(B,{}),b(s),(0,p.jsx)("h1",{children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430\u043c\u0438"}),(0,p.jsx)(ds,{}),(0,p.jsx)("div",{className:hs.items,children:null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,p.jsx)(ms,{item:e},e.id)))})]})}const xs={root:"styles_root__3AhF7",title:"styles_title__AMBJ6",map:"styles_map__lp2hs",btns:"styles_btns__P557j",btn:"styles_btn__rCusk"},gs=t.p+"static/media/map1.f12554b9054ea5e2c850.png",js=t.p+"static/media/map2.231e4c0be2d1c6ff5950.png",_s=t.p+"static/media/map3.8a733cb476e5d20c9a65.png",ps={root:"styles_root__cV7H9",btn:"styles_btn__ofavo"};function ys(e){let{curPage:s=""}=e;return(0,p.jsx)("div",{className:ps.root,children:(0,p.jsxs)("div",{children:[(0,p.jsx)(ce,{small:!0,btn:!0,highlight:"map"==s,children:(0,p.jsx)(S.rU,{className:N(ps.btn,"title"),to:"/map",children:"\u041a\u0430\u0440\u0442\u0430"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:"timetable"==s,children:(0,p.jsx)(S.rU,{className:N(ps.btn,"title"),to:"/timetable",children:"\u041f\u043b\u0430\u043d"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:"store"==s,children:(0,p.jsx)(S.rU,{className:N(ps.btn,"title"),to:"/store",children:"\u041c\u0430\u0433\u0430\u0437"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:"game"==s,children:(0,p.jsx)(S.rU,{className:N(ps.btn,"title"),to:"/game",children:"\u0418\u0433\u0440\u0430"})})]})})}const bs={root:"styles_root__gZWUz",body:"styles_body__JCH1X",grid:"styles_grid__7zDRw",back:"styles_back__TDJ1u",close:"styles_close__PCOet"};function fs(e){let{close:s}=e;const t=function(e){const s=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/user/set_group",e),onSuccess:t=>{var n;"success"==(null===(n=s.getQueryState("user"))||void 0===n?void 0:n.status)&&s.setQueryData("user",(e=>({...e,group:t.group}))),s.invalidateQueries("quests",{exact:!0}),null===e||void 0===e||e()}})}(s);return(0,p.jsxs)("div",{className:bs.root,children:[t.isLoading&&(0,p.jsx)(B,{}),(0,p.jsxs)("div",{className:bs.body,children:[(0,p.jsx)("h2",{children:"\u041a\u0442\u043e \u0436\u0435 \u0442\u044b?"}),b(t,(e=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{style:{color:"tomato"},children:e}),(0,p.jsx)("button",{className:bs.close,onClick:s,children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043a\u0430\u043a \u0433\u043e\u0441\u0442\u044c"})]}))),(0,p.jsxs)("div",{className:bs.grid,children:[(0,p.jsx)("div",{className:bs.back}),(0,p.jsx)("div",{className:bs.back}),(0,p.jsx)("div",{}),(0,p.jsx)("button",{onClick:()=>t.mutate({group:1}),children:"\u0421\u0430\u043f\u043e\u0436\u043d\u0438\u043a"}),(0,p.jsx)("button",{onClick:()=>t.mutate({group:2}),children:"\u041a\u0430\u043a\u0442\u0443\u0441"}),(0,p.jsx)("div",{})]})]})]})}function Ns(){const e=m(),s=Ve(),t=ue(!1);return(0,j.useEffect)((()=>{var n;0==(null===(n=e.data)||void 0===n?void 0:n.group)&&s.run(1,t.setT)}),[e.data]),(0,p.jsxs)(p.Fragment,{children:[s.el(),t.v&&(0,p.jsx)(fs,{close:t.setF})]})}function Cs(){M("\u041a\u0430\u0440\u0442\u0430");const e=se(0);return(0,p.jsxs)(T,{centeredPage:!0,gap:"1em",className:xs.root,footer:(0,p.jsx)(ys,{curPage:"map"}),children:[(0,p.jsx)(Ns,{}),(0,p.jsx)("h1",{className:N("title",xs.title),children:"\u0418\u043d\u0434\u0438\u043a\u043e\u043d"}),(0,p.jsx)("div",{className:xs.map,children:(0,p.jsx)("img",{src:[gs,js,_s][e.v],alt:"\u041a\u0430\u0440\u0442\u0430"})}),(0,p.jsxs)("div",{className:xs.btns,children:[(0,p.jsx)(ce,{small:!0,btn:!0,highlight:0==e.v,children:(0,p.jsx)("button",{onClick:()=>e.set(0),className:N(xs.btn,"title"),children:"\u042d\u0442\u0430\u0436 1"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:1==e.v,children:(0,p.jsx)("button",{onClick:()=>e.set(1),className:N(xs.btn,"title"),children:"\u042d\u0442\u0430\u0436 2"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:2==e.v,children:(0,p.jsx)("button",{onClick:()=>e.set(2),className:N(xs.btn,"title"),children:"\u042d\u0442\u0430\u0436 3"})})]})]})}var ws=t(741);function ks(e){let{code:s,scale:t=10,margin:n=1,color:a="#000000",colorBg:l="#ffffff"}=e;const[i,r]=(0,j.useState)("");return(0,j.useEffect)((()=>{s&&(r(""),ws.toDataURL(s,{errorCorrectionLevel:"H",scale:t,margin:n,color:{dark:a,light:l}},((e,s)=>r(s))))}),[s,a,t,n,l]),(0,p.jsx)("img",{src:i,alt:s,style:{width:"100%"}})}const As={root:"styles_root__sSzNc",qr:"styles_qr__cpZSD"};function Es(e){var s;let{role:t}=e;M("\u041f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435");const n=m(),a={worker:"\u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0430",manager:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u0433\u043e"}[t],l={worker:"\u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u043e\u043c",manager:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u043c"}[t];return a?(0,p.jsxs)(T,{centered:!0,gap:"1rem",height100:!0,className:As.root,homeBtn:!0,children:[(0,p.jsxs)("h1",{children:["\u041f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u0434\u043e ",a]}),(0,p.jsx)("div",{className:As.qr,children:(0,p.jsx)(ks,{code:"promote_".concat(t,"_").concat(null===(s=n.data)||void 0===s?void 0:s.id),colorBg:"#ffffff00",scale:13})}),(0,p.jsxs)("h3",{children:["\u041f\u043e\u0441\u043b\u0435 \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u044c \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c\u0441\u044f ",l]})]}):(0,p.jsx)(T,{children:"\u041e\u0448\u0438\u0431\u043a\u0430!"})}const Is="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA4QAAACBCAMAAACvtYQnAAAAAXNSR0IB2cksfwAAAAlwSFlzAABcRgAAXEYBFJRDQQAAAJZQTFRFAAAAAAAA////RjFPiEc7/+e9oKmd/8kOoEoAU1NQfFs1HRQhQCxIKBwuNSU84tSzjpWLWFlVs7WjEg0UHxANv72nDgcHwHUEb3JsZTQrqK6fY2RgzMasBwQFmqKX9+K62c6wLiA0PB8a7Nu3zYcHsWACJhQUSychNBwZoUwEXzEpAAAAeX12blEv3p0Jej81g4mAAAAA6QvGggAAADJ0Uk5TAP///////////////////////////////////////////////////////8P//////yzgQytLAAAG90lEQVR4nO3d21rbOBRA4WxICDQhJJzP0CmlnWmn7bz/y00syyfJhnwQJG17/RctDb0QqVdjHQijET6YyHg8Fok9jK0S+fTpU5pfk8j+/n6aQ0M0RBiUyNPTU5pDQzREGJTIdDpNc2iIhgiDIkL4+hdhlqCk+hURIVwmwXG/MiRCqNLfCGOPogMRwtXDCIUIoUoWoeS/xB7KthAhdOldhAkvjBpECBcRBkaEcBFhYEQIFxEGRoTw9WyzngihT58ilKT36Q2+iwI+IgyKCOGzET7HHsf7pX4nahAhXIpPzHgjJkKoRISBESFcaiMUmUwas7//fiiJkNVRNKndJ/Qi/CFECJVURzjJOqweSH1h1OB2FC4iDIwI4epbhDGHtBEihEtrhJJFeL33WE4M0/4uwgpzQvh0npghQvSIxgjtvej1Xm4doPyrIkFuR9GGCIMiQviIMCgihEvniRkToS3wICcKticyzAnhIsLAiBCuPkS4tCWq+BKIEC6V+4TSFaGk/3pIhHBpj/D+frVaR7haESG0UhihXRo1EV4eHNgXxFX2kT3JlnKJRAgXEQZGhHBpjfA4T8+J0HAOdieGCOFTt1lPhOgbxREul+sIl8v77KObmxuT4PExEUIbxRGu8n16s0Vxr+J1kAjRhgiDIkK41J2YsWuj9QgP3Olgyl8KEcJFhIERIVx9iPDm8tIkeHaW+r3oKBv/r1+/0h4iAlO3T9gS4VLJdNDg+wnhIsLAiBAuxRE2p4MP6U8HDSKEiwgDI0K4VEb45fb2Oo/w8udPk+Dt7YOGe9EREaKNrs16862ER+X7WvzRNB00iBA+ZRFmtRURrm5MhNfX15oi/Pr1q4qRIhxNEdoJYRGhPap2pCdBNuvRhgiDIkK4dJ2YqSL8eXn5J58QPj7mazKxx7YhkYuLCxVPNkLRGuGNpvOidSzMwKU8wmMV50XreCWES9c+oRfho7IEmRPCR4SBESFcWiNcLpd7e0dfVK3JGOwTwqU1QlXnRetYmIFLU4RFgo9ne3tnt2vq7kVH2Rfx9PSkbMz4aHo2622EZ9mL4JfJRGOCzAnRhgiDIkL4FEZ49vCgNEEiRBuNEZYvgxqG3USEcGk6MVMuzBwVEcYe0RsQIVwKI5xM1N6LjogQPiIMjAiRqyZTCvcJNSfIZj0KRBgNESIjcnX1bK8DPRE2b0ZTH20nIkQma+57V4TJXh/1CNXsTZiBimU/IkL0I8LYo9mQtCBCFCuiV/blpL5Zn/KNaRVhogP0iezs7JhfDPtHVkdBhMEQIbrYvcHfv6v06o8neoWUEaY5vDZVf02JPsMIqLZBXxkpiVDNmsyoM0KRH7FHhtiURxh7IJvrjFDR14CPYVdHRRa7FUn9AJuJMNGxdei6HeV+FEQYCBGiS9bfYRbeSfbRvIww7dvR+mE7JexyqOxUvxmsj+LVCBO9QJIdWJcXI5Tm34w1RsShNUJ1iBAd1v/+WXULkausufM8SONc8k9yTWxB54ww83d2dq3aoGWaOCgiRBgGEaKDyCzLbSan48JfeZUNXBPvZiPMUjtpyXB/f79YJyXC4bDb8ptGWP1PjbfYMEKDCIeCCIMiQjiqtc8NIyyXSrk83iZPS1pWR4sl0vofeZYHgAhDI0I0FGfSarm1rY46HRaVcoG8Re12VLwEi9tRIhwOIgyPCNFAhOERIRxi38ainln92NquPbnmRcic8I1e3KxnTjhERBgaEcLnRNZ0UjbXiJBr482IED4iDIoI0Wp99zmftyQ4n8/Oz02E5+fF3yDC93kxwun04uKCCAepPLbmEPlnXK2FSjVFjD1gxV6LkNXRgSLCcIgQbewS6d2GEcYerm6vfT9h8wGe7aEgwoCIEL7yCMzzYuGszpycfLu6IsKtMj9/qbXA9eNEOFDVObQ7/6jaSf19uYlwC16M0PsUz/YwEGFQRAhXlWBrhMVyaLWjz2XxXubHoLVE2PYoz/YQEGFwRAiX6cvcb7YdmtndnZV2dw8PD7ks3stE6N14TqdEOFyvRei8KsYern5mk8L8iHrbmdFIsNzH4PkejHWEv8d3d1WE89azpPM5EW4BEaKFe2wti61lfsiJta0oCisjtI9Ks0oiHBbv7CgRfqANIqy9C0bkwSKgdYVFhoez2be177NGl7PZjHeW2Yr2CEfN8IhwkMqFGbtB77zvaPWWo7EHql3xo9Hs794nvI8xGCLm7Ohi8XyavwPw6Wl1mHSxOLWPcmG8FxGim5kH1nfvRT6Xr4O80eH2SDUPbP9E6ycxBEQYCBGiW7Fx34xwVn+USwP4SF6EUm5NECEQiBPh5zUiBIIqi7P7VfXNZOYpQABECESXRUhuQERECESWRxh7FMCgkSAQGRECAAC85H9dUmyofnI0YwAAAABJRU5ErkJggg==",Ss="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAAuCAYAAAD0kU3xAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtElEQVR4nO2cUY7DIAxEN6veJceMesyeJv2iclEIxLHBTOd9tRIEyGADNu2yb+v+R6bnf3QHiA0UEoSH/LI8X6P6QRTs2/r5TIsEgUKCQCFBoJAgUEgQKCQIj3qRfsjtdM7Z0eisntUzjuq2tnv0jFTX6sjXxSL3ba0O+upL0fZD23ZeRtPfVEfWtRq3u0XWZp4cyFmZUrlafc0ESs85Ei9q0GToGnl3NnrUl0JZuNNeuFqk9TrgzVE/l+erKngiL9dz3G4WGXXmouK+RlrMylkseiQuFklr7I/rZoeW1A9zIWmNY3CzSFpjXxhrBcFUyNnOjUjQIkGgkCBUAwItQW1Zbma3OmrHrU3fSaoWWco0kFg0hehk4DhyKucuLam2Hu1q2mteI9HdaiRyL9girGqzQxcbj0tCcr2My+U0VinR6sXIZO1MqPKRSczWo0kvftlLTBsQ0IqGKrb6hoB0sVpr1LppjbvNryBG8CAlNJ5u+AVlefWwJGrkl26BhZe45VotX/AIsTRtWt1Bsh7vIv8MAn3mo8FfLANCIUGgkCBQSBAoJAhf50jUqMcvQIsEgUKC8AZ00sAcaiLsEQAAAABJRU5ErkJggg==",Fs={root:"styles_root__CEdGL",background:"styles_background__dxeLP",body:"styles_body__o-6ZK",window:"styles_window__ASnVo",title:"styles_title__6wHPv",btn:"styles_btn__lL+tu",btn_empty:"styles_btn_empty__3NneV",items:"styles_items__yJ9sj",quests:"styles_quests__58NxQ",quest:"styles_quest__65tbN",quest_completed:"styles_quest_completed__6XOvB",questDescription:"styles_questDescription__bMEbk",questDescription__body:"styles_questDescription__body__-HZ3d"},Qs={root:"styles_root__sa0ap",rootInner:"styles_rootInner__PZESy",shadow:"styles_shadow__uQcvr",header:"styles_header__thHuO",bodyOuter:"styles_bodyOuter__+xkIs",body:"styles_body__27+PL"},Ls="data:image/png;base64,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";function Bs(e){let{children:s,title:t="Underparty",footer:n,className:a,scrollUpdate:l,onClose:i}=e;const r=(0,j.useRef)(null);return(0,j.useEffect)((()=>{r.current&&r.current.scrollTo(0,0)}),[l]),(0,p.jsxs)("div",{className:N(Qs.root,a),children:[(0,p.jsx)("div",{className:Qs.shadow,children:(0,p.jsx)("div",{})}),(0,p.jsxs)("div",{className:Qs.rootInner,children:[(0,p.jsxs)("div",{className:Qs.header,children:[(0,p.jsx)("div",{}),(0,p.jsx)("button",{onClick:i,children:(0,p.jsx)("img",{src:Ls,alt:"close"})})]}),(0,p.jsxs)("div",{className:Qs.bodyOuter,children:[(0,p.jsx)("div",{className:Qs.body,children:(0,p.jsx)("div",{ref:r,children:s})}),(0,p.jsx)("div",{children:n})]})]})]})}function qs(){M("\u041a\u0432\u0435\u0441\u0442\u044b");const e=Ve(),s=function(e,s){return(0,a.useMutation)({mutationFn:async e=>await r("/api/quest/".concat(e,"/open")),onSuccess:e,onError:s})}(),t=te(null,(t=>{t&&null!=t.dialogId&&!t.opened&&e.run(t.dialogId,(()=>{s.mutate(t.id),t.opened=!0}))})),n=(0,a.useQuery)("quests",(async()=>await d("/api/quests")));return(0,p.jsxs)(T,{centeredPage:!0,gap:"1em",className:Fs.root,footer:(0,p.jsx)(ys,{curPage:"quest"}),children:[e.el(),(0,p.jsx)("div",{className:Fs.background}),(0,p.jsx)("h1",{className:Fs.title,children:"Underparty"}),n.isLoading&&(0,p.jsx)(B,{}),(0,p.jsxs)("div",{className:Fs.body,children:[(0,p.jsx)(Bs,{className:Fs.window,title:"\u041a\u0432\u0435\u0441\u0442\u044b",footer:(0,p.jsx)("img",{className:Fs.items,src:Is,alt:""}),onClose:()=>t.set(null),children:t.v?(0,p.jsxs)("div",{className:Fs.questDescription,children:[(0,p.jsxs)("button",{className:N(Fs.quest,t.v.completed&&Fs.quest_completed),onClick:()=>t.set(null),children:[(0,p.jsx)("span",{children:t.v.name}),(0,p.jsx)("span",{children:Hs(t.v.reward)})]},t.v.id),t.v&&null!=t.v.dialogId?(0,p.jsx)("button",{onClick:()=>t.v&&null!=t.v.dialogId&&e.run(t.v.dialogId),children:"\u0412\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435"}):(0,p.jsx)("div",{}),(0,p.jsx)("div",{className:Fs.questDescription__body,children:t.v.description||"\u041d\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}),(0,p.jsx)(S.rU,{to:"/scanner",className:Fs.btn,children:(0,p.jsx)("img",{src:Ss,alt:"\u0421\u0434\u0430\u0442\u044c"})})]}):(0,p.jsxs)("div",{className:Fs.quests,children:[b(n),n.data&&Rs.concat(n.data).map((e=>(0,p.jsxs)("button",{className:N(Fs.quest,e.completed&&Fs.quest_completed),onClick:()=>t.set(e),children:[(0,p.jsx)("span",{children:e.name}),(0,p.jsx)("span",{children:Hs(e.reward)})]},e.id)))]})}),t.v?(0,p.jsx)("div",{className:Fs.btn_empty}):(0,p.jsx)(S.rU,{to:"/scanner",className:Fs.btn,children:(0,p.jsx)("img",{src:Ss,alt:"\u0421\u0434\u0430\u0442\u044c"})})]})]})}const Rs=[{id:-1,name:"\u0411\u0430\u0440\u0430\u0445\u043e\u043b\u043a\u0430",description:"\u0421\u0434\u0430\u0439\u0442\u0435 \u043e\u0434\u043d\u043e [\u0411\u0410\u0420\u0410\u0425\u041b\u041e], \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u043c\u0435\u043d\u044f\u0442\u044c \u0435\u0433\u043e \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0435 [\u0411\u0410\u0420\u0410\u0425\u041b\u041e] \u0438\u043b\u0438 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u0430\u043b\u044e\u0442\u0443 GGG!",reward:1/0,completed:!1,dialogId:-1,opened:!1}];function Hs(e){return isFinite(e)?e+"G":"\u221e"}function Ts(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>{const s=await u("/api/scanner",e);return t.setQueryData("user",(e=>((e=e||{auth:!1,id:"",balance:0,roles:[],name:"",last_name:"",photo:"",operations:[],group:-1}).balance=s.balance,"ok"==s.res&&"promote"==s.action&&ye(t,"user"),e))),s},onSuccess:e,onError:s})}const Ps={root:"styles_root__QdJnV",msg:"styles_msg__plnAU",msg_visible:"styles_msg_visible__G0rDm",msg_dimmed:"styles_msg_dimmed__0Xs60",bar:"styles_bar__VuYbs",bar_full:"styles_bar_full__poY0b"},Ds={error:"styles_error__EtK3I",video:"styles_video__b88Zl"},Us=t.p+"static/media/beep.38f199e084efe5461ffd.mp3";function Ms(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[t]=(0,j.useState)((()=>{const t=new Audio(e);return t.preload="auto",s&&t.addEventListener("ended",t.play),t}));return()=>{t.currentTime=0,t.play()}}var Os=t(1096);let Zs=e=>{},Gs=()=>{},zs=!1,Xs=null,Js=null;function Vs(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(!Js){Xs=document.createElement("div"),document.body.appendChild(Xs),Xs.style.display="flex",Xs.style.backgroundColor="black";const e=document.createElement("video");Xs.appendChild(e),Js=new Os.Z(e,(e=>Zs(e.data)),{highlightScanRegion:!0,maxScansPerSecond:10})}(0,j.useEffect)((()=>(setTimeout((()=>{var e;return null===(e=Js)||void 0===e?void 0:e.start().catch((()=>{setTimeout((()=>{var e;null===(e=Js)||void 0===e||e.start().catch((()=>Gs()))}),250)}))}),100),()=>{var e;null===(e=Js)||void 0===e||e.stop()})),[]);const[t,n]=(0,j.useState)(!1),[a,l]=(0,j.useState)(""),[i,r]=(0,j.useState)(zs),o=Ms(Us);return Zs=a=>{t||e||(l(a),n(!0),o(),setTimeout((()=>{l(""),n(!1)}),s))},Gs=()=>{zs=!0,r(!0)},i?{scanned:a,scanner:(0,p.jsxs)("div",{className:Ds.error,children:[(0,p.jsx)("h1",{children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435"}),(0,p.jsx)("p",{children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u043c\u0435\u0440\u044b \u044d\u0442\u043e\u043c\u0443 \u0441\u0430\u0439\u0442\u0443 \u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0443, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0442\u0435."}),(0,p.jsx)("p",{children:"\u041f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})]})}:{scanned:a,scanner:(0,p.jsx)("div",{children:(0,p.jsx)("div",{ref:e=>{e&&(e.innerHTML="",e.appendChild(Xs))},className:Ds.video})})}}function Ks(e){let{useMutation:s,onScan:t,formatMsg:n,onRes:a,className:l,pause:i}=e;const[r,o]=(0,j.useState)(""),[c,d]=(0,j.useState)(""),u=(0,j.useRef)(null),m=s((e=>{o(n(e)),d(""),x(),null===a||void 0===a||a(e)}),(e=>{o(""),d(y(e)),x()})),{scanned:h,scanner:v}=Vs(!m.isIdle||i);function x(){var e;setTimeout((()=>m.reset()),1e3),null===(e=u.current)||void 0===e||e.classList.add(Ps.bar_full),setTimeout((()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.classList.remove(Ps.bar_full)}),100)}return(0,j.useEffect)((()=>{if(""==h||!m.isIdle)return;o(""),d("");const e=t(h);e?m.mutate(e):d("\u041d\u0435 \u043e\u043f\u043e\u0437\u043d\u0430\u043d\u043e")}),[h]),(0,p.jsxs)("div",{className:N(Ps.root,l),children:[m.isLoading&&(0,p.jsx)(B,{}),v,(0,p.jsxs)("div",{className:N(Ps.msg,(r||c)&&Ps.msg_visible,(r||c)&&m.isIdle&&Ps.msg_dimmed),children:[(0,p.jsx)("h2",{children:r}),(0,p.jsx)("h2",{children:c})]}),(0,p.jsx)("div",{ref:u,className:Ps.bar})]})}const Ws={root:"styles_root__CrawG",background:"styles_background__sRVhE","anim-background":"styles_anim-background__FEgkK",body:"styles_body__WfmVk",gold:"styles_gold__NCkdw"};function Ys(){var e,s,t,a;M("\u0421\u043a\u0430\u043d\u0435\u0440");const l=ue(!1),i=se(null,l.setT),r=(0,n.s0)();return(0,p.jsxs)(T,{centeredPage:!0,gap:"1em",className:Ws.root,footer:(0,p.jsx)(ys,{}),homeBtn:!0,children:[(0,p.jsx)("div",{className:Ws.background}),(0,p.jsx)(Bs,{title:"QR-\u0410\u043a\u0442\u0438\u0432\u0430\u0442\u043e\u0440",disableScroll:!0,className:Ws.body,onClose:()=>r(-1),children:(0,p.jsx)(Ks,{useMutation:Ts,pause:l.v,onScan:e=>{const s=["quest_","item_","send_","promote_"];for(const t of s)if(e.startsWith(t))return{code:e};return null},formatMsg:e=>{var s;return null!==(s={ok:"",wrong:"\u041d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 QR",error:e.msg}[e.res])&&void 0!==s?s:e.res},onRes:e=>{"ok"==e.res&&i.set(e)}})}),(0,p.jsxs)(V,{title:"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043e",open:l.v,close:l.setF,children:["quest"==(null===(e=i.v)||void 0===e?void 0:e.action)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{children:"\u041a\u0432\u0435\u0441\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d!"}),(0,p.jsx)("br",{}),(0,p.jsx)("h2",{children:i.v.msg}),(0,p.jsx)("br",{}),(0,p.jsxs)("h2",{children:[(0,p.jsx)("span",{children:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430: "}),(0,p.jsxs)("span",{className:Ws.gold,children:[i.v.value,"G"]})]})]}),"store"==(null===(s=i.v)||void 0===s?void 0:s.action)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{children:"\u041a\u0443\u043f\u043b\u0435\u043d\u043e!"}),(0,p.jsx)("br",{}),(0,p.jsx)("h2",{children:i.v.msg}),(0,p.jsx)("br",{}),(0,p.jsxs)("h2",{children:[(0,p.jsx)("span",{children:"\u041f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043e: "}),(0,p.jsxs)("span",{className:Ws.gold,children:[i.v.value,"G"]})]})]}),"send"==(null===(t=i.v)||void 0===t?void 0:t.action)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{children:i.v.value>0?"\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u043e":"\u0412\u044b\u0447\u0442\u0435\u043d\u043e"}),(0,p.jsx)("br",{}),(0,p.jsxs)("h1",{className:Ws.gold,children:[i.v.value>0?"+":"",i.v.value,"G"]})]}),"promote"==(null===(a=i.v)||void 0===a?void 0:a.action)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}),(0,p.jsx)("br",{}),(0,p.jsxs)("h2",{children:["\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b ",{worker:"\u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440",manager:"\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0439"}[i.v.msg]||"\u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"]})]})]})]})}const $s={block:"styles_block__jLSvl",value:"styles_value__AMUT8",action:"styles_action__S+Amy",reusable:"styles_reusable__AlAhN",checkbox:"styles_checkbox__5B3El",qr:"styles_qr__NIQPC",send:"styles_send__R5BDM",check:"styles_check__tkMiQ",notUsed:"styles_notUsed__BJDX-",used:"styles_used__GIw2A"};function et(){var e,s,t,n,l,i,r,o;M("\u041a\u0430\u0437\u043d\u0430\u0447\u0435\u0439\u0441\u0442\u0432\u043e");const c=ue(!1),d=se(null,c.setT),m=(h=d.set,(0,a.useMutation)({mutationFn:async e=>await u("/api/send",e),onSuccess:h}));var h;const v=function(e){return(0,a.useMutation)({mutationFn:async e=>await u("/api/send_check",{id:e}),onSuccess:e})}(),x=ue(!1),g=se(1);function j(e){m.mutate({value:g.v,positive:e,reusable:x.v}),v.reset()}return(0,p.jsxs)(T,{centered:!0,homeBtn:!0,children:[(0,p.jsx)("h2",{children:"\u041a\u0430\u0437\u043d\u0430\u0447\u0435\u0439\u0441\u0442\u0432\u043e"}),m.isLoading&&(0,p.jsx)(B,{}),v.isLoading&&(0,p.jsx)(B,{}),b(m),(0,p.jsxs)("div",{className:$s.block,children:[(0,p.jsx)("input",{className:$s.value,type:"number",name:"value",value:g.v,onChange:e=>g.set(Math.max(1,e.target.valueAsNumber))}),(0,p.jsxs)("label",{className:$s.reusable,children:[(0,p.jsx)("span",{children:"\u041c\u043d\u043e\u0433\u043e\u0440\u0430\u0437\u043e\u0432\u044b\u0439"}),(0,p.jsxs)("div",{className:$s.checkbox,children:[(0,p.jsx)("input",{type:"checkbox",checked:x.v,onChange:e=>x.set(e.target.checked)}),(0,p.jsx)("span",{})]})]}),(0,p.jsxs)("div",{className:$s.action,children:[(0,p.jsx)("button",{onClick:()=>j(!0),children:"\u041d\u0430\u0447\u0438\u0441\u043b\u0438\u0442\u044c"}),(0,p.jsx)("button",{onClick:()=>j(!1),children:"\u0421\u043f\u0438\u0441\u0430\u0442\u044c"})]})]}),(0,p.jsxs)(V,{title:null!==(e=d.v)&&void 0!==e&&e.reusable?"\u041c\u043d\u043e\u0433\u043e\u0440\u0430\u0437\u043e\u0432\u044b\u0439":"\u041e\u0434\u043d\u043e\u0440\u0430\u0437\u043e\u0432\u044b\u0439",open:c.v,close:c.setF,children:[(0,p.jsx)("div",{className:$s.qr,children:(0,p.jsx)(ks,{code:"send_"+(null===(s=d.v)||void 0===s?void 0:s.id),colorBg:"#ffffff00",scale:13})}),(0,p.jsxs)("div",{className:$s.send,children:[(0,p.jsx)("h2",{children:null!==(t=d.v)&&void 0!==t&&t.positive?"\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435":"\u0421\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,p.jsxs)("h1",{children:[null!==(n=d.v)&&void 0!==n&&n.positive?"+":"-",null===(l=d.v)||void 0===l?void 0:l.value," G"]})]}),b(v),!(null!==(i=d.v)&&void 0!==i&&i.reusable)&&(0,p.jsxs)("div",{className:$s.check,children:[(0,p.jsx)("button",{onClick:()=>{var e;return v.mutate((null===(e=d.v)||void 0===e?void 0:e.id)||"")},children:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c"}),(0,p.jsx)("span",{className:null!==(r=v.data)&&void 0!==r&&r.successful?$s.used:$s.notUsed,children:null!==(o=v.data)&&void 0!==o&&o.successful?"\u0423\u0441\u043f\u0435\u0448\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0434":"\u041d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d"})]})]})]})}const st={root:"styles_root__0CejE",list:"styles_list__4uN5e",title:"styles_title__u3Xt9",items:"styles_items__n-Fvc",item:"styles_item__zIxt2",item__img:"styles_item__img__r3iEr",item__desc:"styles_item__desc__wbcAM",item_few:"styles_item_few__nkL6C",item_ended:"styles_item_ended__Mn60C"};function tt(){var e;M("\u041c\u0430\u0433\u0430\u0437\u0438\u043d");const s=(0,a.useQuery)("storeItems",(async()=>await d("/api/store_items")));return(0,p.jsxs)(T,{centeredPage:!0,gap:"1em",className:st.root,footer:(0,p.jsx)(ys,{curPage:"store"}),children:[s.isLoading&&(0,p.jsx)(B,{}),(0,p.jsx)("h1",{className:N("title",st.title),children:"\u0418\u043d\u0434\u0438\u043a\u043e\u043d"}),(0,p.jsx)(Bs,{title:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d",className:st.list,children:(0,p.jsxs)("div",{className:st.items,children:[b(s),null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,p.jsxs)(S.rU,{to:"/scanner",className:N(st.item,"few"==e.count&&st.item_few,"no"==e.count&&st.item_ended),children:[(0,p.jsx)("div",{className:st.item__img,children:(0,p.jsx)("div",{children:e.img?(0,p.jsx)("img",{src:e.img,alt:"\u0422\u043e\u0432\u0430\u0440"}):(0,p.jsx)("div",{})})}),(0,p.jsx)(ce,{small:!0,dark:!0,btn:!0,children:(0,p.jsxs)("div",{className:st.item__desc,children:[(0,p.jsxs)("span",{children:[e.name," - "]}),(0,p.jsxs)("span",{children:[e.price,"\u041c"]})]})})]},e.id)))]})})]})}const nt={root:"styles_root__E5y+5",title:"styles_title__3QqY9",body:"styles_body__nvDgq",list:"styles_list__6yPeV",items:"styles_items__UxmDm",item:"styles_item__F46+o",item_title:"styles_item_title__X67MD",btns:"styles_btns__Ctsik",btn:"styles_btn__pG0e4"};function at(){M("\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435");const e=se(0),s=[lt,it,rt,ot][e.v];return(0,p.jsxs)(T,{centeredPage:!0,className:nt.root,footer:(0,p.jsx)(ys,{curPage:"timetable"}),children:[(0,p.jsx)("h1",{className:N("title",nt.title),children:"\u0418\u043d\u0434\u0438\u043a\u043e\u043d"}),(0,p.jsxs)("div",{className:nt.body,children:[(0,p.jsx)(Bs,{className:nt.list,scrollUpdate:e.v,children:(0,p.jsx)("div",{className:nt.items,children:s.map(((e,s)=>e.title?(0,p.jsx)("div",{className:N("title",nt.item_title),children:e.text},s):(0,p.jsx)(ce,{dark:!0,children:(0,p.jsx)("div",{className:nt.item,children:e.text})},s)))})}),(0,p.jsxs)("div",{className:nt.btns,children:[(0,p.jsx)(ce,{small:!0,btn:!0,highlight:0==e.v,children:(0,p.jsx)("button",{onClick:()=>e.set(0),className:N(nt.btn,"title"),children:"\u0421\u0446\u0435\u043d\u044b"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:1==e.v,children:(0,p.jsx)("button",{onClick:()=>e.set(1),className:N(nt.btn,"title"),children:"\u0410\u0432\u0442\u043e\u0433\u0440\u0430\u0444"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:2==e.v,children:(0,p.jsx)("button",{onClick:()=>e.set(2),className:N(nt.btn,"title"),children:"\u041b\u0435\u043a\u0446\u0438\u0438"})}),(0,p.jsx)(ce,{small:!0,btn:!0,highlight:3==e.v,children:(0,p.jsx)("button",{onClick:()=>e.set(3),className:N(nt.btn,"title"),children:"\u0422\u0443\u0440\u043d\u0438\u0440\u044b"})})]})]})]})}const lt=[{text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0446\u0435\u043d\u0430:",title:!0},{text:"12:50 - \u0426\u0435\u0440\u0435\u043c\u043e\u043d\u0438\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f"},{text:"13:00 - \u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430"},{text:"13:30 - 1 \u0431\u043b\u043e\u043a \u043a\u043e\u0441\u043f\u043b\u0435\u0439 \u0434\u0435\u0444\u0438\u043b\u0435"},{text:"14:00 - Shima Nori. \u0418\u043d\u0434\u0438 \u0438\u0433\u0440\u044b \u043d\u0430 \u0444\u043e\u0440\u0442\u0435\u043f\u0438\u0430\u043d\u043e"},{text:"14:30 - \u0410\u0443\u043a\u0446\u0438\u043e\u043d"},{text:"14:50 - Undertale \u0421\u0446\u0435\u043d\u043a\u0430: Underdogs"},{text:"15:00 - 2 \u0431\u043b\u043e\u043a \u043a\u043e\u0441\u043f\u043b\u0435\u0439 \u0434\u0435\u0444\u0438\u043b\u0435"},{text:"15:40 - \u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430"},{text:"16:15 - \u0411\u043b\u043e\u043a \u0410\u043d\u0438\u043c\u0430\u0446\u0438\u0438: \u0410\u043d\u0442\u0438\u041a\u0435\u043a, BDP, CornMayor"},{text:"17:00 - \u0412\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u043c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0433\u0440\u0443\u043f\u043f"},{text:"18:10 - \u0424\u0438\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u0411\u0438\u0442\u0432\u0430"},{text:"18:25 - \u041d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435"},{text:"18:50 - \u0410\u043d\u0438\u043c\u0430\u0446\u0438\u0438"},{text:"19:50 - \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u0446\u0435\u043d\u044b"},{text:"\u041c\u0430\u043b\u0430\u044f \u0441\u0446\u0435\u043d\u0430:",title:!0},{text:"12:00 - \u041e\u0442\u0432\u0435\u0442\u044b \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043e\u0442 \u042e\u0442\u0443\u0431\u0435\u0440\u043e\u0432"},{text:"12:40 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f"},{text:"13:30 - QWIZ \u0418\u043d\u0434\u0438 \u0445\u043e\u0440\u0440\u043e\u0440\u044b"},{text:"14:00 - EVRYBODY SWITCH"},{text:"15:00 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f"},{text:"15:30 - QWIZ \u043f\u0438\u043a\u0441\u0435\u043b\u044c\u043d\u044b\u0435 \u0420\u041f\u0413"},{text:"16:00 - \u0422\u0443\u0440\u043d\u0438\u0440: Overcooked 2"},{text:"16:40 - \u0422\u0443\u0440\u043d\u0438\u0440: Your Only Move Is HUSTLE"},{text:"17:20 - \u0422\u0443\u0440\u043d\u0438\u0440: Rival of Aether"},{text:"18:00 - \u041b\u043e\u0442\u0435\u0440\u0435\u044f"},{text:"18:45 - \u0414\u0438\u0441\u043a\u043e\u0442\u0435\u043a\u0430"},{text:"19:45 - \u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435 \u0441\u0446\u0435\u043d\u044b"},{text:"\u0418\u043d\u0434\u0438 \u0421\u0446\u0435\u043d\u0430:",title:!0},{text:"13:00 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0438\u043d\u0434\u0438-\u0438\u0433\u0440"},{text:"14:00 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 Game Jam"},{text:"15:00 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0438\u043d\u0434\u0438-\u0438\u0433\u0440"},{text:"16:00 - \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0434\u0436\u0435\u043c\u0430"},{text:"16:30 - \u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0438\u043d\u0434\u0438-\u0438\u0433\u0440"}],it=[{text:"13:30 - \u0410\u043d\u0442\u0438\u041a\u0435\u043a"},{text:"14:00 - \u0411\u0435\u043c\u043e\u043d"},{text:"14:30 - JF Voice \u0438 FolkStudio"},{text:"15:00 - \u041d\u0435\u0430\u0434\u0435\u043a\u0432\u0430\u0442 \u0420\u0435\u043a\u043e\u0440\u0434\u0441"},{text:"15:30 - WonderNope"},{text:"16:00 - \u0418\u0433\u043e\u0440\u044c \u0427\u0430\u0439 (\u0442\u0432)"},{text:"16:30 - \u0429\u0438\u0449 (\u0438\u0433\u0440\u0430 \u0432 Uno)"}],rt=[{text:"13:00 - \u041e \u0444\u0440\u0430\u043d\u0448\u0438\u0437\u0435 Hylics"},{text:"13:40 - \u0418\u043d\u0434\u0438 \u0438\u0433\u0440\u044b \u043a\u0430\u043a \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e"},{text:"14:10 - \u041a\u0430\u043a \u043d\u0430\u0439\u0442\u0438 \u2728\u0442\u0443 \u0441\u0430\u043c\u0443\u044e\u2728 \u0438\u0434\u0435\u044e \u0434\u043b\u044f \u0438\u0433\u0440\u044b"},{text:"14:40 - \u041a\u0440\u0430\u0443\u0434\u0444\u0430\u043d\u0434\u0438\u043d\u0433 \u0430\u0432\u0442\u043e\u0440\u0441\u043a\u043e\u0439 \u0438\u0433\u0440\u044b"},{text:"15:20 - \u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 Touhou Project \u0438 \u043a\u0430\u043a \u0435\u0433\u043e \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0442\u044c?"},{text:"16:00 - \u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0430\u0434 \u0432 \u0438\u0433\u0440\u043e\u0432\u043e\u0439 \u0438\u043d\u0434\u0443\u0441\u0442\u0440\u0438\u0438"},{text:"16:40 - \u0410\u043d\u0430\u043b\u0438\u0437 \u0438\u0433\u0440 \u0434\u043b\u044f \u0433\u0435\u0439\u043c-\u0434\u0438\u0437\u0430\u0439\u043d\u0435\u0440\u043e\u0432 \u0438 \u043e\u0431\u0437\u043e\u0440\u0449\u0438\u043a\u043e\u0432"}],ot=[{text:"\u0418\u043d\u0434\u0438 \u0422\u0443\u0440\u043d\u0438\u0440\u044b (\u043d\u0430 \u043c\u0430\u043b\u043e\u0439 \u0441\u0446\u0435\u043d\u0435):",title:!0},{text:"16:00 - Overcooked 2"},{text:"16:40 - Your Only Move Is HUSTLE"},{text:"17:20 - Rival of Aether"},{text:"\u0420\u0435\u0442\u0440\u043e \u0422\u0443\u0440\u043d\u0438\u0440\u044b (\u043d\u0430 \u0433\u0435\u0439\u043c \u0437\u043e\u043d\u0435):",title:!0},{text:"13:00 - Super Tetris 3"},{text:"14:00 - Tekken 3"},{text:"15:00 - Mortal Combat 3"}],ct={user:"styles_user__WUZvf",title:"styles_title__Gd1jL",toggle:"styles_toggle__qlIwC",toggleInp:"styles_toggleInp__fGE-7",userInfo:"styles_userInfo__vgBlw",operations:"styles_operations__MGBbv"};function dt(){var e;M("Users");const s=(0,a.useQuery)("users",(async()=>await d("/api/users")));return(0,p.jsxs)(T,{centeredPage:!0,homeBtn:!0,gap:8,styles:{fontFamily:"'PT Sans', Arial",background:"#1e1e1e"},children:[s.isLoading&&(0,p.jsx)("h3",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),b(s),null===(e=s.data)||void 0===e?void 0:e.map((e=>(0,p.jsxs)("div",{className:ct.user,children:[(0,p.jsx)("input",{type:"checkbox",className:ct.toggleInp,id:"user".concat(e.id)}),(0,p.jsxs)("label",{className:ct.title,htmlFor:"user".concat(e.id),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:e.login}),(0,p.jsx)("div",{style:{color:"blue"},children:e.id}),(0,p.jsx)("div",{children:"|"}),(0,p.jsx)("div",{children:e.name})]}),(0,p.jsxs)("div",{children:[e.deleted&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{color:"tomato"},children:"deleted"}),(0,p.jsx)("div",{children:"|"})]}),(0,p.jsx)("span",{children:e.roles.join(", ")}),(0,p.jsx)("div",{className:ct.toggle})]})]}),(0,p.jsx)("div",{className:ct.userInfo,children:(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:"Operations"}),(0,p.jsx)("div",{className:ct.operations,children:e.operations.map(((e,s)=>(0,p.jsx)("div",{children:ut(e)},s)))})]})})]},e.id)))]})}function ut(e){const s={page:"#990099",add:"#008000",get:"#008000",change:"#006fb3",delete:"#b30000"};for(const t in s)if(e.startsWith(t))return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{style:{color:s[t]},children:t}),(0,p.jsx)("span",{children:e.slice(t.length)})]});return(0,p.jsx)("span",{children:e})}const mt={btn:"styles_btn__w12Ul"};function ht(){return(0,p.jsxs)(T,{centered:!0,homeBtn:!0,gap:"1rem",children:[x("manage_store")&&(0,p.jsx)(S.rU,{to:"/manage_store",className:mt.btn,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u043e\u043c"}),x("manage_quest")&&(0,p.jsx)(S.rU,{to:"/manage_quest",className:mt.btn,children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0432\u0435\u0441\u0442\u0430\u043c\u0438"}),x("page_worker_quest")&&(0,p.jsx)(S.rU,{to:"/worker_quest",className:mt.btn,children:"\u0414\u043b\u044f \u043a\u0432\u0435\u0441\u0442\u043e\u0432\u0438\u043a\u043e\u0432"}),x("page_worker_store")&&(0,p.jsx)(S.rU,{to:"/worker_store",className:mt.btn,children:"\u0414\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u043e\u0432"}),x("send_any")&&(0,p.jsx)(S.rU,{to:"/send",className:mt.btn,children:"\u041a\u0430\u0437\u043d\u0430\u0447\u0435\u0439\u0441\u0442\u0432\u043e"}),x("promote_worker")&&(0,p.jsx)(S.rU,{to:"/promote_worker",className:mt.btn,children:"\u041f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0434\u043e \u0432\u043e\u043b\u043e\u043d\u0442\u0451\u0440\u0430"}),x("promote_manager")&&(0,p.jsx)(S.rU,{to:"/promote_manager",className:mt.btn,children:"\u041f\u043e\u0432\u044b\u0441\u0438\u0442\u044c \u0434\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u0433\u043e"}),x("manage_games")&&(0,p.jsx)(S.rU,{to:"/game_settings",className:mt.btn,children:"\u0418\u0433\u0440\u0430"})]})}const vt={root:"styles_root__Ch43Y",quests:"styles_quests__CJF3F",quest:"styles_quest__la9IG",quest_hidden:"styles_quest_hidden__895fL",qr:"styles_qr__CpwFg",questCard:"styles_questCard__LUpC3"};function xt(){var e,s,t,n;M("Qr \u041a\u0432\u0435\u0441\u0442\u044b");const a=Ce(),l=ue(!1),i=se(null,l.setT);return(0,p.jsxs)(T,{centered:!0,homeBtn:!0,gap:"1rem",height100:!0,className:vt.root,children:[a.isLoading&&(0,p.jsx)(B,{}),b(a),(0,p.jsx)("h2",{children:"\u041a\u0430\u043a\u043e\u0439 \u043a\u0432\u0435\u0441\u0442 \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435?"}),(0,p.jsx)("div",{className:vt.quests,children:null===(e=a.data)||void 0===e?void 0:e.map((e=>(0,p.jsx)("button",{onClick:()=>i.set(e),className:N(vt.quest,e.hidden&&vt.quest_hidden),children:e.name},e.id)))}),(0,p.jsxs)(V,{title:"\u041a\u043e\u0434 \u043a\u0432\u0435\u0441\u0442\u0430",open:l.v,close:l.setF,children:[(0,p.jsx)("div",{className:vt.qr,children:(0,p.jsx)(ks,{code:"quest_".concat(null===(s=i.v)||void 0===s?void 0:s.id_big),colorBg:"#ffffff00",scale:13})}),(0,p.jsxs)("div",{className:vt.questCard,children:[(0,p.jsx)("div",{children:null===(t=i.v)||void 0===t?void 0:t.name}),(0,p.jsxs)("div",{children:[null===(n=i.v)||void 0===n?void 0:n.reward," G"]})]}),(0,p.jsx)("h3",{children:"QR-\u043a\u043e\u0434 \u0434\u043b\u044f \u0437\u0430\u0447\u0451\u0442\u0430 \u043a\u0432\u0435\u0441\u0442\u0430"})]})]})}const gt={items:"styles_items__ph2vL",item:"styles_item__t2Q7S",item__img:"styles_item__img__9MSeY",item__desc:"styles_item__desc__vFBVd",qr:"styles_qr__Sgcly",item_small:"styles_item_small__EPwTh"};function jt(){var e,s,t,n,a,l;M("Qr \u0422\u043e\u0432\u0430\u0440\u044b");const i=is(),r=ue(!1),o=se(null,r.setT);return(0,p.jsxs)(T,{centeredPage:!0,gap:"1rem",height100:!0,homeBtn:!0,children:[(0,p.jsx)("h1",{children:"\u041f\u0440\u043e\u0434\u0430\u0436\u0430"}),i.isLoading&&(0,p.jsx)(B,{}),b(i),(0,p.jsx)("div",{className:gt.items,children:null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.map((e=>(0,p.jsxs)("button",{className:gt.item,onClick:()=>o.set(e),children:[(0,p.jsx)("div",{className:gt.item__img,children:e.img?(0,p.jsx)("img",{src:e.img,alt:"\u0422\u043e\u0432\u0430\u0440"}):(0,p.jsx)("div",{})}),(0,p.jsxs)("div",{className:gt.item__desc,children:[(0,p.jsx)("span",{children:e.name}),(0,p.jsxs)("span",{children:[e.price," G"]})]})]},e.id)))}),(0,p.jsxs)(V,{title:"\u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0430",open:r.v,close:r.setF,children:[(0,p.jsx)("div",{className:gt.qr,children:(0,p.jsx)(ks,{code:"item_".concat(null===(s=o.v)||void 0===s?void 0:s.id_big),colorBg:"#ffffff00",scale:13})}),(0,p.jsxs)("div",{className:gt.item_small,children:[(0,p.jsx)("div",{className:gt.item__img,children:null!==(t=o.v)&&void 0!==t&&t.img?(0,p.jsx)("img",{src:null===(n=o.v)||void 0===n?void 0:n.img,alt:"\u0422\u043e\u0432\u0430\u0440"}):(0,p.jsx)("div",{})}),(0,p.jsx)("div",{children:null===(a=o.v)||void 0===a?void 0:a.name}),(0,p.jsxs)("div",{children:[null===(l=o.v)||void 0===l?void 0:l.price," G"]})]}),(0,p.jsx)("h3",{children:"QR-\u043a\u043e\u0434 \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u0442\u043e\u0432\u0430\u0440\u0430"})]})]})}const _t={root:"styles_root__lfouU",title:"styles_title__VD3jB",title2:"styles_title2__U2DmF",title3:"styles_title3__eIdeM",subtitle:"styles_subtitle__FPJqV",window:"styles_window__hv3AU",text:"styles_text__LeEDg",press:"styles_press__jAlFs",press__btn:"styles_press__btn__w-3Uv",circle:"styles_circle__+PsDd","anim-circle":"styles_anim-circle__cc5jy"};function pt(){return(0,a.useQuery)("gameState",(async()=>await d("/api/game/state")))}function yt(){var e,s,t,n,l,i,r,o,c;M("\u0418\u0433\u0440\u0430"),(0,j.useEffect)((()=>{const e=document.querySelector('meta[name="viewport"]');if(!e)return;const s=e.getAttribute("content")||"";return console.log(s),e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"),()=>e.setAttribute("content",s)}),[]);const d=m(),h=pt(),v=se(0),x=se(0),g=se(Date.now()),_=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/game/click",{count:e}),onSuccess:s=>{t.setQueryData("gameState",s),null===e||void 0===e||e()},onError:s})}();return(0,j.useEffect)((()=>{var e;if(h.isFetching)return;if("going"==(null===(e=h.data)||void 0===e?void 0:e.state))return;const s=setTimeout((()=>h.refetch()),5e3);return()=>clearTimeout(s)}),[h.isFetching]),(0,j.useEffect)((()=>{if(!h.data)return;if(v.set(h.data.counter),h.data.counter<0)return;const e=setInterval((()=>{v.set((s=>(0==(s=Math.max(s-1,0))&&(h.refetch(),clearInterval(e)),s)))}),1e3);return()=>clearInterval(e)}),[h.data]),(0,j.useEffect)((()=>{var e;"going"==(null===(e=h.data)||void 0===e?void 0:e.state)&&(x.v<=0||_.isLoading||Date.now()-g.v<2500||(_.mutate(x.v),g.set(Date.now()),x.set(0)))}),[x.v]),(0,p.jsxs)(T,{centeredPage:!0,gap:"1em",className:_t.root,footer:(0,p.jsx)(ys,{curPage:"game"}),children:[h.isLoading&&(0,p.jsx)(B,{}),b(h),(0,p.jsx)("h1",{className:N("title",_t.title),children:"\u0418\u043d\u0434\u0438\u043a\u043e\u043d"}),(0,p.jsxs)(Bs,{className:_t.window,children:[(h.isLoading||"wait"==(null===(e=h.data)||void 0===e?void 0:e.state))&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:_t.text,children:(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{children:"\u0414\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f \u0432 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u0431\u0438\u0442\u0432\u0435 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0446\u0435\u043d\u0443"}),(null===(s=h.data)||void 0===s?void 0:s.start)&&(0,p.jsxs)("span",{children:[" \u0432 ",h.data.start]})]})})}),"start"==(null===(t=h.data)||void 0===t?void 0:t.state)&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:_t.text,children:[(0,p.jsx)("div",{className:_t.title2,children:1==(null===(n=d.data)||void 0===n?void 0:n.group)?"\u0421\u0430\u043f\u043e\u0436\u043d\u0438\u043a":"\u041a\u0430\u043a\u0442\u0443\u0441"}),(0,p.jsx)("h2",{className:_t.subtitle,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u043d\u0430\u0447\u0430\u043b\u0430"}),(0,p.jsxs)("h1",{className:_t.title,children:[Math.floor(v.v/60),":",(v.v%60).toString().padStart(2,"0")]})]})}),"going"==(null===(l=h.data)||void 0===l?void 0:l.state)&&(0,p.jsxs)("button",{className:_t.press,onClick:e=>{!function(e){const s=e instanceof HTMLButtonElement?e:e.parentElement,t=document.createElement("div");s.appendChild(t),t.classList.add(_t.circle),setTimeout((()=>s.removeChild(t)),1e3)}(e.target),x.set((e=>e+1))},children:[(0,p.jsx)("h1",{className:_t.title2,children:1==(null===(i=d.data)||void 0===i?void 0:i.group)?"\u0421\u0430\u043f\u043e\u0436\u043d\u0438\u043a":"\u041a\u0430\u043a\u0442\u0443\u0441"}),(0,p.jsx)("div",{className:N("title",_t.press__btn),children:"\u0416\u043c\u0438!!!"})]}),"end"==(null===(r=h.data)||void 0===r?void 0:r.state)&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:_t.text,children:[(0,p.jsx)("div",{className:_t.title2,children:1==(null===(o=d.data)||void 0===o?void 0:o.group)?"\u0421\u0430\u043f\u043e\u0436\u043d\u0438\u043a":"\u041a\u0430\u043a\u0442\u0443\u0441"}),(0,p.jsx)("h1",{className:_t.title3,children:0==h.data.winner?"\u0418\u0433\u0440\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430!":(null===(c=d.data)||void 0===c?void 0:c.group)==h.data.winner?"\u041f\u043e\u0431\u0435\u0434\u0430!":"\u041f\u0440\u043e\u0438\u0433\u0440\u044b\u0448!"})]})})]})]})}const bt={input:"styles_input__xbjXW",openScreen:"styles_openScreen__MsUEq",start:"styles_start__RrOg2"};function ft(){var e;M("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0433\u043e\u043d\u043e\u043a");const s=pt(),t=(0,a.useQuery)("gameDuration",(async()=>await d("/api/game/duration"))),n=(0,a.useQuery)("gameCounter",(async()=>await d("/api/game/counter"))),l=(0,a.useQuery)("gameStartStr",(async()=>await d("/api/game/startStr"))),i=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/game/duration",{duration:e}),onSuccess:s=>{t.setQueryData("gameDuration",s),null===e||void 0===e||e(s)},onError:s})}(),o=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/game/counter",{counter:e}),onSuccess:s=>{t.setQueryData("gameCounter",s),null===e||void 0===e||e(s)},onError:s})}(),c=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async e=>await u("/api/game/startStr",{startStr:e}),onSuccess:s=>{t.setQueryData("gameStartStr",s),null===e||void 0===e||e(s)},onError:s})}(),m=se(0),h=se(0),v=se(""),x=ue(!1),g=ue(!1),_=ue(!1),y=ue(!1),f=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>await r("/api/game/start"),onSuccess:()=>{var s;"success"==(null===(s=t.getQueryState("gameState"))||void 0===s?void 0:s.status)&&t.setQueryData("gameState",(e=>({...e,state:"start"}))),null===e||void 0===e||e()},onError:s})}(g.setT),N=function(e,s){const t=(0,a.useQueryClient)();return(0,a.useMutation)({mutationFn:async()=>await r("/api/game/reset"),onSuccess:()=>{var s;"success"==(null===(s=t.getQueryState("gameState"))||void 0===s?void 0:s.status)&&t.setQueryData("gameState",(e=>({...e,state:"wait"}))),null===e||void 0===e||e()},onError:s})}(y.setT);return(0,j.useEffect)((()=>{var e;return m.set((null===(e=t.data)||void 0===e?void 0:e.duration)||0)}),[t.data]),(0,j.useEffect)((()=>{var e;return h.set((null===(e=n.data)||void 0===e?void 0:e.counter)||0)}),[n.data]),(0,j.useEffect)((()=>{var e;return v.set((null===(e=l.data)||void 0===e?void 0:e.startStr)||"")}),[l.data]),(0,p.jsxs)(T,{centeredPage:!0,homeBtn:!0,gap:"2rem",children:[(0,p.jsx)("h1",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438\u0433\u0440\u044b"}),f.isLoading&&(0,p.jsx)(B,{}),t.isLoading&&(0,p.jsx)(B,{}),n.isLoading&&(0,p.jsx)(B,{}),i.isLoading&&(0,p.jsx)(B,{}),o.isLoading&&(0,p.jsx)(B,{}),c.isLoading&&(0,p.jsx)(B,{}),N.isLoading&&(0,p.jsx)(B,{}),l.isLoading&&(0,p.jsx)(B,{}),b(f),b(t),b(n),b(i),b(o),b(N),b(c),(0,p.jsx)(S.rU,{to:"/game_screen",className:bt.openScreen,children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u044d\u043a\u0440\u0430\u043d"}),(0,p.jsxs)("div",{className:bt.input,children:[(0,p.jsx)("span",{children:"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430"}),(0,p.jsx)("input",{type:"text",value:v.v,onChange:e=>v.set(e.target.value)}),l.data&&v.v!=l.data.startStr&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:()=>c.mutate(v.v),children:(0,p.jsx)(Re,{})}),(0,p.jsx)("button",{onClick:()=>v.set(l.data.startStr),children:(0,p.jsx)(qe,{})})]})]}),(0,p.jsxs)("div",{className:bt.input,children:[(0,p.jsx)("span",{children:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0438\u0433\u0440\u044b (\u0441\u0435\u043a.)"}),(0,p.jsx)("input",{type:"number",value:m.v,onChange:e=>m.set(e.target.valueAsNumber)}),t.data&&m.v!=t.data.duration&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:()=>i.mutate(m.v),children:(0,p.jsx)(Re,{})}),(0,p.jsx)("button",{onClick:()=>m.set(t.data.duration),children:(0,p.jsx)(qe,{})})]})]}),(0,p.jsxs)("div",{className:bt.input,children:[(0,p.jsx)("span",{children:"\u041e\u0431\u0440\u0430\u0442\u043d\u044b\u0439 \u043e\u0442\u0441\u0447\u0451\u0442 (\u0441\u0435\u043a.)"}),(0,p.jsx)("input",{type:"number",value:h.v,onChange:e=>h.set(e.target.valueAsNumber)}),n.data&&h.v!=n.data.counter&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{onClick:()=>o.mutate(h.v),children:(0,p.jsx)(Re,{})}),(0,p.jsx)("button",{onClick:()=>h.set(n.data.counter),children:(0,p.jsx)(qe,{})})]})]}),"wait"==(null===(e=s.data)||void 0===e?void 0:e.state)&&(0,p.jsx)("button",{className:bt.start,onClick:x.setT,children:"\u0421\u0442\u0430\u0440\u0442!"}),(0,p.jsx)("button",{className:bt.start,onClick:_.setT,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}),(0,p.jsxs)(V,{open:x.v,close:x.setF,closeOnOutclick:!0,children:[(0,p.jsx)("h2",{children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443?"}),(0,p.jsx)("br",{}),(0,p.jsx)("button",{className:bt.start,onClick:()=>{x.setF(),f.mutate()},children:"\u041d\u0430\u0447\u0430\u0442\u044c"})]}),(0,p.jsx)(V,{open:g.v,close:g.setF,closeOnOutclick:!0,children:(0,p.jsx)("h2",{children:"\u0418\u0433\u0440\u0430 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u0430!"})}),(0,p.jsxs)(V,{open:_.v,close:_.setF,closeOnOutclick:!0,children:[(0,p.jsx)("h2",{children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0438\u0433\u0440\u0443?"}),(0,p.jsx)("br",{}),(0,p.jsx)("button",{className:bt.start,onClick:()=>{_.setF(),N.mutate()},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})]}),(0,p.jsx)(V,{open:y.v,close:y.setF,closeOnOutclick:!0,children:(0,p.jsx)("h2",{children:"\u0418\u0433\u0440\u0430 \u0441\u0431\u0440\u043e\u0448\u0435\u043d\u0430!"})})]})}const Nt={root:"styles_root__rT4Gh",barShake:"styles_barShake__Ur9jk",going:"styles_going__+UF8o",shake:"styles_shake__zxQyZ",bar:"styles_bar__U71pT",barLeft:"styles_barLeft__XSCZr",barRight:"styles_barRight__GNhlX",dot:"styles_dot__QlpbG",nums:"styles_nums__QEHWB",msg:"styles_msg__5G-O7",soundBtn:"styles_soundBtn__VzFT+",frame:"styles_frame__aLrbS",rects:"styles_rects__tHlp8",rect:"styles_rect__BhPFH"},Ct=t.p+"static/media/ost.03d920d73af9d5efa36e.mp3";function wt(){var e,s;M("\u0418\u0433\u0440\u0430");const t=(0,a.useQuery)("gameStateFull",(async()=>await d("/api/game/state_full"))),n=Ms(Ct,!0),l=ue(!1),i=se(0),r=(0,j.useRef)(null);return(0,j.useEffect)((()=>{var e;if(t.isFetching)return;const s="going"==(null===(e=t.data)||void 0===e?void 0:e.state)?500:5e3,n=setTimeout((()=>t.refetch()),s);return()=>clearTimeout(n)}),[t.isFetching]),(0,j.useEffect)((()=>{if(!t.data)return;if(i.set(t.data.counter),t.data.counter<0)return;const e=setInterval((()=>{i.set((s=>(0==(s=Math.max(s-1,0))&&(t.refetch(),clearInterval(e)),s)))}),1e3);return()=>clearInterval(e)}),[t.data]),(0,j.useEffect)((()=>{var e;if(!r.current||"going"!=(null===(e=t.data)||void 0===e?void 0:e.state))return;const s=setInterval((()=>{var e;"going"==(null===(e=t.data)||void 0===e?void 0:e.state)&&r.current&&function(e){const s=document.createElement("div");e.appendChild(s),s.style.top="".concat(100*Math.random(),"%"),s.style.left="".concat(100*Math.random(),"%"),setTimeout((()=>e.removeChild(s)),1e3)}(r.current)}),100);return()=>clearInterval(s)}),[r,null===(e=t.data)||void 0===e?void 0:e.state]),(0,p.jsxs)("div",{className:N(Nt.root,"going"==(null===(s=t.data)||void 0===s?void 0:s.state)&&Nt.going),style:{"--bar":t.isSuccess?kt(t.data):"50"},children:[(0,p.jsx)("div",{className:Nt.rects,ref:r}),(0,p.jsx)("div",{className:Nt.frame}),(0,p.jsx)("div",{className:Nt.barShake,children:(0,p.jsxs)("div",{className:Nt.bar,children:[(0,p.jsxs)("div",{className:Nt.barLeft,children:[(0,p.jsx)("span",{children:"\u0421\u0430\u043f\u043e\u0436\u043d\u0438\u043a\u0438"}),(0,p.jsx)("div",{className:Nt.nums,children:t.isSuccess&&"".concat(t.data.clicks1," - ").concat(t.data.clicks2)})]}),(0,p.jsx)("div",{className:Nt.barRight,children:"\u041a\u0430\u043a\u0442\u0443\u0441\u044b"})]})}),(0,p.jsx)("div",{className:Nt.msg,children:(0,p.jsxs)("div",{children:[b(t),t.isSuccess&&(0,p.jsxs)(p.Fragment,{children:["wait"==t.data.state&&(0,p.jsx)("span",{children:"\u0421\u043a\u043e\u0440\u043e \u043d\u0430\u0447\u0430\u043b\u043e!"}),("start"==t.data.state||"going"==t.data.state)&&(0,p.jsxs)("span",{children:[Math.floor(i.v/60),":",(i.v%60).toString().padStart(2,"0")]}),"end"==t.data.state&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c:"}),1==t.data.winner&&(0,p.jsx)("span",{children:"\u0421\u0430\u043f\u043e\u0436\u043d\u0438\u043a\u0438!"}),2==t.data.winner&&(0,p.jsx)("span",{children:"\u041a\u0430\u043a\u0442\u0443\u0441\u044b!"})]})]}),!l.v&&(0,p.jsx)("button",{className:Nt.soundBtn,onClick:()=>{l.setT(),n()},children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0437\u0432\u0443\u043a"})]})})]})}function kt(e){const s=e.clicks1+e.clicks2;return 0==s?"50":"".concat(e.clicks1/s*100)}function At(){var e,s;const t=m();function a(e,s,a){var l;return(0,p.jsx)(n.AW,{path:s,element:null!==(l=t.data)&&void 0!==l&&l.auth?null==e||v(t,e)?a:(0,p.jsx)(D,{}):(0,p.jsx)(n.Fg,{to:"/"})})}return(0,p.jsxs)("div",{className:"root",children:[(0,p.jsx)(_,{}),(0,p.jsx)(k,{}),t.isLoading&&(0,p.jsx)(g.Z,{}),b(t),t.isSuccess&&(0,p.jsxs)(n.Z5,{children:[(0,p.jsx)(n.AW,{path:"/",element:null!==(e=t.data)&&void 0!==e&&e.auth?(0,p.jsx)(n.Fg,{to:"/map"}):(0,p.jsx)(me,{})}),(0,p.jsx)(n.AW,{path:"/auth",element:null!==(s=t.data)&&void 0!==s&&s.auth?(0,p.jsx)(n.Fg,{to:"/"}):(0,p.jsx)(z,{})}),(0,p.jsx)(n.AW,{path:"/timetable",element:(0,p.jsx)(at,{})}),(0,p.jsx)(n.AW,{path:"/quest",element:(0,p.jsx)(qs,{})}),(0,p.jsx)(n.AW,{path:"/store",element:(0,p.jsx)(tt,{})}),(0,p.jsx)(n.AW,{path:"/map",element:(0,p.jsx)(Cs,{})}),(0,p.jsx)(n.AW,{path:"/game",element:(0,p.jsx)(yt,{})}),a(null,"/scanner",(0,p.jsx)(Ys,{})),a("page_worker","/worker",(0,p.jsx)(ht,{})),a("manage_store","/manage_store",(0,p.jsx)(vs,{})),a("manage_quest","/manage_quest",(0,p.jsx)(ls,{})),a("manage_games","/game_settings",(0,p.jsx)(ft,{})),a("manage_games","/game_screen",(0,p.jsx)(wt,{})),a("page_worker_quest","/worker_quest",(0,p.jsx)(xt,{})),a("page_worker_store","/worker_store",(0,p.jsx)(jt,{})),a("promote_worker","/promote_worker",(0,p.jsx)(Es,{role:"worker"})),a("promote_manager","/promote_manager",(0,p.jsx)(Es,{role:"manager"})),a("send_any","/send",(0,p.jsx)(et,{})),a("page_debug","/debug",(0,p.jsx)(K,{})),a("page_debug","/log",(0,p.jsx)(je,{})),a("page_users","/users",(0,p.jsx)(dt,{})),(0,p.jsx)(n.AW,{path:"*",element:(0,p.jsx)(P,{})})]})]})}}}]);
//# sourceMappingURL=601.73e17884.chunk.js.map